I"è<p>The <code>tod</code> platform supports binary sensors which get their values by checking if the current time is within defined time ranges.</p>
<p>The time ranges can be provided as absolute local time or using the <code>sunrise</code> or <code>sunset</code> keyword calculated based on the sun position for location. The location must be provided in the configuration.</p>
<p>In addition for sun position based ranges, the negative or positive offset can be configured.</p>
<h2>Configuration</h2>
<p>Here is an example of adding a sensor to the <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
binary_sensor:
  - platform: tod
    name: Early Morning
    after: sunrise
    after_offset: '-02:00'
    before: '07:00'

  - platform: tod
    name: Late Morning
    after: '10:00'
    before: '12:00'
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>Name of the sensor.</p>
</span></p></dd><dt><a class='title-link' name='before' href='#before'></a> before</dt><dd><p class='desc'><span class='type'>(<span class='string time'>string | time</span>)</span><span class='required'>(Required)</span><span class='description'><p>The absolute local time value or sun event for beginning of the time range.</p>
</span></p></dd><dt><a class='title-link' name='before_offset' href='#before_offset'></a> before_offset</dt><dd><p class='desc'><span class='type'>(<span class='time'>time</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The time offset of the beginning time range.</p>
</span></p></dd><dt><a class='title-link' name='after' href='#after'></a> after</dt><dd><p class='desc'><span class='type'>(<span class='string time'>string | time</span>)</span><span class='required'>(Required)</span><span class='description'><p>The absolute local time value or sun event for ending of the time range.</p>
</span></p></dd><dt><a class='title-link' name='after_offset' href='#after_offset'></a> after_offset</dt><dd><p class='desc'><span class='type'>(<span class='time'>time</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The time offset of the beginning time range.</p>
</span></p></dd></dl>
</div>
<h2>Considerations</h2>
<p>The primary purpose of this sensor is to use a simple time range definition instead of creating a complex template with references to <code>sun.sun</code> integration attributes.</p>
<p>The sensor state is ON when this condition <code>after</code> + <code>after_offset</code> &lt;= <code>current time</code> &lt; <code>before</code> + <code>before_offset</code>.</p>
<p>If <code>after</code> time is later than <code>before</code> then the next day is considered, i.e.:</p>
<pre><code class="language-yaml">binary_sensor:
  - platform: tod
    name: Night
    after: sunset
    before: sunrise
</code></pre>
<p>In the above example, the next day <code>sunrise</code> is calculated as a time range end.</p>
:ET