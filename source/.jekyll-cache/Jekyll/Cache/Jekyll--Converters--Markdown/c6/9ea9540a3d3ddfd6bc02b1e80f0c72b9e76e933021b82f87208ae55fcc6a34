I"5<p>The <code>spotify</code> media player platform allows you to control
<a href="https://www.spotify.com/">Spotify</a> playback from Home Assistant.</p>
<h2>Prerequisites</h2>
<ul>
<li>Spotify account</li>
<li>Spotify application, properly configured (see below)</li>
</ul>
<div class='note'>
Controlling the Spotify integration (pause, play, next, etc.) requires a Premium account. If you do not have a Premium account, the integration in the frontend will not show the controls.
</div>
<p>To create the required Spotify application:</p>
<ul>
<li>Login to <a href="https://developer.spotify.com">Spotify Developer</a></li>
<li>Visit the <a href="https://developer.spotify.com/my-applications/#!/applications">My Applications</a> page</li>
<li>Select <strong>Create An App</strong>. Enter any name and description. Once your application is created, view it and copy your <strong>Client ID</strong> and <strong>Client Secret</strong>, which are used in the Home Assistant configuration file.</li>
<li>Add a <strong>Redirect URI</strong> in one of the following forms:</li>
</ul>
<p>If you are not using SSL:
<code>http://&lt;your_home_assistant_url_or_local_ip&gt;/api/spotify</code></p>
<p>If you are using SSL:
<code>https://&lt;your_home_assistant_url_or_local_ip&gt;/api/spotify</code></p>
<ul>
<li>Click <strong>Save</strong> after adding the URI.</li>
</ul>
<p>If you are using an externally accessible address you will likely also need to set the <code>base_url</code> attribute of the <a href="/integrations/http/">HTTP Component</a>. This should be set using the same base URL as the redirect URI, e.g., if you used a domain name (not local IP) in the redirect, then use the same domain name in your <code>base_url</code>.</p>
<h2>Configuration</h2>
<p>To add Spotify to your installation,
add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
media_player:
  - platform: spotify
    client_id: YOUR_CLIENT_ID
    client_secret: YOUR_CLIENT_SECRET
    aliases:
        abc123def456: 'Living Room'
        9183abas000: 'Bed Room'
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='client_id' href='#client_id'></a> client_id</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>Client ID from your Spotify application.</p>
</span></p></dd><dt><a class='title-link' name='client_secret' href='#client_secret'></a> client_secret</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>Client Secret from your Spotify application.</p>
</span></p></dd><dt><a class='title-link' name='cache_path' href='#cache_path'></a> cache_path</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Path to cache authentication token.</p>
</span></p><p class='default'>
Default value: <p>.spotify-token-cache</p>
</p></dd><dt><a class='title-link' name='aliases' href='#aliases'></a> aliases</dt><dd><p class='desc'><span class='type'>(<span class='map'>map</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Dictionary of device ids to be aliased, handy for devices that Spotify cannot properly determine the device name of. New devices will be logged to the <code>info</code> channel for ease of aliasing.</p>
</span></p></dd><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The name of the device used in the frontend.</p>
</span></p><p class='default'>
Default value: <p>Spotify</p>
</p></dd></dl>
</div>
<h2>Setup</h2>
<p>After the prerequisites and configuration are complete, restart Home Assistant.
Under notifications a <strong>Spotify</strong> configurator element will be available. Click on “Link Spotify account” and follow the instructions to
authorize Home Assistant to access your Spotify account. A Spotify media player
will then appear. If you are prompted to download a file after completing
authorization, discard the download. It is not needed.</p>
<h2>Sources</h2>
<p>The sources are based on if you have streamed to these devices before in
Spotify. If you don’t have any sources, then simply stream from your phone to
another device in your house: Bluetooth, echo, etc. Once you do, the sources will
show up in the Spotify developer console as a device to cast/stream to.
Go to <a href="https://developer.spotify.com">https://developer.spotify.com</a> and login. Click on “Console” in top menu and then “Player” in the left menu. Select 	“/v1/me/player/devices” in the list. Then click “Get token”, accept the terms and click “Try it”. Your active Spotify devices will then be listed in the right panel, beneath the curl-line (for example, “name”: “Web Player (Chrome)”).<br />
These names can then be used in for example an input selector:</p>
<pre><code class="language-yaml">  spotify_source:
    name: 'Source:'
    options:
      - Spotifyd@rock64
      - Web Player (Chrome)
</code></pre>
<p>The devices won’t show up in the dev-console as sources unless they are powered on as well.</p>
<h2>URI Links For Playlists/Etc.</h2>
<p>You can send playlists to spotify via the <code>&quot;media_content_type&quot;: &quot;playlist&quot;</code> and something like (depending on your content ID)
<code>&quot;media_content_id&quot;: &quot;spotify:user:spotify:playlist:37i9dQZF1DWSkkUxEhrBdF&quot;</code>
which are part of the
<a href="/integrations/media_player/#service-media_playerplay_media">media_player.play_media</a>
service. You can test this from the services
control panel in the Home Assistant frontend.</p>
<h2>Services</h2>
<p>Extra services besides the default ones in component <a href="/integrations/media_player/">Media Player component</a>.</p>
<h3>Service <code>play_playlist</code></h3>
<p>Play a Spotify playlist with an option to start on a random position of the playlist.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>media_content_id</code></td>
<td>no</td>
<td>Spotify URI of playlist. Must be playlist kind of URI.</td>
</tr>
<tr>
<td><code>random_song</code></td>
<td>yes</td>
<td>True to select random song at start, False to start from beginning.</td>
</tr>
</tbody>
</table>
<p>The above playlist example is a URI link to the “Reggae Infusions” playlist.
<a href="https://support.spotify.com/us/article/sharing-music/">This support document from Spotify</a>
explains how to get this URI value to use for playlists in the Spotify component.</p>
<h2>Unsupported Devices</h2>
<ul>
<li><strong>Sonos</strong>: Although Sonos is a Spotify Connect device, it is not supported by the official Spotify API.</li>
</ul>
:ET