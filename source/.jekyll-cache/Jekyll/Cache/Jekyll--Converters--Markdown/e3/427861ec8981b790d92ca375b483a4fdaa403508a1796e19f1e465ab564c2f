I"¬<p>The <code>integration</code> platform provides the <a href="https://en.wikipedia.org/wiki/Riemann_sum">Riemann sum</a> of the values provided by a source sensor. The Riemann sum is an approximation of an <strong>integral</strong> by a finite sum. The integration sensors is updated upon changes of the <strong>source</strong>. Fast sampling source sensors provide better results. In this implementation, the default is the Trapezoidal method, but Left and Right methods can optionally be used.</p>
<h2>Configuration</h2>
<p>To enable Integration Sensor in your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
sensor:
  - platform: integration
    source: sensor.current_power
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='source' href='#source'></a> source</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The entity ID of the sensor providing numeric readings.</p>
</span></p></dd><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Name to use in the frontend.</p>
</span></p><p class='default'>
Default value: <p>source entity ID meter</p>
</p></dd><dt><a class='title-link' name='round' href='#round'></a> round</dt><dd><p class='desc'><span class='type'>(<span class='integer'>integer</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Round the calculated integration value to at most N decimal places.</p>
</span></p><p class='default'>
Default value: <p>3</p>
</p></dd><dt><a class='title-link' name='unit_prefix' href='#unit_prefix'></a> unit_prefix</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Metric unit to prefix the integration result. Available units are <code>k</code>, <code>M</code>, <code>G</code> and <code>T</code>.</p>
</span></p><p class='default'>
Default value: <p>None</p>
</p></dd><dt><a class='title-link' name='unit_time' href='#unit_time'></a> unit_time</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>SI unit of time to integrate over. Available units are <code>s</code>, <code>min</code>, <code>h</code> and <code>d</code>.</p>
</span></p><p class='default'>
Default value: <p>h</p>
</p></dd><dt><a class='title-link' name='unit' href='#unit'></a> unit</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Unit of measurement to be used for the integration.</p>
</span></p></dd><dt><a class='title-link' name='method' href='#method'></a> method</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Riemann sum method to be used. Available methods are <code>trapezoidal</code>, <code>left</code> and <code>right</code>.‚Äù</p>
</span></p><p class='default'>
Default value: <p>trapezoidal</p>
</p></dd></dl>
</div>
<p>In case you have an appliance which produces spikey consumption (like an on/off electrical boiler) you should opt for the <code>left</code> method to get accurate readings. If <code>unit</code> is set then <code>unit_prefix</code> and <code>unit_time</code> are ignored.</p>
<h2>Energy</h2>
<p>An <code>integration</code> sensor is quite useful in energy billing scenarios since energy is generally billed in kWh and many sensors provide power in W (Watts).</p>
<p>If you have a sensor that provides you with power readings in Watts (uses W as <code>unit_of_measurement</code>), then you can use the <code>integration</code> sensor to track how much energy is being spent. Take the next configuration as an example:</p>
<pre><code class="language-yaml">sensor:
  - platform: integration
    source: sensor.current_power
    name: energy_spent
    unit_prefix: k
    round: 2
</code></pre>
<p>This configuration will provide you with <code>sensor.energy_spent</code> who will have your energy in kWh.</p>
:ET