I"<p>The MQTT <a href="/integrations/switch.mqtt/">switch</a> and <a href="/integrations/sensor.mqtt/">sensor</a> platforms support processing JSON over MQTT messages and parsing them using JSONPath. JSONPath allows you to specify where in the JSON the value resides that you want to use. The following examples will always return the value <code>100</code>.</p>
<table>
<thead>
<tr>
<th>JSONPath query</th>
<th>JSON</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>somekey</code></td>
<td><code>{ 'somekey': 100 }</code></td>
</tr>
<tr>
<td><code>somekey[0]</code></td>
<td><code>{ 'somekey': [100] }</code></td>
</tr>
<tr>
<td><code>somekey[0].value</code></td>
<td><code>{ 'somekey': [ { value: 100 } ] }</code></td>
</tr>
</tbody>
</table>
<p>To use this, add the following key to your <code>configuration.yaml</code>:</p>
<pre><code class="language-yaml">switch:
  platform: mqtt
  state_format: 'json:somekey[0].value'
</code></pre>
<p>It is also possible to extract JSON values by using a value template:</p>
<pre><code class="language-yaml">switch:
  platform: mqtt
  value_template: '{{ value_json.somekey[0].value }}'
</code></pre>
<p>More information about the full JSONPath syntax can be found <a href="https://github.com/kennknowles/python-jsonpath-rw#jsonpath-syntax">in their documentation</a>.</p>
:ET