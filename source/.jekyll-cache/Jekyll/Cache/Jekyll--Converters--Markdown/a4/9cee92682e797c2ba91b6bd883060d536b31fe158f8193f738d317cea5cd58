I"½<p>The <code>template</code> platform creates locks that combines components.</p>
<p>For example, if you have a garage door with a toggle switch that operates the motor and a sensor that allows you know whether the door is open or closed, you can combine these into a lock that knows whether the garage door is open or closed.</p>
<p>This can simplify the GUI and make it easier to write automations. You can mark the integrations you have combined as <code>hidden</code> so they donâ€™t appear themselves.</p>
<p>In optimistic mode, the lock will immediately change state after every command. Otherwise, the lock will wait for state confirmation from the template. Try to enable it, if experiencing incorrect lock operation.</p>
<h2>Configuration</h2>
<p>To enable Template Locks in your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
lock:
  - platform: template
    name: Garage door
    value_template: &quot;{{ is_state('sensor.door', 'on') }}&quot;
    lock:
      service: switch.turn_on
      data:
        entity_id: switch.door
    unlock:
      service: switch.turn_off
      data:
        entity_id: switch.door
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Name to use in the frontend.</p>
</span></p><p class='default'>
Default value: <p>Template Lock</p>
</p></dd><dt><a class='title-link' name='value_template' href='#value_template'></a> value_template</dt><dd><p class='desc'><span class='type'>(<span class='template'><a href="/docs/configuration/templating/">template</a></span>)</span><span class='required'>(Required)</span><span class='description'><p>Defines a template to set the state of the lock.</p>
</span></p></dd><dt><a class='title-link' name='availability_template' href='#availability_template'></a> availability_template</dt><dd><p class='desc'><span class='type'>(<span class='template'><a href="/docs/configuration/templating/">template</a></span>)</span><span class='required'>(Optional)</span><span class='description'><p>Defines a template to get the <code>available</code> state of the component. If the template returns <code>true</code>, the device is <code>available</code>. If the template returns any other value, the device will be <code>unavailable</code>. If <code>availability_template</code> is not configured, the component will always be <code>available</code>.</p>
</span></p><p class='default'>
Default value: <p>true</p>
</p></dd></dl>
</div>
<h2>Considerations</h2>
<p>If you are using the state of a platform that takes extra time to load, the Template Lock may get an <code>unknown</code> state during startup. This results in error messages in your log file until that platform has completed loading. If you use <code>is_state()</code> function in your template, you can avoid this situation. For example, you would replace <code>{{ is_state('switch.source', 'on') }}</code> with this equivalent that returns <code>true</code>/<code>false</code> and never gives an unknown result: <code>{{ is_state('switch.source', 'on') }}</code></p>
<h2>Examples</h2>
<p>In this section, you find some real-life examples of how to use this lock.</p>
<h3>Lock from Switch</h3>
<p>This example shows a lock that copies data from a switch.</p>
<pre><code class="language-yaml">lock:
  - platform: template
    name: Garage Door
    value_template: &quot;{{ is_state('switch.source', 'on') }}&quot;
    lock:
      service: switch.turn_on
      data:
        entity_id: switch.source
    unlock:
      service: switch.turn_off
      data:
        entity_id: switch.source
</code></pre>
<h3>Optimistic Mode</h3>
<p>This example shows a lock in optimistic mode. This lock will immediately change state after command and will not wait for state update from the sensor.</p>
<pre><code class="language-yaml">lock:
  - platform: template
    name: Garage Door
    value_template: &quot;{{ is_state('sensor.skylight.state', 'on') }}&quot;
    optimistic: true
    lock:
      service: switch.turn_on
      data:
        entity_id: switch.source
    unlock:
      service: switch.turn_off
      data:
        entity_id: switch.source
</code></pre>
<h3>Sensor and Two Switches</h3>
<p>This example shows a lock that takes its state from a sensor, and uses two momentary switches to control a device.</p>
<pre><code class="language-yaml">lock:
  - platform: template
    name: Garage Door
    value_template: &quot;{{ is_state('sensor.skylight.state', 'on') }}&quot;
    lock:
      service: switch.turn_on
      data:
        entity_id: switch.skylight_open
    unlock:
      service: switch.turn_on
      data:
        entity_id: switch.skylight_close
</code></pre>
:ET