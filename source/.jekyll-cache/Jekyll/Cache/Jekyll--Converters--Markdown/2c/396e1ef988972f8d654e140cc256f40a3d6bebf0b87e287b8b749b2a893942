I"À<p>The <code>gstreamer</code> platform allows you to play audio via a <a href="https://gstreamer.freedesktop.org/">gstreamer</a> pipeline. Practically, this means you can play audio directly on the computer running Home Assistant. It is particularly suited for playing TTS. Advanced users can specify a pipeline to transform the audio stream and/or redirect it elsewhere.</p>
<p>To add a <code>gstreamer</code> media player to your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
media_player:
  - platform: gstreamer
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Name of the media player.</p>
</span></p></dd><dt><a class='title-link' name='pipeline' href='#pipeline'></a> pipeline</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>A <code>gst</code> pipeline description.</p>
</span></p></dd></dl>
</div>
<p>Only the <code>music</code> media type is supported.</p>
<h2>Setup</h2>
<p>And then install the following system dependencies:</p>
<p>Debian/Ubuntu/Rasbian:</p>
<pre><code class="language-bash">sudo apt-get install python3-gst-1.0 \
    gir1.2-gstreamer-1.0 gir1.2-gst-plugins-base-1.0 \
    gstreamer1.0-plugins-good gstreamer1.0-plugins-ugly \
    gstreamer1.0-tools
</code></pre>
<p>Red Hat/Centos/Fedora:</p>
<pre><code class="language-bash">sudo yum install -y python-gstreamer1 gstreamer1-plugins-good \
    gstreamer1-plugins-ugly
</code></pre>
<p>For Fedora replace <code>yum</code> with <code>dnf</code>.</p>
<p>If youâ€™re running Home Assistant in a virtual environment, youâ€™ll need to symlink the system Pythonâ€™s <code>gi</code> module into your virtual environment:</p>
<pre><code class="language-bash">ln -s /path/to/your/installation/of/gi /path/to/your/venv/lib/python3.4/site-packages
</code></pre>
<p>On a Raspberry Pi, you may need to add the Home Assistant user to the <code>audio</code> group:</p>
<pre><code class="language-bash">sudo usermod -a -G audio &lt;ha_user&gt;
</code></pre>
<h2>Example Usage</h2>
<h3>Using with TTS</h3>
<p>To play TTS on your local computer (for example, if you have speakers attached to your Raspberry Pi:</p>
<pre><code class="language-yaml">media_player:
  - platform: gstreamer

script:
  tts:
    sequence:
      - service: tts.google_say # or amazon_polly, voicerss, etc
        data:
          entity_id: media_player.gstreamer
          message: &quot;example text-to-speech message&quot;
</code></pre>
<h3>Using with Snapcast</h3>
<p>To play to a named pipe for consumption by Snapcast:</p>
<pre><code class="language-yaml">media_player:
  - platform: gstreamer
    pipeline: &quot;audioresample ! audioconvert ! audio/x-raw,rate=48000,channels=2,format=S16LE ! wavenc ! filesink location=/tmp/snapcast_gstreamer&quot;
</code></pre>
:ET