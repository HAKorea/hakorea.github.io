I"Ò<p>The <code>vesync</code> integration enables you to control Etekcity smart switches and outlets connected to the VeSync App.</p>
<p>The devices must be added to the VeSync App before this integration can discover them.</p>
<p>The following platforms are supported:</p>
<ul>
<li><strong>switch</strong></li>
</ul>
<h2>Supported Devices</h2>
<p>This integration supports devices controllable by the VeSync App.  The following devices are supported by this integration:</p>
<h3>Plugs</h3>
<ul>
<li>Etekcity 7 Amp US outlet - ESW01-USA (Round)</li>
<li>Etekcity 10 Amp US outlet - ESW10-USA (Round)</li>
<li>Etekcity 10 Amp EU outlet - ESW10-EU (Round)</li>
<li>Etekcity 15 Amp US outlet - ESW15-USA (Rectangular)</li>
<li>Etekcity 2 Plug Outdoor Outlet - ESO15-TB</li>
</ul>
<h3>Switches</h3>
<ul>
<li>Etekcity In Wall Smart Switch (EWSL01-USA)</li>
</ul>
<h2>Configuration</h2>
<p>To use this integration, all devices must be registered with the VeSync App. Once registration is complete, you can add the VeSync integration by adding the VeSync integration in the configuration section of the frontend and entering your username and password.  You can also use the traditional configuration method by adding the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
vesync:
  username: YOUR_USERNAME
  password: YOUR_PASSWORD
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='username' href='#username'></a> username</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>Username needed to log in to VeSync.</p>
</span></p></dd><dt><a class='title-link' name='password' href='#password'></a> password</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>Password needed to log in to VeSync.</p>
</span></p></dd></dl>
</div>
<h2>Services</h2>
<table>
<thead>
<tr>
<th>Service</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>update_devices</code></td>
<td>Poll Vesync server to find and add any new devices</td>
</tr>
</tbody>
</table>
<h2>Outlet Exposed Attributes</h2>
<p>VeSync outlets will expose the following details for only the smart outlets. Energy monitoring not available for in-wall switches.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>current_power_w</code></td>
<td>The present power consumption of the switch in watts.</td>
<td>100</td>
</tr>
<tr>
<td><code>today_energy_kwh</code></td>
<td>The kilowatt hours used by the switch during the previous 24 hours.</td>
<td>0.12</td>
</tr>
<tr>
<td><code>voltage</code></td>
<td>Current voltage of the device</td>
<td>120.32</td>
</tr>
<tr>
<td><code>weekly_energy_total</code></td>
<td>Total energy usage for week starting from Monday 12:01AM in kWh</td>
<td>14.74</td>
</tr>
<tr>
<td><code>monthly_energy_total</code></td>
<td>Total energy usage for month starting from 12:01AM on the first in kWh</td>
<td>52.30</td>
</tr>
<tr>
<td><code>yearly_energy_total</code></td>
<td>Total energy usage for year start from 12:01AM on Jan 1 in kWh</td>
<td>105.25</td>
</tr>
</tbody>
</table>
<h2>Extracting Attribute data</h2>
<p>In order to get the attributes readings from supported devices, such as energy from outlets or fan attributes, youâ€™ll have to create a <a href="/integrations/switch.template/">template sensor</a>.</p>
<p>In the example below, change all of the <code>vesync_switch</code>â€˜s to match your deviceâ€™s entity ID.</p>
<p>Adapted from the <a href="https://www.home-assistant.io/integrations/tplink/#plugs">TP-Link integration</a>.</p>
<pre><code class="language-yaml">sensor:
  - platform: template
      vesync_switch_watts:
        friendly_name_template: &quot;{{ states.switch.vesync_switch.name}} Current Consumption&quot;
        value_template: '{{ states.switch.vesync_switch.attributes[&quot;current_power_w&quot;] | float }}'
        unit_of_measurement: 'W'
      vesync_switch_total_kwh:
        friendly_name_template: &quot;{{ states.switch.vesync_switch.name}} Total Consumption&quot;
        value_template: '{{ states.switch.vesync_switch.attributes[&quot;today_energy_kwh&quot;] | float }}'
        unit_of_measurement: 'kWh'
      vesync_switch_volts:
        friendly_name_template: &quot;{{ states.switch.vesync_switch.name}} Voltage&quot;
        value_template: '{{ states.switch.vesync_switch.attributes[&quot;voltage&quot;] | float }}'
        unit_of_measurement: 'V'
</code></pre>
:ET