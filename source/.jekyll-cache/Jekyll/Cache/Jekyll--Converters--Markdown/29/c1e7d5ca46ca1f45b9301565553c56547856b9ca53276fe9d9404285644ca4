I"y<p>This requires a <a href="/integrations/foscam">Foscam IP Camera</a> camera with PTZ (Pan, Tilt, Zoom) and CGI functionality (<a href="https://www.foscam.es/descarga/Foscam-IPCamera-CGI-User-Guide-AllPlatforms-2015.11.06.pdf">Source</a>)</p>
<p>Foscam Cameras can be controlled by Home Assistant through a number of CGI commands.
The following outlines examples of the switch, services, and scripts required to move between 2 preset destinations while controlling motion detection, but many other options of movement are provided in the Foscam CGI User Guide linked above.</p>
<p>The <code>switch.foscam_motion</code> will control whether the motion detection is on or off. This switch supports <code>statecmd</code>, which checks the current state of motion detection.</p>
<pre><code class="language-yaml"># Replace admin and password with an &quot;Admin&quot; privileged Foscam user
# Replace ipaddress with the local IP address of your Foscam
switch:
 platform: command_line
 switches:
   #Switch for Foscam Motion Detection
   foscam_motion:
     command_on: 'curl -k &quot;https://ipaddress:443/cgi-bin/CGIProxy.fcgi?cmd=setMotionDetectConfig&amp;isEnable=1&amp;usr=admin&amp;pwd=password&quot;'
     command_off: 'curl -k &quot;https://ipaddress:443/cgi-bin/CGIProxy.fcgi?cmd=setMotionDetectConfig&amp;isEnable=0&amp;usr=admin&amp;pwd=password&quot;'
     command_state: 'curl -k --silent &quot;https://ipaddress:443/cgi-bin/CGIProxy.fcgi?cmd=getMotionDetectConfig&amp;usr=admin&amp;pwd=password&quot; | grep -oP &quot;(?&lt;=isEnable&gt;).*?(?=&lt;/isEnable&gt;)&quot;'
     value_template: '{{ value == &quot;1&quot; }}'
</code></pre>
<p>The service <code>shell_command.foscam_turn_off</code> sets the camera to point down and away to indicate it is not recording, and <code>shell_command.foscam_turn_on</code> sets the camera to point where I‚Äôd like to record. h of these services require preset points to be added to your camera. See source above for additional information.</p>
<pre><code class="language-yaml">shell_command:
  #Created a preset point in Foscam Web Interface named Off which essentially points the camera down and away
  foscam_turn_off: 'curl -k &quot;https://ipaddress:443/cgi-bin/CGIProxy.fcgi?cmd=ptzGotoPresetPoint&amp;name=Off&amp;usr=admin&amp;pwd=password&quot;'
  #Created a preset point in Foscam Web Interface named Main which points in the direction I would like to record
  foscam_turn_on: 'curl -k &quot;https://ipaddress:443/cgi-bin/CGIProxy.fcgi?cmd=ptzGotoPresetPoint&amp;name=Main&amp;usr=admin&amp;pwd=password&quot;'
</code></pre>
<p>The <code>script.foscam_off</code> and <code>script.foscam_on</code> can be used to set the motion detection appropriately, and then move the camera. These scripts can be called as part of an automation with <code>device_tracker</code> triggers to set <code>home</code> and <code>not_home</code> modes for your Foscam and disable motion detection recording while <code>home</code>.</p>
<pre><code class="language-yaml">script:
 foscam_off:
   sequence:
   - service: switch.turn_off
     data:
       entity_id: switch.foscam_motion
   - service: shell_command.foscam_turn_off
 foscam_on:
   sequence:
   - service: switch.turn_off
     data:
       entity_id: switch.foscam_motion
   - service: shell_command.foscam_turn_on
   - service: switch.turn_on
     data:
       entity_id: switch.foscam_motion
</code></pre>
<p>To automate Foscam being set to ‚Äúon‚Äù (facing the correct way with motion sensor on), I used the following simple automation:</p>
<pre><code class="language-yaml">automation:
  - alias: Set Foscam to Away Mode when I leave home
    trigger:
      platform: state
      entity_id: group.family
      from: 'home'
    action:
      service: script.foscam_on
  - alias: Set Foscam to Home Mode when I arrive Home
    trigger:
      platform: state
      entity_id: group.family
      to: 'home'
    action:
      service: script.foscam_off
</code></pre>
:ET