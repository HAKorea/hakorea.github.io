I"L<p>The <code>cisco_webex_teams</code> notification platform allows you to deliver rich notifications from Home Assistant to <a href="https://www.webex.com/team-collaboration.html">Cisco Webex Teams</a> (formerly known as Cisco Spark).</p>
<p>To use this notification platform you will need an app (bot) token. To obtain a token visit <a href="https://developer.webex.com/">Cisco Webex for Developers</a>.</p>
<ul>
<li>Detailed instructions can be found in the section titled <strong>Creating a Webex Teams Bot</strong> on the <a href="https://developer.webex.com/docs/bots">Webex Teams bot documentation</a>.</li>
</ul>
<p>You also need to specify the <code>room_id</code> that you wish to post messages into. The <code>room_id</code> can be found in one of two ways:</p>
<ol>
<li>Logging in at <a href="https://developer.webex.com/">Cisco Webex for Developers</a> and navigate to <code>Documentation</code>&gt;<code>API Reference</code>&gt;<code>Messages</code> and select List Messages, or</li>
<li>Log into the web client at <a href="https://teams.webex.com/">teams.webex.com</a>,</li>
</ol>
<ul>
<li>select the room (or create a new room),</li>
<li>then copying the room ID from the URL.</li>
</ul>
<p><strong><strong>Note:</strong> you must add the bot email (in the format <code>mybot@webex.bot</code>) as a participant to the room specified above.</strong></p>
<p>To enable this platform in your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
notify:
  - name: NOTIFIER_NAME
    platform: cisco_webex_teams
    token: YOUR_BOT_TOKEN
    room_id: CISCO_WEBEX_TEAMS_ROOMID
</code></pre>
<h2>Rich Text Formatting</h2>
<p>Webex Teams clients can render rich text via a whitelisted set of html tags.</p>
<p>For example, you could configure automations to display details in an easy to read fashion like so:</p>
<p class='img'>
<img src='/images/integrations/cisco_webex_teams/rich_formatting.png' />
Rich text as displayed in the macOS client.
</p>
<p>Here are the automations for the above screenshot:</p>
<pre><code class="language-yaml">
# Rich Text Example 1.
# Show a one line message with a red banner
- alias: &quot;Notify On Build Failing&quot;
  trigger:
    - platform: webhook
      webhook_id: build_failed
  action:
    service: notify.cisco_webex_teams_notify
    data:
      message: &quot;&lt;blockquote class=danger&gt;Build 0.89.5 compile failed.&quot;


# Rich Text Example 2.
# Show a title and multi-line message with a yellow banner, 
# with lists, a person mention and a link
- alias: &quot;Notify On Build Unstable&quot;
  trigger:
    - platform: webhook
      webhook_id: build_unstable
  action:
    service: notify.cisco_webex_teams_notify
    data:
      title: &quot;&lt;strong&gt;Build 0.89.6 is unstable.&lt;/strong&gt;&quot;
      message: &quot;&lt;blockquote class=warning&gt;Version 0.89.6 failed verifications.
      
      &lt;ul&gt;
        &lt;li&gt; test_osx
        &lt;li&gt; test_win_lint

        &lt;li&gt;... and 4 more.
      &lt;/ul&gt;
      &lt;p&gt;&lt;@personEmail:sparkbotjeeves@sparkbot.io&gt;&lt;/p&gt;
      &lt;p&gt;&lt;small&gt;&lt;i&gt;View &lt;a href='https://demo/testReport/'&gt;Test Report&lt;/a&gt;&lt;/i&gt;&lt;/small&gt;&lt;br&gt;&lt;/p&gt;
      &quot;

# Rich Text Example 3.
# Show a title and multi-line message with a blue banner, 
# with lists, a person mention and a link
- alias: &quot;Notify On Build Passing&quot;
  trigger:
    - platform: webhook
      webhook_id: build_passed
  action:
    service: notify.cisco_webex_teams_notify
    data:
      title: &quot;&lt;strong&gt;âœ… Version 0.89.7 passed all tests and deployed to production!&lt;/strong&gt;&quot;
      message: &quot;&lt;blockquote class=info&gt;Version 0.89.7 passed all verifications.
      
      &lt;ul&gt;
        &lt;li&gt; test_cov
        &lt;li&gt; test_osx
        &lt;li&gt; test_win
        &lt;li&gt; test_linux
        &lt;li&gt;... and 45 more.
      &lt;/ul&gt;
      &quot;
</code></pre>
<p>The following is a list of the allowed html tags and attributes:</p>
<table>
<thead>
<tr>
<th>Tag</th>
<th>More Info</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;@personEmail:email@examplecompany.com&gt;</code></td>
<td>Used to tag another Webex Team user by email address.</td>
</tr>
<tr>
<td><code>&lt;a&gt;</code></td>
<td>Defines a hyperlink. Allows attribute <code>href</code>.</td>
</tr>
<tr>
<td><code>&lt;blockquote&gt;</code></td>
<td>Defines a section that is quoted from another source. Allows attribute <code>class</code> with allowed values <code>danger</code>, <code>warning</code>, <code>info</code>, <code>primary</code>, <code>secondary</code>.</td>
</tr>
<tr>
<td><code>&lt;b&gt;</code></td>
<td>Defines bold text.</td>
</tr>
<tr>
<td><code>&lt;strong&gt;</code></td>
<td>Defines important text.</td>
</tr>
<tr>
<td><code>&lt;i&gt;</code></td>
<td>Defines italic text.</td>
</tr>
<tr>
<td><code>&lt;em&gt;</code></td>
<td>Defines emphasized text.</td>
</tr>
<tr>
<td><code>&lt;pre&gt;</code></td>
<td>Defines preformatted text.</td>
</tr>
<tr>
<td><code>&lt;code&gt;</code></td>
<td>Defines a piece of computer code.</td>
</tr>
<tr>
<td><code>&lt;br&gt;</code></td>
<td>Defines a single line break.</td>
</tr>
<tr>
<td><code>&lt;p&gt;</code></td>
<td>Defines a paragraph.</td>
</tr>
<tr>
<td><code>&lt;ul&gt;</code></td>
<td>Defines an unordered list.</td>
</tr>
<tr>
<td><code>&lt;ol&gt;</code></td>
<td>Defines an ordered list.</td>
</tr>
<tr>
<td><code>&lt;li&gt;</code></td>
<td>Defines a list item.</td>
</tr>
<tr>
<td><code>&lt;h1&gt;</code> to <code>&lt;h3&gt;</code></td>
<td>Defines HTML headings.</td>
</tr>
</tbody>
</table>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Setting the optional parameter <code>name</code> allows multiple notifiers to be created. The notifier will bind to the service <code>notify.NOTIFIER_NAME</code>.</p>
</span></p><p class='default'>
Default value: <p>notify</p>
</p></dd><dt><a class='title-link' name='token' href='#token'></a> token</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>Your app (bot) token.</p>
</span></p></dd><dt><a class='title-link' name='room_id' href='#room_id'></a> room_id</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The Room ID.</p>
</span></p></dd></dl>
</div>
<p>To use notifications, please see the <a href="/getting-started/automation/">getting started with automation page</a>.</p>
:ET