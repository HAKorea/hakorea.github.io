I"À<p>AdGuard Home is a network-wide ad- and tracker-blocking DNS server with parental
control (adult content blocking) capabilities. The <code>adguard</code> integration allows
you to control and monitor your AdGuard Home instance in Home Assistant.</p>
<h2>Configuration via the frontend</h2>
<p>Menu: <strong>Configuration</strong> -&gt; <strong>Integrations</strong>.</p>
<p>Click on the <code>+</code> sign to add an integration and click on <strong>AdGuard Home</strong>.
After completing the configuration flow, the AdGuard Home
integration will be available.</p>
<h2>Sensors</h2>
<p>This integration provides sensors for the following information from AdGuard Home:</p>
<ul>
<li>Number of DNS queries.</li>
<li>Number of blocked DNS queries.</li>
<li>Ratio (%) of blocked DNS queries.</li>
<li>Number of requests blocked by safe browsing.</li>
<li>Number of safe searches enforced.</li>
<li>Number of requests blocked by parental control.</li>
<li>Total number of active filter rules loaded.</li>
<li>Average response time of AdGuard‚Äôs DNS server in milliseconds.</li>
</ul>
<h2>Switches</h2>
<p>The integration will create a number of switches:</p>
<ul>
<li>AdGuard Protection (master switch).</li>
<li>Filtering.</li>
<li>Safe Browsing.</li>
<li>Parental Control.</li>
<li>Safe Search.</li>
<li>Query Log.</li>
</ul>
<p>These switches allow you to automate things easily. For example, one could
write an automation to turn off Safe Search after the kids‚Äô bedtime.</p>
<p>The ‚ÄúAdGuard Protection‚Äù switch is a master switch. It will turn off and
bypass all AdGuard features, regardless of whether they are switched on or not.</p>
<div class="note">
Turning off Query Log will result in all sensors not receiving updates anymore.
AdGuard relies on Query Log to provide stats.
</div>
<h2>Services</h2>
<p>These services allow one to manage filter subscriptions in AdGuard Home.
Using these services in automations could be helpful to block certain
sites/domains at certain times.</p>
<p>For example, you could create a custom filter list that blocks social media sites
during the day and releases them during the evening.</p>
<h3>Service <code>add_url</code></h3>
<p>Add a new filter subscription to AdGuard Home.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>No</td>
<td>The name of the filter subscription.</td>
</tr>
<tr>
<td><code>url</code></td>
<td>No</td>
<td>The filter URL to subscribe to, containing the filter rules.</td>
</tr>
</tbody>
</table>
<h3>Service <code>remove_url</code></h3>
<p>Removes a filter subscription from AdGuard Home.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td>No</td>
<td>The filter subscription URL to remove.</td>
</tr>
</tbody>
</table>
<h3>Service <code>enable_url</code></h3>
<p>Enables a filter subscription in AdGuard Home.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td>No</td>
<td>The filter subscription URL to enable.</td>
</tr>
</tbody>
</table>
<h3>Service <code>disable_url</code></h3>
<p>Disables a filter subscription in AdGuard Home.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td>No</td>
<td>The filter subscription URL to disable.</td>
</tr>
</tbody>
</table>
<h3>Service <code>refresh</code></h3>
<p>Refresh all filter subscriptions in AdGuard Home.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>force</code></td>
<td>Yes</td>
<td>Force update (bypasses AdGuard Home throttling).</td>
</tr>
</tbody>
</table>
<p>By default, <code>force</code> is set to <code>false</code>. Forcing an update bypasses AdGuard Home‚Äôs
throttling logic, so use with care.</p>
:ET