I"ù5<p>The <code>ecobee</code> integration lets you control and view sensor data from <a href="https://ecobee.com">ecobee</a> thermostats.</p>
<h2>Preliminary Step</h2>
<p>You will need to obtain an API key from ecobee‚Äôs <a href="https://www.ecobee.com/developers/">developer site</a> to use this integration. To get the key, your thermostat must be registered on ecobee‚Äôs website (which you likely would have already done while installing your thermostat). Once you have done that, perform the following steps.</p>
<ol>
<li>Click on the <strong>Become a developer</strong> link on the <a href="https://www.ecobee.com/developers/">developer site</a>.</li>
<li>Log in with your ecobee credentials.</li>
<li>Accept the SDK agreement.</li>
<li>Fill in the fields.</li>
<li>Click <strong>save</strong>.</li>
</ol>
<p>Log in to the regular consumer portal, and click the overflow menu button in the upper right. You will see a new option named <strong>Developer</strong>. Now we can create the Application to hook up to Home Assistant.</p>
<ol>
<li>Select the <strong>Developer</strong> option from the hamburger menu.</li>
<li>Select <strong>Create New</strong>.</li>
<li>Give your App a name (it must be unique across all ecobee users; try your-name-or-alias-home-assistant) and a summary (which need not be unique). Neither of these are important as they are not used anywhere in Home Assistant.</li>
<li>For authorization method select <strong>ecobee PIN</strong>.</li>
<li>You don‚Äôt need an Application Icon or Detailed Description.</li>
<li>Click <strong>Create</strong>.</li>
</ol>
<p>Under the Name and Summary Section, you will now have an API key. Copy this key and use it in your configuration section below. Click the <strong>X</strong> to close the Developer section.</p>
<h2>Configuring the Integration</h2>
<p>To configure the ecobee integration in Home Assistant, you can either use the <strong>Configuration</strong> &gt; <strong>Integrations</strong> menu, or add an entry to <code>configuration.yaml</code>.</p>
<h3>Setup via the Integrations menu</h3>
<ol>
<li>In the <strong>Configuration</strong> &gt; <strong>Integrations</strong> menu, click <strong>+</strong> and then select <code>ecobee</code> from the pop-up menu.</li>
<li>In the pop-up box, enter the API key you obtained from ecobee.com.</li>
<li>In the next pop-up box, you will be presented with a unique four-character PIN code which you will need to authorize in the <a href="https://www.ecobee.com/consumerportal/index.html">ecobee consumer portal</a>. You can do this by logging in, selecting <strong>My Apps</strong> from the hamburger menu, clicking <strong>Add Application</strong> on the left, entering the PIN code from Home Assistant, and clicking <strong>Validate</strong> and then <strong>Add Application</strong> in the bottom right.</li>
<li>After authorizing the App on ecobee.com, return to Home Assistant and hit <strong>Submit</strong>. If the authorization was successful, a config entry will be created and your thermostats and sensors will be available in Home Assistant.</li>
</ol>
<h3>Setup via configuration.yaml</h3>
<p>If you prefer to initially set up this integration in <a href="/docs/configuration/"><code>configuration.yaml</code></a>, you may do so by adding your API key (and optional parameters) as follows (however, you must still complete authorization via the <strong>Integrations</strong> menu):</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
ecobee:
  api_key: YOUR_API_KEY
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='api_key' href='#api_key'></a> api_key</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Your ecobee API key. This is only needed for the initial setup of the integration. Once registered it can be removed. If you revoke the key in the ecobee portal, you will need to remove the existing <code>ecobee</code> configuration in the <strong>Integrations</strong> menu, update this, and then configure the integration again.</p>
</span></p></dd></dl>
</div>
<p class='img'>
  <img src='/images/screenshots/ecobee-sensor-badges.png' />
  <img src='/images/screenshots/ecobee-thermostat-card.png' />
</p>
<p><a href="/docs/configuration/#reloading-changes">Restart Home Assistant</a> for the changes to take effect. In the <strong>Configuration</strong> &gt; <strong>Integrations</strong> menu, hit <strong>Configure</strong> next to the discovered <code>ecobee</code> entry, and continue to authorize the App per the Integration menu instructions above.</p>
<p>The first time you (re)run Home Assistant with this integration it will give you a PIN code that you need to authorize in the <a href="https://www.ecobee.com/consumerportal/index.html">ecobee consumer portal</a>. You can do this by clicking <strong>Add Application</strong> in the <strong>My Apps</strong> section in the sidebar.</p>
<p>The PIN can be found in the Home Assistant portal on the Ecobee card or from the <strong>configurator.ecobee</strong> entity in the States developer tool.</p>
<ul>
<li>If you do not have an ecobee card, you may be using groups with <code>default_view</code> that don‚Äôt show the card. To get around this, you can temporarily comment out the <code>default_view</code> section or add the <code>configurator.ecobee</code> integration to your <code>default_view</code> and restart Home Assistant.</li>
</ul>
<p>Once you enter the PIN on the ecobee site, wait approximately 5 minutes, and then click on the <strong>I have authorized the app</strong> link at the bottom of the ecobee pop-up window. If everything worked correctly, you should now be able to restart Home Assistant again to see the full ecobee card with all of the sensors populated or see the list of sensors in the developer tools. Now you can re-enable your <code>default_view</code> (if you had to disable it) and add the ecobee sensors to a group and/or view.</p>
<h2>Notifications</h2>
<p>To get your ecobee notifications working with Home Assistant, you must first have the main ecobee integration loaded and running. Once you have that configured, you can set up this integration to send messages to your ecobee device.</p>
<p>To use this notification platform in your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
notify:
  - name: NOTIFIER_NAME
    platform: ecobee
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Setting the optional parameter <code>name</code> allows multiple notifiers to be created. The notifier will bind to the service <code>notify.NOTIFIER_NAME</code>.</p>
</span></p><p class='default'>
Default value: <p><code>notify</code></p>
</p></dd></dl>
</div>
<p>To use notifications, please see the <a href="/getting-started/automation/">getting started with automation page</a>.</p>
<h2>Thermostat</h2>
<h3>Concepts</h3>
<p>The ecobee thermostat supports the following key concepts.</p>
<p>The <em>target temperature</em> is the temperature that the device attempts
to achieve. The target temperature is either determined by the
currently active climate or it may be overridden by a hold. When the
thermostat is not in auto mode, there is a single target
temperature. When the thermostat is in auto HVAC mode, there is a
pair of target temperatures: the lower target temperature determines
the lowest desired temperature, while the higher target temperature
determines the highest desired temperature (the thermostat will switch
between heating and cooling to keep the temperature within these
limits).</p>
<p>A <em>climate</em> is a predefined or user-defined set of presets that the
thermostat aims to achieve. The ecobee thermostat provides three predefined
climates: Home, Away, and Sleep. Ecobee refers to these as <em>comfort settings</em>. The user can define additional climates.</p>
<p>A <em>preset</em> is an override of the target temperature defined in the
currently active climate. The temperature targeted in the preset mode may be
explicitly set (temperature preset), it may be derived from a reference
climate (home, away, sleep, etc.), or it may be derived from a vacation
defined by the thermostat. All holds are temporary. Temperature and
climate holds expire when the thermostat transitions to the next climate
defined in its program. A vacation hold starts at the beginning of the
defined vacation period and expires when the vacation period ends.</p>
<p>When in <em>away preset</em>, the target temperature is permanently overridden by
the target temperature defined for the away climate. The away preset is a
simple way to emulate a vacation mode.</p>
<p>The <em>HVAC mode</em> of the device is the currently active operational
modes that the ecobee thermostat provides: heat, auxHeatOnly, cool,
auto, and off.</p>
<h2>Attributes</h2>
<p>The ecobee climate entity has some extra attributes to represent the state of the thermostat.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fan</code></td>
<td>If the fan is currently on or off: <code>on</code> / <code>off</code>.</td>
</tr>
<tr>
<td><code>climate_mode</code></td>
<td>This is the climate mode that is active, or would be active if no override is active.</td>
</tr>
<tr>
<td><code>equipment_running</code></td>
<td>This is a comma-separated list of equipment that is currently running.</td>
</tr>
<tr>
<td><code>fan_min_on_time</code></td>
<td>The minimum amount of time (in minutes) that the fan will run per hour. This is determined by the minimum fan runtime setting which can be changed in the ecobee app or on the thermostat itself.</td>
</tr>
</tbody>
</table>
<h2>Services</h2>
<p>Besides the standard services provided by the Home Assistant <a href="/integrations/climate/">Climate</a> integration, the following extra services are provided by the ecobee integration:</p>
<ul>
<li><code>ecobee.create_vacation</code></li>
<li><code>ecobee.delete_vacation</code></li>
<li><code>ecobee.resume_program</code></li>
<li><code>ecobee.set_fan_min_on_time</code></li>
</ul>
<h3>Service <code>ecobee.create_vacation</code></h3>
<p>Creates a vacation on the selected ecobee thermostat.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>no</td>
<td>ecobee thermostat on which to create the vacation</td>
</tr>
<tr>
<td><code>vacation_name</code></td>
<td>no</td>
<td>Name of the vacation to create. Must be unique on the thermostat</td>
</tr>
<tr>
<td><code>cool_temp</code></td>
<td>no</td>
<td>Cooling temperature during the vacation</td>
</tr>
<tr>
<td><code>heat_temp</code></td>
<td>no</td>
<td>Heating temperature during the vacation</td>
</tr>
<tr>
<td><code>start_date</code></td>
<td>yes</td>
<td>Date the vacation starts in YYYY-MM-DD format</td>
</tr>
<tr>
<td><code>start_time</code></td>
<td>yes</td>
<td>Time the vacation starts in the local time zone. Must be in 24-hour format (HH:MM:SS)</td>
</tr>
<tr>
<td><code>end_date</code></td>
<td>yes</td>
<td>Date the vacation ends in YYYY-MM-DD format (14 days from now if not provided)</td>
</tr>
<tr>
<td><code>end_time</code></td>
<td>yes</td>
<td>Time the vacation ends in the local time zone. Must be in 24-hour format (HH:MM:SS)</td>
</tr>
<tr>
<td><code>fan_mode</code></td>
<td>yes</td>
<td>Fan mode of the thermostat during the vacation (auto or on) (auto if not provided)</td>
</tr>
<tr>
<td><code>fan_min_on_time</code></td>
<td>yes</td>
<td>Minimum number of minutes to run the fan each hour (0 to 60) during the vacation (0 if not provided)</td>
</tr>
</tbody>
</table>
<h3>Service <code>ecobee.delete_vacation</code></h3>
<p>Delete a vacation on the selected ecobee thermostat.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>no</td>
<td>ecobee thermostat on which to delete the vacation</td>
</tr>
<tr>
<td><code>vacation_name</code></td>
<td>no</td>
<td>Name of the vacation to delete</td>
</tr>
</tbody>
</table>
<h3>Service <code>ecobee.resume_program</code></h3>
<p>Resumes the currently active schedule.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>yes</td>
<td>String or list of strings that point at <code>entity_id</code>‚Äôs of climate devices to control. Else targets all.</td>
</tr>
<tr>
<td><code>resume_all</code></td>
<td>no</td>
<td>true or false</td>
</tr>
</tbody>
</table>
<h3>Service <code>ecobee.set_fan_min_on_time</code></h3>
<p>Sets the minimum amount of time that the fan will run per hour.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>yes</td>
<td>String or list of strings that point at <code>entity_id</code>‚Äôs of climate devices to control. Else targets all.</td>
</tr>
<tr>
<td><code>fan_min_on_time</code></td>
<td>no</td>
<td>integer (e.g. 5)</td>
</tr>
</tbody>
</table>
:ET