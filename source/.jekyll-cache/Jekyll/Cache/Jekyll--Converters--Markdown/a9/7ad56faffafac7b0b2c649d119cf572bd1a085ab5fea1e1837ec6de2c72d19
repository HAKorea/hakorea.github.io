I"π<p>The <code>luftdaten</code> integration will query the open data API of <a href="https://luftdaten.info/">luftdaten.info</a> to monitor air quality and other weather data from a specific (self build) sensor station.</p>
<h2>Setup</h2>
<ul>
<li>To get the ID of a particle sensor you need to select it on the <a href="https://deutschland.maps.luftdaten.info/">Feinstaub map</a> and find it in the sidebar (Column ‚ÄúSensor ID‚Äù).</li>
<li>To get the ID of a temperature/humidity sensor you need to find it on the map hosted on <a href="https://www.madavi.de/sensor/feinstaub-map-dht/">Madavi</a>.</li>
</ul>
<h2>Configuration via the frontend</h2>
<p>Menu: <strong>Configuration</strong> -&gt; <strong>Integrations</strong></p>
<p>Configure the integration:</p>
<ul>
<li>Enter the <strong>Sensor ID</strong></li>
<li>Choose if you want to show the sensor‚Äôs location on the map.</li>
</ul>
<h2>Manual Configuration</h2>
<p>To enable this sensor, add the following lines to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
luftdaten:
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='sensor_id' href='#sensor_id'></a> sensor_id</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The ID of the sensor.</p>
</span></p></dd><dt><a class='title-link' name='show_on_map' href='#show_on_map'></a> show_on_map</dt><dd><p class='desc'><span class='type'>(<span class='boolean'>boolean</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Option to show the position of the sensor on the map.</p>
</span></p><p class='default'>
Default value: <p>false</p>
</p></dd><dt><a class='title-link' name='scan_interval' href='#scan_interval'></a> scan_interval</dt><dd><p class='desc'><span class='type'>(<span class='integer'>integer</span>)</span><span class='required'>(Optional)</span><span class='description'><p>the frequency (in seconds) between data updates.</p>
</span></p><p class='default'>
Default value: <p>1800</p>
</p></dd><dt><a class='title-link' name='sensors' href='#sensors'></a> sensors</dt><dd><p class='desc'><span class='type'>(<span class='map'>map</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The sensor-related configuration options.</p>
</span></p></dd><dd><dl class='nested'><dt><a class='title-link' name='monitored_conditions' href='#monitored_conditions'></a> monitored_conditions</dt><dd><p class='desc'><span class='type'>(<span class='list'>list</span>)</span><span class='required'>(Required)</span><span class='description'><p>A list of conditions you want to monitor.</p>
</span></p></dd><dd><dl class='nested'><dt><a class='title-link' name='p1' href='#p1'></a> P1</dt><dd><p class='desc'><span class='description'><p>Show the particle sensors (particles 10 microns and below).</p>
</span></p></dd><dt><a class='title-link' name='p2' href='#p2'></a> P2</dt><dd><p class='desc'><span class='description'><p>Show the particle sensors (particles 2.5 microns and below).</p>
</span></p></dd><dt><a class='title-link' name='temperature' href='#temperature'></a> temperature</dt><dd><p class='desc'><span class='description'><p>Display the temperature from the sensor.</p>
</span></p></dd><dt><a class='title-link' name='humidity' href='#humidity'></a> humidity</dt><dd><p class='desc'><span class='description'><p>Display the humidity from the sensor.</p>
</span></p></dd><dt><a class='title-link' name='pressure' href='#pressure'></a> pressure</dt><dd><p class='desc'><span class='description'><p>Display the pressure from the sensor.</p>
</span></p></dd></dl></dd></dl></dd></dl>
</div>
<div class='note warning'>
<p>If you set <code>show_on_map</code> to <code>true</code> then the location attributes are named <code>latitude</code> and <code>longitude</code>. The default name of the location attributes is <code>lat</code> and <code>long</code> to avoid showing them on the map.</p>
</div>
<p>Not all sensors provide all conditions. Also, it‚Äôs possible that the sensor values are not available all the time. To check what a sensor is publishing use <code>curl</code>:</p>
<pre><code class="language-bash">$ curl https://api.luftdaten.info/v1/sensor/[sensorid]/
</code></pre>
<h2>Full example</h2>
<p>This example would use the sensor with the ID 155, show it on the <code>map</code> and would monitor <code>temperature</code> and <code>humidity</code>.</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
luftdaten:
  sensor_id: 155
  show_on_map: true
  sensors:
    monitored_conditions:
      - temperature
      - humidity
</code></pre>
<h2>Sensor</h2>
<p>The <code>luftdaten</code> sensor platform will query the open data API of <a href="https://luftdaten.info/">luftdaten.info</a> to monitor air quality and other weather data from a specific (self build) sensor station.</p>
<p>You must have the <code>luftdaten</code> integration (from above) configured to use this platform. After configuring that component, sensors will automatically appear.</p>
:ET