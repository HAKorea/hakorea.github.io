I"e<p>A sensor platform for the <a href="https://enphase.com/en-us/products-and-services/envoy-and-combiner">Enphase Envoy</a> solar energy gateway. Works with older models that only have production metrics (ie. Envoy-C) and newer models that offer both production and consumption metrics (ie. Envoy-S).</p>
<h2>Configuration</h2>
<p>To enable this sensor, add the following lines to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
sensor:
  - platform: enphase_envoy
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>An optional name that will be prepended to the sensor type</p>
</span></p></dd><dt><a class='title-link' name='ip_address' href='#ip_address'></a> ip_address</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The local IP address of your Envoy. Leave blank to use the default host name ‘envoy’, but this may not always be reliable. You should be able to just browse to this IP address.</p>
</span></p></dd><dt><a class='title-link' name='username' href='#username'></a> username</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Access more information beyond the basics, such as Inverter data.  Some Envoy devices do not use the standard username which is used by the API.  This lets the user use a different username than the default of ‘envoy’.</p>
</span></p></dd><dt><a class='title-link' name='password' href='#password'></a> password</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Password to be used with the username configuration variable.</p>
</span></p></dd><dt><a class='title-link' name='monitored_conditions' href='#monitored_conditions'></a> monitored_conditions</dt><dd><p class='desc'><span class='type'>(<span class='list'>list</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The list of conditions to monitor. If you have an Envoy that doesn’t support consumption metrics (ie. Envoy-C), it’s best only configure the production metrics.</p>
</span></p></dd><dd><dl class='nested'><dt><a class='title-link' name='production' href='#production'></a> production</dt><dd><p class='desc'><span class='description'><p>The power in W being produced by the solar panels.</p>
</span></p></dd><dt><a class='title-link' name='daily_production' href='#daily_production'></a> daily_production</dt><dd><p class='desc'><span class='description'><p>The energy in Wh produced that day.</p>
</span></p></dd><dt><a class='title-link' name='seven_days_production' href='#seven_days_production'></a> seven_days_production</dt><dd><p class='desc'><span class='description'><p>The energy in Wh produced the last 7 days.</p>
</span></p></dd><dt><a class='title-link' name='lifetime_production' href='#lifetime_production'></a> lifetime_production</dt><dd><p class='desc'><span class='description'><p>The energy in Wh produced in the lifetime of the Envoy.</p>
</span></p></dd><dt><a class='title-link' name='consumption' href='#consumption'></a> consumption</dt><dd><p class='desc'><span class='description'><p>The power in W being consumed in the whole house.</p>
</span></p></dd><dt><a class='title-link' name='daily_consumption' href='#daily_consumption'></a> daily_consumption</dt><dd><p class='desc'><span class='description'><p>The energy in Wh consumed that day.</p>
</span></p></dd><dt><a class='title-link' name='seven_days_consumption' href='#seven_days_consumption'></a> seven_days_consumption</dt><dd><p class='desc'><span class='description'><p>The energy in Wh consumed the last 7 days.</p>
</span></p></dd><dt><a class='title-link' name='lifetime_consumption' href='#lifetime_consumption'></a> lifetime_consumption</dt><dd><p class='desc'><span class='description'><p>The energy in Wh consumed in the lifetime of the Envoy.</p>
</span></p></dd><dt><a class='title-link' name='inverters' href='#inverters'></a> inverters</dt><dd><p class='desc'><span class='description'><p>The power in W being produced by each micro-inverter. This will create a separate sensor for each micro-inverter you have installed. These sensors will only update about every 15 minutes, this is a limitation of the Enphase Envoy API.</p>
</span></p></dd></dl></dd></dl>
</div>
<h3>Full example</h3>
<pre><code class="language-yaml"># Example configuration.yaml entry, limiting the metrics to production only
sensor:
  - platform: enphase_envoy
    name: Optional_name
    ip_address: LOCAL_IP_FOR_ENVOY
    monitored_conditions:
      - production
      - daily_production
      - seven_days_production
      - lifetime_production
</code></pre>
:ET