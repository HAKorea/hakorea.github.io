I"6<p><em>This is one of multiple ways we support OpenWRT. For an overview, see <a href="/integrations/openwrt/">openwrt</a>.</em></p>
<p>This is a presence detection scanner for OpenWRT using <a href="https://openwrt.org/docs/techref/luci">luci</a>.</p>
<p>Before this scanner can be used you have to install the luci RPC package on OpenWRT:</p>
<pre><code class="language-bash"># opkg install luci-mod-rpc
</code></pre>
<p>To use this device tracker in your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
device_tracker:
  - platform: luci
    host: ROUTER_IP_ADDRESS
    username: YOUR_ADMIN_USERNAME
    password: YOUR_ADMIN_PASSWORD
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='host' href='#host'></a> host</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The hostname or IP address of your router, e.g., <code>192.168.1.1</code>.</p>
</span></p></dd><dt><a class='title-link' name='username' href='#username'></a> username</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The username of an user with administrative privileges, usually <code>admin</code>.</p>
</span></p></dd><dt><a class='title-link' name='password' href='#password'></a> password</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The password for your given admin account.</p>
</span></p></dd><dt><a class='title-link' name='ssl' href='#ssl'></a> ssl</dt><dd><p class='desc'><span class='type'>(<span class='boolean'>boolean</span>)</span><span class='required'>(Optional)</span><span class='description'><p>If your router enforces SSL connections, set to <code>true</code>.</p>
</span></p><p class='default'>
Default value: <p>false</p>
</p></dd><dt><a class='title-link' name='verify_ssl' href='#verify_ssl'></a> verify_ssl</dt><dd><p class='desc'><span class='type'>(<span class='boolean'>boolean</span>)</span><span class='required'>(Optional)</span><span class='description'><p>If SSL/TLS verification for HTTPS resources needs to be turned off (for self-signed certs, etc.)</p>
</span></p><p class='default'>
Default value: <p>true</p>
</p></dd></dl>
</div>
<p>See the <a href="/integrations/device_tracker/">device tracker integration page</a> for instructions how to configure the people to be tracked.</p>
<p>This device tracker provides a number of additional attributes for each tracked device (if it is at home): <code>flags</code>, <code>ip</code>, <code>device</code>, and <code>host</code>. The first three attributes are taken from the ARP table returned by the luci RPC. The <code>host</code> attribute is taken from the platform configuration and can be used to distinguish in which router a device is logged in, if you are using multiple OpenWRT routers.</p>
<div class='note warning'>
<p>Some installations have <a href="https://github.com/openwrt/luci/issues/576">a small bug</a>. The timeout for luci RPC calls is not set and this makes the call fail.
If you want to locally fix your OpenWRT installation, you can apply the change manually to <code>/usr/lib/lua/luci/controller/rpc.lua</code>, or simply set a fixed timeout. The default is 3600.</p>
</div>
:ET