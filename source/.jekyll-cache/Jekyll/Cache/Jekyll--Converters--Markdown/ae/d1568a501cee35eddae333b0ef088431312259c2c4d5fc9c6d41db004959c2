I"Û	<p>This is a FortiGate presence sensor based on device detection of the FortiGate API</p>
<h2>FortiGate set up</h2>
<p>Configure the FortiGate with a USERNAME API user and assign its minimum rights profile:</p>
<pre><code class="language-text">config system accprofile
    edit &quot;homeassistant_profile&quot;
        set authgrp read
    next
end

config system api-user
    edit &quot;USERNAME&quot;
        set api-key API_KEY
        set accprofile &quot;homeassistant_profile&quot;
        set vdom &quot;root&quot;
        config trusthost
            edit 1
                set ipv4-trusthost &lt;trusted subnets&gt;
            next
        end
    next
end
</code></pre>
<h2>Configuration</h2>
<p>Add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
fortigate:
  host: HOST_IP
  username: YOUR_USERNAME
  api_key: YOUR_API_KEY
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='host' href='#host'></a> host</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The IP address of the FortiGate device.</p>
</span></p></dd><dt><a class='title-link' name='username' href='#username'></a> username</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The username of the user that will connect to the FortiGate device.</p>
</span></p></dd><dt><a class='title-link' name='api_key' href='#api_key'></a> api_key</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The API key associated with the user.</p>
</span></p></dd><dt><a class='title-link' name='devices' href='#devices'></a> devices</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The MAC addresses of the devices to monitor.</p>
</span></p></dd></dl>
</div>
<h2>Errors</h2>
<p>If the rights of the profile are not sufficient, you will get the following error:</p>
<pre><code class="language-txt">ERROR (MainThread) [homeassistant.core] Error doing job: Task exception was never retrieved
</code></pre>
:ET