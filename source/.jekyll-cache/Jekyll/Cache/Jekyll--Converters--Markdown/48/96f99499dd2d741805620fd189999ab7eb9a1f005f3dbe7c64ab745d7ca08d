I"j<p>Various integrations allow calling services when a certain event occurs. The most common one is calling a service when an automation trigger happens. But a service can also be called from a script or via the Amazon Echo.</p>
<p>The configuration options to call a config are the same between all integrations and are described on this page.</p>
<p>Examples on this page will be given as part of an automation integration configuration but different approaches can be used for other integrations too.</p>
<div class='note'>
Use the "Services" tab under Developer Tools to discover available services.
</div>
<h3>The basics</h3>
<p>Call the service <code>homeassistant.turn_on</code> on the entity <code>group.living_room</code>. This will turn all members of <code>group.living_room</code> on. You can also use <code>entity_id: all</code> and it will turn on all possible entities.</p>
<pre><code class="language-yaml">service: homeassistant.turn_on
entity_id: group.living_room
</code></pre>
<h3>Passing data to the service call</h3>
<p>You can also specify other parameters beside the entity to target. For example, the light turn on service allows specifying the brightness.</p>
<pre><code class="language-yaml">service: light.turn_on
entity_id: group.living_room
data:
  brightness: 120
  rgb_color: [255, 0, 0]
</code></pre>
<p>A full list of the parameters for a service can be found on the documentation page of each component, in the same way as it’s done for the <code>light.turn_on</code> <a href="/integrations/light/#service-lightturn_on">service</a>.</p>
<h3>Use templates to decide which service to call</h3>
<p>You can use <a href="/topics/templating/">templating</a> support to dynamically choose which service to call. For example, you can call a certain service based on if a light is on.</p>
<pre><code class="language-yaml">service_template: &gt;
  {% if states('sensor.temperature') | float &gt; 15 %}
    switch.turn_on
  {% else %}
    switch.turn_off
  {% endif %}
entity_id: switch.ac
</code></pre>
<h3>Using the Services Developer Tool</h3>
<p>You can use the Services Developer Tool to test data to pass in a service call.
For example, you may test turning on or off a ‘group’ (See [groups] for more info)</p>
<p>To turn a group on or off, pass the following info:</p>
<ul>
<li>Domain: <code>homeassistant</code></li>
<li>Service: <code>turn_on</code></li>
<li>Service Data: <code>{ &quot;entity_id&quot;: &quot;group.kitchen&quot; }</code></li>
</ul>
<h3>Use templates to determine the attributes</h3>
<p>Templates can also be used for the data that you pass to the service call.</p>
<pre><code class="language-yaml">service: thermostat.set_temperature
data_template:
  entity_id: &gt;
    {% if is_state('device_tracker.paulus', 'home') %}
      thermostat.upstairs
    {% else %}
      thermostat.downstairs
    {% endif %}
  temperature: {{ 22 - distance(states.device_tracker.paulus) }}
</code></pre>
<p>It is even possible to use <code>data</code> and <code>data_template</code> concurrently but be aware that <code>data_template</code> will overwrite attributes that are provided in both.</p>
<pre><code class="language-yaml">service: thermostat.set_temperature
data:
  entity_id: thermostat.upstairs
data_template:
  temperature: {{ 22 - distance(states.device_tracker.paulus) }}
</code></pre>
<h3><code>homeassistant</code> services</h3>
<p>There are four <code>homeassistant</code> services that aren’t tied to any single domain, these are:</p>
<ul>
<li><code>homeassistant.turn_on</code> - Turns on an entity (that supports being turned on), for example an <code>automation</code>, <code>switch</code>, etc</li>
<li><code>homeassistant.turn_off</code> - Turns off an entity (that supports being turned off), for example an <code>automation</code>, <code>switch</code>, etc</li>
<li><code>homeassistant.toggle</code> - Turns off an entity that is on, or turns on an entity that is off (that supports being turned on and off)</li>
<li><code>homeassistant.update_entity</code> - Request the update of an entity, rather than waiting for the next scheduled update, for example <a href="/integrations/google_travel_time/">google travel time</a> sensor, a <a href="/integrations/template/">template sensor</a>, or a <a href="/integrations/light/">light</a></li>
</ul>
<p>Complete service details and examples can be found on the <a href="/integrations/homeassistant#services">Home Assistant integration</a> page.</p>
:ET