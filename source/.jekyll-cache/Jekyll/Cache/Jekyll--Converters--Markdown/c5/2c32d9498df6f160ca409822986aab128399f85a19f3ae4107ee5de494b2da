I"¨V<p>A lot of WiFi access points and WiFi routers support the Simple Network Management Protocol (SNMP). This is a standardized method for monitoring/manageing network connected devices. SNMP uses a tree-like hierarchy where each node is an object. Many of these objects contain (live) lists of instances and metrics, like network interfaces, disks and WiFi registrations.</p>
<p>There is currently support for the following device types within Home Assistant:</p>
<ul>
<li><a href="#precense-detection">Presence Detection</a></li>
<li><a href="#sensor">Sensor</a></li>
<li><a href="#switch">Switch</a></li>
</ul>
<div class='note warning'>
This device tracker needs SNMP to be enabled on the router. It could be that you need to install the SNMP support manually.
</div>
<h2>Presence Detection</h2>
<p>The following OID examples pull the current MAC Address table from a router. This reflects all recent devices seen on the network. However, since devices are not removed until they time out, this is less effective for <a href="/integrations/device_tracker/">device tracker integration page</a> than desirable. It is recommended to use <a href="/integrations/ping">Ping</a> or <a href="/integrations/nmap_tracker">Nmap</a> instead.</p>
<table>
<thead>
<tr>
<th>Brand</th>
<th>Device/Firmware</th>
<th>OID</th>
</tr>
</thead>
<tbody>
<tr>
<td>Aerohive</td>
<td>AP230</td>
<td><code>1.3.6.1.4.1.26928.1.1.1.2.1.2.1.1</code></td>
</tr>
<tr>
<td>Apple</td>
<td>Airport Express (2nd gen.) 7.6.9</td>
<td><code>1.3.6.1.2.1.3.1.1.2</code> or <code>1.3.6.1.2.1.4.22.1.2</code></td>
</tr>
<tr>
<td>Aruba</td>
<td>IAP325 on AOS 6.5.4.8</td>
<td><code>1.3.6.1.4.1.14823.2.3.3.1.2.4.1.1</code></td>
</tr>
<tr>
<td>BiPAC</td>
<td>7800DXL Firmware 2.32e</td>
<td><code>1.3.6.1.2.1.17.7.1.2.2.1.1</code></td>
</tr>
<tr>
<td>DD-WRT</td>
<td>unknown version/model</td>
<td><code>1.3.6.1.2.1.4.22.1.2</code></td>
</tr>
<tr>
<td>Mikrotik</td>
<td>unknown RouterOS version/model</td>
<td><code>1.3.6.1.4.1.14988.1.1.1.2.1.1</code></td>
</tr>
<tr>
<td>Mikrotik</td>
<td>RouterOS 6.x on RB2011</td>
<td><code>1.3.6.1.2.1.4.22.1.2</code></td>
</tr>
<tr>
<td>OpenWrt</td>
<td>Chaos Calmer 15.05</td>
<td><code>1.3.6.1.2.1.4.22.1.2</code></td>
</tr>
<tr>
<td>OPNSense</td>
<td>19.1</td>
<td><code>1.3.6.1.2.1.4.22.1.2</code></td>
</tr>
<tr>
<td>pfSense</td>
<td>2.2.4</td>
<td><code>1.3.6.1.2.1.4.22.1.2</code></td>
</tr>
<tr>
<td>Ruckus</td>
<td>ZoneDirector 9.13.3</td>
<td><code>1.3.6.1.4.1.25053.1.2.2.1.1.3.1.1.1.6</code></td>
</tr>
<tr>
<td>TP-Link</td>
<td>Archer VR1600v</td>
<td><code>1.3.6.1.2.1.3.1.1.2.16.1</code></td>
</tr>
<tr>
<td>TP-Link</td>
<td>Archer VR2600v</td>
<td><code>1.3.6.1.2.1.3.1.1.2.19.1</code></td>
</tr>
<tr>
<td>TP-Link</td>
<td>Archer VR600</td>
<td><code>1.3.6.1.2.1.3.1.1.2</code></td>
</tr>
<tr>
<td>Ubiquiti</td>
<td>Edgerouter Lite v1.9.0</td>
<td><code>1.3.6.1.2.1.4.22.1.2</code></td>
</tr>
</tbody>
</table>
<p>To use the SNMP version 1 or 2c platform in your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry for SNMP version 1 or 2c
device_tracker:
  - platform: snmp
    host: 192.168.1.1
    community: public
    baseoid: 1.3.6.1.4.1.14988.1.1.1.2.1.1
</code></pre>
<p>If you want to use encryption, you must enable SNMP version 3 by adding <code>auth_key</code> and <code>priv_key</code> variables and enabling SNMP version 3 on your router. Currently only SHA1 is supported for authentication and AES for encryption. Example of SNMPv3 configuration:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry for SNMP version 3
device_tracker:
  - platform: snmp
    host: 192.168.1.1
    community: USERNAME
    auth_key: AUTHPASS
    priv_key: PRIVPASS
    baseoid: 1.3.6.1.4.1.14988.1.1.1.2.1.1
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='host' href='#host'></a> host</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The IP address of the router, e.g., 192.168.1.1.</p>
</span></p></dd><dt><a class='title-link' name='community' href='#community'></a> community</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The SNMP community which is set for the device. Most devices have a default community set to <code>public</code> with read-only permission (which is sufficient).</p>
</span></p></dd><dt><a class='title-link' name='baseoid' href='#baseoid'></a> baseoid</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The OID prefix where wireless client registrations can be found, usually vendor specific. Itâ€™s advised to use the numerical notation. To find this base OID, check vendor documentation or check the MIB file for your device.</p>
</span></p></dd><dt><a class='title-link' name='auth_key' href='#auth_key'></a> auth_key</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Inclusive)</span><span class='description'><p>Authentication key for SNMPv3. Variable <code>priv_key</code> must also be set.</p>
</span></p></dd><dt><a class='title-link' name='priv_key' href='#priv_key'></a> priv_key</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Inclusive)</span><span class='description'><p>Privacy key SNMPv3. Variable <code>auth_key</code> must also be set.</p>
</span></p></dd></dl>
</div>
<p>See the <a href="/integrations/device_tracker/">device tracker integration page</a> for instructions how to configure the people to be tracked.</p>
<h2>Sensor</h2>
<p>The <code>snmp</code> sensor platform displays information available through the <a href="https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol">Simple Network Management Protocol (SNMP)</a>. SNMP uses a tree-like hierarchy where each node is an object, and is mainly supported by network-oriented devices such as routers, modems and printers.</p>
<p>To enable this sensor in your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
sensor:
  - platform: snmp
    host: 192.168.1.32
    baseoid: 1.3.6.1.4.1.2021.10.1.3.1
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='host' href='#host'></a> host</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The IP address of your host, e.g., <code>192.168.1.32</code>.</p>
</span></p><p class='default'>
Default value: <p>localhost</p>
</p></dd><dt><a class='title-link' name='baseoid' href='#baseoid'></a> baseoid</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The OID where the information is located. Itâ€™s advised to use the numerical notation.</p>
</span></p></dd><dt><a class='title-link' name='port' href='#port'></a> port</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The SNMP port of your host.</p>
</span></p><p class='default'>
Default value: <p>161</p>
</p></dd><dt><a class='title-link' name='community' href='#community'></a> community</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The SNMP community which is set for the device for SNMP v1 and v2c. Most devices have a default community set to <code>public</code> with read-only permission (which is sufficient).</p>
</span></p><p class='default'>
Default value: <p>public</p>
</p></dd><dt><a class='title-link' name='username' href='#username'></a> username</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Username to use for authentication.</p>
</span></p></dd><dt><a class='title-link' name='auth_key' href='#auth_key'></a> auth_key</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Authentication key to use for SNMP v3.</p>
</span></p><p class='default'>
Default value: <p>no key</p>
</p></dd><dt><a class='title-link' name='auth_protocol' href='#auth_protocol'></a> auth_protocol</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Authentication protocol to use for SNMP v3.</p>
</span></p><p class='default'>
Default value: <p>none</p>
</p></dd><dt><a class='title-link' name='priv_key' href='#priv_key'></a> priv_key</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Privacy key to use for SNMP v3.</p>
</span></p><p class='default'>
Default value: <p>no key</p>
</p></dd><dt><a class='title-link' name='priv_protocol' href='#priv_protocol'></a> priv_protocol</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Privacy protocol to use for SNMP v3.</p>
</span></p><p class='default'>
Default value: <p>none</p>
</p></dd><dt><a class='title-link' name='version' href='#version'></a> version</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Version of SNMP protocol, <code>1</code>, <code>2c</code> or <code>3</code>. Version <code>2c</code> or higher is needed to read data from 64-bit counters.</p>
</span></p><p class='default'>
Default value: <p>1</p>
</p></dd><dt><a class='title-link' name='name' href='#name'></a> name</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Name of the SNMP sensor.</p>
</span></p></dd><dt><a class='title-link' name='unit_of_measurement' href='#unit_of_measurement'></a> unit_of_measurement</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Defines the unit of measurement of the sensor, if any.</p>
</span></p></dd><dt><a class='title-link' name='value_template' href='#value_template'></a> value_template</dt><dd><p class='desc'><span class='type'>(<span class='template'><a href="/docs/configuration/templating/">template</a></span>)</span><span class='required'>(Optional)</span><span class='description'><p>Defines a <a href="/docs/configuration/templating/#processing-incoming-data">template</a> to parse the value.</p>
</span></p></dd><dt><a class='title-link' name='accept_errors' href='#accept_errors'></a> accept_errors</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Determines whether the sensor should start and keep working even if the SNMP host is unreachable or not responding. This allows the sensor to be initialized properly even if, for example, your printer is not on when you start Home Assistant.</p>
</span></p><p class='default'>
Default value: <p>false</p>
</p></dd><dt><a class='title-link' name='default_value' href='#default_value'></a> default_value</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Determines what value the sensor should take if <code>accept_errors</code> is set and the host is unreachable or not responding. If not set, the sensor will have value <code>unknown</code> in case of errors.</p>
</span></p></dd></dl>
</div>
<p>Valid values for <code>auth_protocol</code>:</p>
<ul>
<li><strong>none</strong></li>
<li><strong>hmac-md5</strong></li>
<li><strong>hmac-sha</strong></li>
<li><strong>hmac128-sha224</strong></li>
<li><strong>hmac192-sha256</strong></li>
<li><strong>hmac256-sha384</strong></li>
<li><strong>hmac384-sha512</strong></li>
</ul>
<p>Valid values for <code>priv_protocol</code>:</p>
<ul>
<li><strong>none</strong></li>
<li><strong>des</strong></li>
<li><strong>3des-ede</strong></li>
<li><strong>aes-cfb-128</strong></li>
<li><strong>aes-cfb-192</strong></li>
<li><strong>aes-cfb-256</strong></li>
</ul>
<h3>Finding OIDs</h3>
<p>OIDs may vary on different systems because they are vendor-specific. Besides the deviceâ€™s manual, the <a href="http://www.oid-info.com/">OID Repository</a> is a good place to start if you are looking for OIDs. As an example, the following OIDs are for the load of a Linux system.</p>
<ul>
<li>1 minute Load: <code>1.3.6.1.4.1.2021.10.1.3.1</code></li>
<li>5 minute Load: <code>1.3.6.1.4.1.2021.10.1.3.2</code></li>
<li>15 minute Load: <code>1.3.6.1.4.1.2021.10.1.3.3</code></li>
</ul>
<p>There is a large amount of tools available to work with SNMP. <code>snmpwalk</code> let you easily retrieve the value of an OID.</p>
<pre><code class="language-bash">$ snmpwalk -Os -c public -v 2c 192.168.1.32 1.3.6.1.4.1.2021.10.1.3.1
laLoad.1 = STRING: 0.19
</code></pre>
<h3>Examples</h3>
<h4>Printer uptime minutes</h4>
<p>According to the most common SNMP standard, the uptime of a device is accessible under OID <code>1.3.6.1.2.1.1.3.0</code>. The value represented using a format called <code>TimeTicks</code>, in units of hundredths of a second.</p>
<p>To create a sensor that displays the uptime for your printer in minutes, you can use this configuration:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
sensor:
  - platform: snmp
    name: 'Printer uptime'
    host: 192.168.2.21
    baseoid: 1.3.6.1.2.1.1.3.0
    accept_errors: true
    unit_of_measurement: 'minutes'
    value_template: '{{((value | int) / 6000) | int}}'
</code></pre>
<p>The <code>accept_errors</code> option will allow the sensor to work even if the printer is not on when Home Assistant is first started: the sensor will just display a <code>-</code> instead of a minute count.</p>
<p>The <code>value_template</code> option converts the original value to minutes.</p>
<h2>Switch</h2>
<p>The <code>snmp</code> switch platform allows you to control SNMP-enabled equipment.</p>
<p>Currently, only SNMP OIDs that accept integer values are supported. SNMP v1, v2c and v3 are supported.</p>
<p>To use an SNMP switch in your installation:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry:
switch:
  - platform: snmp
    host: 192.168.0.2
    baseoid: 1.3.6.1.4.1.19865.1.2.1.4.0
</code></pre>
<div class="config-vars">
  <h3><a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class=''><dt><a class='title-link' name='baseoid' href='#baseoid'></a> baseoid</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Required)</span><span class='description'><p>The SNMP BaseOID which to poll for the state of the switch.</p>
</span></p></dd><dt><a class='title-link' name='command_oid' href='#command_oid'></a> command_oid</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The SNMP OID which to set in order to turn the switch on and off, if different from <code>baseoid</code>.</p>
</span></p></dd><dt><a class='title-link' name='host' href='#host'></a> host</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The IP/host which to control.</p>
</span></p><p class='default'>
Default value: <p>localhost</p>
</p></dd><dt><a class='title-link' name='port' href='#port'></a> port</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The port on which to communicate.</p>
</span></p><p class='default'>
Default value: <p>161</p>
</p></dd><dt><a class='title-link' name='community' href='#community'></a> community</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>community string to use for authentication (SNMP v1 and v2c).</p>
</span></p><p class='default'>
Default value: <p>private</p>
</p></dd><dt><a class='title-link' name='username' href='#username'></a> username</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Username to use for authentication.</p>
</span></p></dd><dt><a class='title-link' name='auth_key' href='#auth_key'></a> auth_key</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Authentication key to use for SNMP v3.</p>
</span></p><p class='default'>
Default value: <p>no key</p>
</p></dd><dt><a class='title-link' name='auth_protocol' href='#auth_protocol'></a> auth_protocol</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Authentication protocol to use for SNMP v3.</p>
</span></p><p class='default'>
Default value: <p>none</p>
</p></dd><dt><a class='title-link' name='priv_key' href='#priv_key'></a> priv_key</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Privacy key to use for SNMP v3.</p>
</span></p><p class='default'>
Default value: <p>no key</p>
</p></dd><dt><a class='title-link' name='priv_protocol' href='#priv_protocol'></a> priv_protocol</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>Privacy protocol to use for SNMP v3.</p>
</span></p><p class='default'>
Default value: <p>none</p>
</p></dd><dt><a class='title-link' name='version' href='#version'></a> version</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>SNMP version to use - either <code>1</code>, <code>2c</code> or <code>3</code>.</p>
</span></p><p class='default'>
Default value: <p>1</p>
</p></dd><dt><a class='title-link' name='payload_on' href='#payload_on'></a> payload_on</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>What return value represents an <code>On</code> state for the switch. The same value is used in writes to turn on the switch if <code>command_payload_on</code> is not set.</p>
</span></p><p class='default'>
Default value: <p>1</p>
</p></dd><dt><a class='title-link' name='payload_off' href='#payload_off'></a> payload_off</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>What return value represents an <code>Off</code> state for the switch. The same value is used in writes to turn off the switch if <code>command_payload_off</code> is not set.</p>
</span></p><p class='default'>
Default value: <p>0</p>
</p></dd><dt><a class='title-link' name='command_payload_on' href='#command_payload_on'></a> command_payload_on</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The value to write to turn on the switch, if different from <code>payload_on</code>.</p>
</span></p></dd><dt><a class='title-link' name='command_payload_off' href='#command_payload_off'></a> command_payload_off</dt><dd><p class='desc'><span class='type'>(<span class='string'>string</span>)</span><span class='required'>(Optional)</span><span class='description'><p>The value to write to turn off the switch, if different from <code>payload_off</code>.</p>
</span></p></dd></dl>
</div>
<p>You should check with your deviceâ€™s vendor to find out the correct BaseOID and what values turn the switch on and off.</p>
<p>Valid values for <code>auth_protocol</code>:</p>
<ul>
<li><strong>none</strong></li>
<li><strong>hmac-md5</strong></li>
<li><strong>hmac-sha</strong></li>
<li><strong>hmac128-sha224</strong></li>
<li><strong>hmac192-sha256</strong></li>
<li><strong>hmac256-sha384</strong></li>
<li><strong>hmac384-sha512</strong></li>
</ul>
<p>Valid values for <code>priv_protocol</code>:</p>
<ul>
<li><strong>none</strong></li>
<li><strong>des</strong></li>
<li><strong>3des-ede</strong></li>
<li><strong>aes-cfb-128</strong></li>
<li><strong>aes-cfb-192</strong></li>
<li><strong>aes-cfb-256</strong></li>
</ul>
<p>Complete examples:</p>
<pre><code class="language-yaml">switch:
  - platform: snmp
    name: SNMP v1 switch
    host: 192.168.0.2
    community: private
    baseoid: 1.3.6.1.4.1.19865.1.2.1.4.0
    payload_on: 1
    payload_off: 0

  - platform: snmp
    name: SNMP v3 switch
    host: 192.168.0.3
    version: '3'
    username: 'myusername'
    auth_key: 'myauthkey'
    auth_protocol: 'hmac-sha'
    priv_key: 'myprivkey'
    priv_protocol: 'aes-cfb-128'
    baseoid: 1.3.6.1.4.1.19865.1.2.1.4.0
    payload_on: 1
    payload_off: 0
</code></pre>
:ET