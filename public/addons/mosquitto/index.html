<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Mosquitto MQTT broker - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Fast and reliable MQTT broker.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/addons/mosquitto/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Mosquitto MQTT broker">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/addons/mosquitto/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Fast and reliable MQTT broker.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="Mosquitto MQTT broker">
    <meta name="twitter:description" content="Fast and reliable MQTT broker.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.svg" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/hakorea.github.io/tree/current/source/_addons/mosquitto.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      Mosquitto MQTT broker
    </h1>
  </header>
  <hr class="divider">
  

  <p>Set up <a href="https://mosquitto.org/" rel="external nofollow">Mosquitto</a> as MQTT broker.</p>
<pre><code class="language-json">{
  "logins": [
    {"username": "local-user", "password": "mypw"}
  ],
  "anonymous": false,
  "customize": {
    "active": false,
    "folder": "mosquitto"
  },
  "certfile": "fullchain.pem",
  "keyfile": "privkey.pem"
}
</code></pre>
<div class="warning note">
<p>Since version 4.1 of the addon, an explicit ACL definition is now required if you plan to use legacy logins and <code>"anonymous": true</code> <a href="https://www.home-assistant.io/addons/mosquitto/#access-control-lists-acls">see these instructions</a>.</p>
</div>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="anonymous" href="#anonymous"></a> anonymous</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean">boolean</span>)</span><span class="required">(Optional)</span><span class="description"><p>Allow anonymous connections. If <em>logins</em> is set, the anonymous user can only read data.</p>
</span></p>
<p class="default">
Default value: </p>
<p>false</p>
</dd>
<dt>
<a class="title-link" name="logins" href="#logins"></a> logins</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>A list of local users that will be created with <em>username</em> and <em>password</em>. You don’t need do this because you can use Home Assistant users too without any configuration.</p>
</span></p></dd>
<dt>
<a class="title-link" name="customize" href="#customize"></a> customize</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean string">boolean | string</span>)</span><span class="required">(Optional)</span><span class="description"><p>If you enable it, it reads additional configuration files (<code>*.conf</code>) from <code>/share/mosquitto</code>.</p>
</span></p>
<p class="default">
Default value: </p>
<p>false</p>
</dd>
<dt>
<a class="title-link" name="cafile" href="#cafile"></a> cafile</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Path to the CA certificate. If not set, will default to the <em>certfile</em> value.</p>
</span></p>
<p class="default">
Default value: </p>
<p>certfile</p>
</dd>
<dt>
<a class="title-link" name="require_certificate" href="#require_certificate"></a> require_certificate</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean">boolean</span>)</span><span class="required">(Optional)</span><span class="description"><p>Restrict to users with a valid certificate only.</p>
</span></p>
<p class="default">
Default value: </p>
<p>false</p>
</dd>
</dl>
</div>
<h3>
<a class="title-link" name="home-assistant-user-management" href="#home-assistant-user-management"></a> Home Assistant user management</h3>
<p>This add-on is attached to the Home Assistant user system, so mqtt clients can make use of these credentials. Local users may also still be set independently within the configuration options for the add-on.  For the internal Hass.io ecosystem we register <code>homeassistant</code> and <code>addons</code>, so these may not be used as user names.</p>
<h3>
<a class="title-link" name="home-assistant-configuration" href="#home-assistant-configuration"></a> Home Assistant configuration</h3>
<p>To use the Mosquitto as <a href="/docs/mqtt/broker/#run-your-own">broker</a>, go to the integration page and install the configuration with one click. If you have old MQTT settings available, remove this old integration and restart Home Assistant to see the new one.</p>
<h4>
<a class="title-link" name="using-mosquitto-with-hassio" href="#using-mosquitto-with-hassio"></a> Using Mosquitto with Hass.io</h4>
<ol>
<li>
<p>Install the <a href="/addons/mosquitto/">Mosquitto add-on</a> with the default configuration via ‘Hass.io &gt; ADD-ON STORE’. (Don’t forget to start the add-on &amp; verify that ‘Start on boot’ is enabled.)</p>
</li>
<li>
<p>Create a new user for MQTT via the <code>Configuration &gt; Users (manage users)</code>. (Note: This name cannot be “homeassistant” or “addon”)</p>
</li>
<li>
<p>Once back on-line, return to <code>Configuration &gt; Integrations</code> and select configure next to <code>MQTT</code>.</p>
</li>
</ol>
<pre><code class="language-text">  Broker: YOUR_HASSIO_IP_ADDRESS
  Port: 1883
  Username: MQTT_USERNAME
  Password: MQTT_PASSWORD
</code></pre>
<p>If you are using the ACL, remember to enter the newly created user and homeassistant in <code>/share/mosquitto/accesscontrollist</code> as follows:</p>
<pre><code class="language-text">user [YOUR_MQTT_USER]
topic readwrite #
user homeassistant
topic readwrite #
</code></pre>
<p>Note: .yaml modifications are not required.
See <a href="/docs/mqtt/testing/">testing your setup</a> to verify the steps above.</p>
<h3>
<a class="title-link" name="disable-listening-on-insecure-1883-ports" href="#disable-listening-on-insecure-1883-ports"></a> Disable listening on insecure (1883) ports</h3>
<p>Remove the ports from the add-on page network card (set them as blank) to disable them.</p>
<h3>
<a class="title-link" name="access-control-lists-acls" href="#access-control-lists-acls"></a> Access Control Lists (ACLs)</h3>
<p>It is possible to restrict access to topics based upon the user logged in to Mosquitto. In this scenario it is recommended to create individual users for each of your clients and create an appropriate ACL.</p>
<p>See the following links for more information:</p>
<ul>
<li><a href="http://www.steves-internet-guide.com/topic-restriction-mosquitto-configuration/" rel="external nofollow">Mosquitto topic restrictions</a></li>
<li><a href="https://mosquitto.org/man/mosquitto-conf-5.html" rel="external nofollow">Mosquitto.conf man page</a></li>
</ul>
<p>Add the following configuration to enable <strong>unrestricted</strong> access to all topics.</p>
<ol>
<li>Enable the customize flag</li>
</ol>
<pre><code class="language-json">  "customize": {
    "active": true,
    "folder": "mosquitto"
  },
</code></pre>
<ol start="2">
<li>Create <code>/share/mosquitto/acl.conf</code> with the contents:</li>
</ol>
<pre><code class="language-text">acl_file /share/mosquitto/accesscontrollist
</code></pre>
<ol start="3">
<li>Create <code>/share/mosquitto/accesscontrollist</code> with the contents:</li>
</ol>
<pre><code class="language-text">user [YOUR_MQTT_USER]
topic readwrite #
</code></pre>
<p>The <code>/share</code> folder can be accessed via SMB, or on the host filesystem under <code>/usr/share/hassio/share</code>.</p>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">
  <div class='section'>
    <h1 class="title delta">목차</h1>
    <ul class='divided sidebar-menu'>
      <li>
        <a  href='/hassio/'>Hass.io </a>
        <ul>
          <li><a  href='/hassio/installation/'>설치 </a></li>
          <li><a  href='/addons/'>애드온 </a></li>
          <li><a  href='/hassio/installing_third_party_addons/'>서드파티 애드온 </a></li>
        </ul>
      </li>
    </ul>
    <ul class='divided sidebar-menu'>
      <li>
        Advanced
        <ul>
          <li><a  href='/hassio/commandline/'>명령어모드 </a></li>
          <li><a  href='/hassio/zwave/'>Z-Wave </a></li>
          <li><a  href='/hassio/enable_i2c/'>Enable I2C </a></li>
        </ul>
      </li>
    </ul>
    <ul class='divided sidebar-menu'>
      <li><a href='/developers/hassio/addon_development/'>애드온을 제작해 보실 건가요?</a></li>
    </ul>
  </div>
</section>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img width="40" src="/images/favicon-192x192-full.png" alt="Home Assistant"> 홈어시스턴트
          </div>
          <div class="icons">
            <a rel="me" href='https://twitter.com/home_assistant' title="Twitter"><i class="icon-twitter"></i></a>
            <a rel="me" href='https://www.facebook.com/homeassistantio' title="Facebook"><i class="icon-facebook"></i></a>
            <a rel="me" href='https://github.com/home-assistant/home-assistant' title="GitHub"><i class="icon-github"></i></a>
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://developers.home-assistant.io'>Developers</a></li>
            <li><a href='https://data.home-assistant.io'>Data Science</a></li>
            <li><a href='mailto:hello@home-assistant.io'>Contact</a> (no support!)</li>
            <li><a href='/security/'>Security Vulnerabilities</a></li>
            <li><a href='/privacy/'>Privacy</a></li>
            <li><a href='https://status.home-assistant.io'>System Status</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>지킬</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
          Hosted by <a href='https://www.netlify.com/'>Netlify</a>.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
