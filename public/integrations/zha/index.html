<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Zigbee Home Automation - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to integrate your Zigbee Home Automation (ZHA) devices within Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/zha/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Zigbee Home Automation">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/zha/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to integrate your Zigbee Home Automation (ZHA) devices within Home Assistant.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="Zigbee Home Automation">
    <meta name="twitter:description" content="Instructions on how to integrate your Zigbee Home Automation (ZHA) devices within Home Assistant.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.svg" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/hakorea.github.io/tree/current/source/_integrations/zha.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      Zigbee Home Automation
    </h1>
  </header>
  <hr class="divider">
  

  <p><a href="https://zigbee.org/zigbee-for-developers/applicationstandards/zigbeehomeautomation/" rel="external nofollow">Zigbee Home Automation</a>
integration for Home Assistant allows you to connect many off-the-shelf Zigbee based devices to Home Assistant, using one of the available Zigbee radio modules compatible with <a href="https://github.com/zigpy/zigpy" rel="external nofollow">zigpy</a> (an open source Python library implementing a Zigbee stack, which in turn relies on separate libraries which can each interface a with Zigbee radio module a different manufacturer).</p>
<p>There is currently support for the following device types within Home Assistant:</p>
<ul>
<li>Binary Sensor</li>
<li>Sensor</li>
<li>Light</li>
<li>Lock</li>
<li>Switch</li>
<li>Fan</li>
<li>Cover</li>
</ul>
<h2>
<a class="title-link" name="zha-exception-and-deviation-handling" href="#zha-exception-and-deviation-handling"></a> ZHA exception and deviation handling</h2>
<p>Zigbee devices that deviate from or do not fully conform to the standard specifications set by the <a href="https://www.zigbee.org" rel="external nofollow">Zigbee Alliance</a> may require the development of custom <a href="https://github.com/dmulcahey/zha-device-handlers" rel="external nofollow">ZHA Device Handlers</a> (ZHA custom quirks handler implementation) to for all their functions to work properly with the ZHA integration in Home Assistant. These ZHA Device Handlers for Home Assistant can thus be used to parse custom messages to and from Zigbee devices.</p>
<p>The custom quirks implementations for zigpy implemented as ZHA Device Handlers for Home Assistant are a similar concept to that of <a href="https://docs.smartthings.com/en/latest/device-type-developers-guide/" rel="external nofollow">Hub-connected Device Handlers for the SmartThings Classics platform</a> as well as that of <a href="https://www.zigbee2mqtt.io/how_tos/how_to_support_new_devices.html" rel="external nofollow">Zigbee-Shepherd Converters as used by Zigbee2mqtt</a>, meaning they are each virtual representations of a physical device that expose additional functionality that is not provided out-of-the-box by the existing integration between these platforms.</p>
<h2>
<a class="title-link" name="known-working-zigbee-radio-modules" href="#known-working-zigbee-radio-modules"></a> Known working Zigbee radio modules</h2>
<ul>
<li>EmberZNet based radios using the EZSP protocol (via the <a href="https://github.com/zigpy/bellows" rel="external nofollow">bellows</a> library for zigpy)
<ul>
<li><a href="https://www.nortekcontrol.com/products/2gig/husbzb-1-gocontrol-quickstick-combo/" rel="external nofollow">Nortek GoControl QuickStick Combo Model HUSBZB-1 (Z-Wave &amp; Zigbee USB Adapter)</a></li>
<li><a href="https://elelabs.com/products/elelabs_usb_adapter.html" rel="external nofollow">Elelabs Zigbee USB Adapter</a></li>
<li><a href="https://elelabs.com/products/elelabs_zigbee_shield.html" rel="external nofollow">Elelabs Zigbee Raspberry Pi Shield</a></li>
<li>Telegesis ETRX357USB (Note! This first have to be flashed with other EmberZNet firmware)</li>
<li>Telegesis ETRX357USB-LRS (Note! This first have to be flashed with other EmberZNet firmware)</li>
<li>Telegesis ETRX357USB-LRS+8M (Note! This first have to be flashed with other EmberZNet firmware)</li>
</ul>
</li>
<li>XBee Zigbee based radios (via the <a href="https://github.com/zigpy/zigpy-xbee" rel="external nofollow">zigpy-xbee</a> library for zigpy)
<ul>
<li>Digi XBee Series 3 (xbee3-24) modules</li>
<li>Digi XBee Series 2C (S2C) modules</li>
<li>Digi XBee Series 2 (S2) modules (Note! This first have to be flashed with Zigbee Coordinator API firmware)</li>
</ul>
</li>
<li>dresden elektronik deCONZ based Zigbee radios (via the <a href="https://github.com/zigpy/zigpy-deconz" rel="external nofollow">zigpy-deconz</a> library for zigpy)
<ul>
<li><a href="https://phoscon.de/conbee2" rel="external nofollow">ConBee II (a.k.a. ConBee 2) USB adapter from dresden elektronik</a></li>
<li><a href="https://phoscon.de/conbee" rel="external nofollow">ConBee USB adapter from dresden elektronik</a></li>
<li><a href="https://phoscon.de/raspbee" rel="external nofollow">RaspBee Raspberry Pi Shield from dresden elektronik</a></li>
</ul>
</li>
<li>ZiGate based radios (via the <a href="https://github.com/doudz/zigpy-zigate" rel="external nofollow">zigpy-zigate</a> library for zigpy and require firmware 3.1a or later)
<ul>
<li><a href="https://zigate.fr/produit/zigate-ttl/" rel="external nofollow">ZiGate USB-TTL</a></li>
<li><a href="https://zigate.fr/produit/zigate-usb-din/" rel="external nofollow">ZiGate USB-DIN</a></li>
<li><a href="https://zigate.fr/produit/pizigate-v1-0/" rel="external nofollow">PiZiGate</a></li>
<li>
<a href="https://zigate.fr/produit/zigate-pack-wifi-v1-3/" rel="external nofollow">Wifi ZiGate</a> (work in progress)</li>
</ul>
</li>
</ul>
<h2>
<a class="title-link" name="configuration---gui" href="#configuration---gui"></a> Configuration - GUI</h2>
<p>From the Home Assistant front page go to <strong>Configuration</strong> and then select <strong>Integrations</strong> from the list.</p>
<p>Use the plus button in the bottom right to add a new integration called <strong>ZHA</strong>.</p>
<p>In the popup:</p>
<ul>
<li>USB Device Path - on a linux system will be something like <code>/dev/ttyUSB0</code>
</li>
<li>Radio type - select device type <strong>ezsp</strong>, <strong>deconz</strong> or <strong>xbee</strong>
</li>
<li>Submit</li>
</ul>
<p>The success dialog will appear or an error will be displayed in the popup. An error is likely if Home Assistant can’t access the USB device or your device is not up to date (see troubleshooting).</p>
<h2>
<a class="title-link" name="configuration---manual" href="#configuration---manual"></a> Configuration - Manual</h2>
<p>To configure the component, select ZHA on the Integrations page and provide the path to your Zigbee USB stick.</p>
<p>Or, you can manually confiure <code>zha</code> section in <code>configuration.yaml</code>. The path to the database which will persist your network data is required.</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
zha:
  usb_path: /dev/ttyUSB2
  database_path: /home/homeassistant/.homeassistant/zigbee.db
</code></pre>
<p>If you are use ZiGate, you have to use some special usb_path configuration:</p>
<ul>
<li>ZiGate USB TTL or DIN: <code>/dev/ttyUSB0</code> or <code>auto</code> to auto discover the zigate</li>
<li>PiZigate : <code>pizigate:/dev/serial0</code>
</li>
<li>Wifi Zigate : <code>socket://[IP]:[PORT]</code> for example <code>socket://192.168.1.10:9999</code>
</li>
</ul>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="radio_type" href="#radio_type"></a> radio_type</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>One of <code>ezsp</code>, <code>xbee</code>, <code>deconz</code> or <code>zigate</code>.</p>
</span></p>
<p class="default">
Default value: </p>
<p>ezsp</p>
</dd>
<dt>
<a class="title-link" name="usb_path" href="#usb_path"></a> usb_path</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>Path to the serial device for the radio.</p>
</span></p></dd>
<dt>
<a class="title-link" name="baudrate" href="#baudrate"></a> baudrate</dt>
<dd>
<p class="desc"><span class="type">(<span class="integer">integer</span>)</span><span class="required">(Optional)</span><span class="description"><p>Baud rate of the serial device.</p>
</span></p>
<p class="default">
Default value: </p>
<p>57600</p>
</dd>
<dt>
<a class="title-link" name="database_path" href="#database_path"></a> database_path</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p><em>Full</em> path to the database which will keep persistent network data.</p>
</span></p></dd>
<dt>
<a class="title-link" name="enable_quirks" href="#enable_quirks"></a> enable_quirks</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean">boolean</span>)</span><span class="required">(Optional)</span><span class="description"><p>Enable quirks mode for devices where manufacturers didn’t follow specs.</p>
</span></p>
<p class="default">
Default value: </p>
<p>true</p>
</dd>
</dl>
</div>
<p>To add new devices to the network, call the <code>permit</code> service on the <code>zha</code> domain. Do this by clicking the Service icon in Developer tools and typing <code>zha.permit</code> in the <strong>Service</strong> dropdown box. Next, follow the device instructions for adding, scanning or factory reset.</p>
<h2>
<a class="title-link" name="adding-devices" href="#adding-devices"></a> Adding devices</h2>
<p>Go to the <strong>Configuration</strong> page and select the <strong>ZHA</strong> integration that was added by the configuration steps above.</p>
<p>Click on <strong>ADD DEVICES</strong> to start a scan for new devices.</p>
<p>Reset your Zigbee devices according to the device instructions provided by the manufacturer (e.g.,  turn on/off lights up to 10 times, switches usually have a reset button/pin).</p>
<h2>
<a class="title-link" name="troubleshooting" href="#troubleshooting"></a> Troubleshooting</h2>
<h3>
<a class="title-link" name="add-philips-hue-bulbs-that-have-previously-been-added-to-another-bridge" href="#add-philips-hue-bulbs-that-have-previously-been-added-to-another-bridge"></a> Add Philips Hue bulbs that have previously been added to another bridge</h3>
<p>Philips Hue bulbs that have previously been added to another bridge won’t show up during search. You have to restore your bulbs back to factory settings first. To achieve this, you basically have the following options.</p>
<h4>
<a class="title-link" name="philips-hue-dimmer-switch" href="#philips-hue-dimmer-switch"></a> Philips Hue Dimmer Switch</h4>
<p>Using a Philips Hue Dimmer Switch is probably the easiest way to factory-reset your bulbs. For this to work, the remote doesn’t have to be paired with your previous bridge.</p>
<ol>
<li>Turn on your Hue bulb you want to reset</li>
<li>Hold the Dimmer Switch near your bulb (&lt; 10 cm)</li>
<li>Press and hold the (I)/(ON) and (O)/(OFF) buttons of the Dimmer Switch for about 10 seconds until your bulb starts to blink</li>
<li>Your bulb should stop blinking and eventually turning on again. At the same time, a green light on the top left of your remote indicates that your bulb has been successfully reset to factory settings.</li>
</ol>
<h4>
<a class="title-link" name="hue-thief" href="#hue-thief"></a> hue-thief</h4>
<p>Follow the instructions on <a href="https://github.com/vanviegen/hue-thief/" rel="external nofollow">https://github.com/vanviegen/hue-thief/</a> (EZSP-based Zigbee USB stick required)</p>
<h3>
<a class="title-link" name="zha-start-up-issue-with-home-assistant-dockerhassio-installs-on-linux-hosts" href="#zha-start-up-issue-with-home-assistant-dockerhassio-installs-on-linux-hosts"></a> ZHA Start up issue with Home-Assistant Docker/Hass.io installs on linux hosts</h3>
<p>On Linux hosts ZHA can fail to start during HA startup or restarts because the Zigbee USB device is being claimed by the host’s modemmanager service. To fix this disable the modemmanger on the host system.</p>
<p>To remove modemmanager from an Debian/Ubuntu host run this command:</p>
<pre><code class="language-bash">sudo apt-get purge modemmanager
</code></pre>
<h3>
<a class="title-link" name="cant-connect-to-usb-device-and-using-docker" href="#cant-connect-to-usb-device-and-using-docker"></a> Can’t connect to USB device and using Docker</h3>
<p>If you are using Docker and can’t connect, you most likely need to forward your device from the host machine to the Docker instance. This can be achieved by adding the device mapping to the end of the startup string or ideally using docker compose.</p>
<h4>
<a class="title-link" name="docker-compose" href="#docker-compose"></a> Docker Compose</h4>
<p>Install Docker-Compose for your platform (linux - <code>sudo apt-get install docker-compose</code>).</p>
<p>Create a <code>docker-compose.yml</code> with the following data:</p>
<pre><code class="language-yaml">version: '2'
services:
  homeassistant:
    # customisable name
    container_name: home-assistant
    
    # must be image for your platform, this is the rpi3 variant
    image: homeassistant/raspberrypi3-homeassistant
    volumes:
      - &lt;DIRECTORY HOLDING HOME ASSISTANT CONFIG FILES&gt;:/config
      - /etc/localtime:/etc/localtime:ro
    devices:
      # your usb device forwarding to the docker image
      - /dev/ttyUSB0:/dev/ttyUSB0
    restart: always
    network_mode: host
</code></pre>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/hakorea.github.io/tree/current/source/_integrations/zha.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/zigbee.png' /></div><div class="section">
    <kb-alert-link integration="zha"></kb-alert-link>
  </div><div class='section'>
      IoT class<sup><a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'><i class="icon-info-sign"></i></a></sup>: Local Polling
    </div><div class='section'>
      Introduced in release: 0.44
    </div><div class='section'>
      This integration is configurable via UI
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/zha/'>/components/zha/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#hub'>Hub</a>
      </li><li>
        <a href='/integrations/#binary-sensor'>Binary Sensor</a>
      </li><li>
        <a href='/integrations/#fan'>Fan</a>
      </li><li>
        <a href='/integrations/#light'>Light</a>
      </li><li>
        <a href='/integrations/#lock'>Lock</a>
      </li><li>
        <a href='/integrations/#sensor'>Sensor</a>
      </li><li>
        <a href='/integrations/#switch'>Switch</a>
      </li><li>
        <a href='/integrations/#cover'>Cover</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img width="40" src="/images/favicon-192x192-full.png" alt="Home Assistant"> 홈어시스턴트
          </div>
          <div class="icons">
            <a rel="me" href='https://twitter.com/home_assistant' title="Twitter"><i class="icon-twitter"></i></a>
            <a rel="me" href='https://www.facebook.com/homeassistantio' title="Facebook"><i class="icon-facebook"></i></a>
            <a rel="me" href='https://github.com/home-assistant/home-assistant' title="GitHub"><i class="icon-github"></i></a>
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://developers.home-assistant.io'>Developers</a></li>
            <li><a href='https://data.home-assistant.io'>Data Science</a></li>
            <li><a href='mailto:hello@home-assistant.io'>Contact</a> (no support!)</li>
            <li><a href='/security/'>Security Vulnerabilities</a></li>
            <li><a href='/privacy/'>Privacy</a></li>
            <li><a href='https://status.home-assistant.io'>System Status</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>지킬</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
          Hosted by <a href='https://www.netlify.com/'>Netlify</a>.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
