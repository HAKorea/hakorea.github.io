<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Apple iCloud - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to use iCloud to track devices in Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/icloud/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Apple iCloud">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/icloud/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to use iCloud to track devices in Home Assistant.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="Apple iCloud">
    <meta name="twitter:description" content="Instructions on how to use iCloud to track devices in Home Assistant.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.svg" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/hakorea.github.io/tree/current/source/_integrations/icloud.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      Apple iCloud
    </h1>
  </header>
  <hr class="divider">
  

  <p>The <code>icloud</code> integration allows you to detect presence using the <a href="https://www.icloud.com/" rel="external nofollow">iCloud</a> service. iCloud allows users to track their location on iOS devices.</p>
<p>There is currently support for the following platforms within Home Assistant:</p>
<ul>
<li><a href="#device-tracker">Device Tracker</a></li>
<li><a href="#sensor">Sensor</a></li>
</ul>
<p>It does require that your devices are registered with the <a href="https://www.apple.com/uk/icloud/find-my/" rel="external nofollow">Find My</a> service.</p>
<h2>
<a class="title-link" name="setup-the-integration" href="#setup-the-integration"></a> Setup the integration</h2>
<p>There is two ways to integrate iCloud in Home Assistant</p>
<h3>
<a class="title-link" name="via-the-frontend" href="#via-the-frontend"></a> Via the frontend</h3>
<p>Menu: <em>Configuration</em> -&gt; <em>Integrations</em>. Search for “iCloud”, add your credentials, click submit.</p>
<p>If you add the integration for the first time for an account:</p>
<ol>
<li>Choose a trusted device from the list and submit.</li>
<li>It will send you a text message on your trusted device, add the received code to the next form and submit (if you missed the right code, you will be back to the previous step, and retry).</li>
<li>You are done!</li>
</ol>
<p>If you already added the integration before, you are done!</p>
<h3>
<a class="title-link" name="via-the-configuration-file" href="#via-the-configuration-file"></a> Via the configuration file</h3>
<p>Add the following section to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
icloud:
  - username: USERNAME
    password: PASSWORD
</code></pre>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="username" href="#username"></a> username</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>Your iCloud account email.</p>
</span></p></dd>
<dt>
<a class="title-link" name="password" href="#password"></a> password</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>Your iCloud account password.</p>
</span></p></dd>
<dt>
<a class="title-link" name="max_interval" href="#max_interval"></a> max_interval</dt>
<dd>
<p class="desc"><span class="type">(<span class="integer">integer</span>)</span><span class="required">(Optional)</span><span class="description"><p>Maximum interval in minutes between subsequent location updates. This tracker uses dynamic intervals for requesting location updates. When the iPhone is stationary, the interval will eventually be set to <code>max_interval</code> to save battery. When the iPhone starts moving again, the interval will be dynamically updated to 1 min. Note that updating interval to 1 min might be delayed by maximum <code>max_interval</code> minutes. Minimum value is 1 min.</p>
</span></p>
<p class="default">
Default value: </p>
<p>30</p>
</dd>
<dt>
<a class="title-link" name="gps_accuracy_threshold" href="#gps_accuracy_threshold"></a> gps_accuracy_threshold</dt>
<dd>
<p class="desc"><span class="type">(<span class="integer">integer</span>)</span><span class="required">(Optional)</span><span class="description"><p>iCloud location updates come with some gps_accuracy varying from 10 to 5000 meters. This setting defines the accuracy threshold in meters for a location update. Less accurate updates will be discarded by this tracker. This allows for more precise location monitoring and fewer false-positive zone changes.</p>
</span></p>
<p class="default">
Default value: </p>
<p>500</p>
</dd>
</dl>
</div>
<div class="note warning">
Low `max_interval` may cause battery drainage as it wakes up your device to get the current location.
</div>
<div class="note warning">
You may receive an email and a notification from Apple saying that someone has logged into your account.
<p>For the notification, press “Allow”, then “OK”.</p>
</div>
<p>If 2 Step Authentication is enabled for your iCloud account, some time after Home Assistant startup the integration will ask which device you want to use as the Trusted Device via a notification in the Home Assistant UI. The integration will send an SMS prompt to that device with the auth code to enter in Home Assistant. The duration of this authentication is determined by Apple, but is currently 2 months, so you will only need to verify your account every two months.</p>
<p>2 Factor Authentication is the improved version of 2 Step Authentication and is still not supported by the pyicloud library. Therefore it’s not possible to use it with the device_tracker yet.</p>
<p>To prevent excessive battery drainage, a dynamic interval is used for each individual device instead of a fixed interval for all devices linked to one account. The dynamic interval is based on the current zone of a device, the distance towards home and the battery level of the device.</p>
<h2>
<a class="title-link" name="in-case-of-troubleshooting" href="#in-case-of-troubleshooting"></a> In case of troubleshooting</h2>
<p>Go into your Home Assistant configuration <code>.storage</code> folder and delete the “icloud” folder, then retry.</p>
<h2>
<a class="title-link" name="platforms" href="#platforms"></a> Platforms</h2>
<h3>
<a class="title-link" name="device-tracker" href="#device-tracker"></a> Device Tracker</h3>
<p>The iCloud integration will track available devices on your iCloud account.</p>
<h3>
<a class="title-link" name="sensor" href="#sensor"></a> Sensor</h3>
<p>The iCloud integration will add a battery sensor for each iCloud devices available on your iCloud account.</p>
<h2>
<a class="title-link" name="services" href="#services"></a> Services</h2>
<p>4 services are available:</p>
<h3>
<a class="title-link" name="service-icloudupdate" href="#service-icloudupdate"></a> Service icloud.update</h3>
<p>This service can be used to ask an update of a certain iDevice or all devices linked to an iCloud account. Request will result in new Home Assistant <a href="/docs/configuration/events/#event-state_changed">state_changed</a> event describing current iPhone location. It can be used in automations when a manual location update is needed, e.g., to check if anyone is home when a door been opened.</p>
<h3>
<a class="title-link" name="service-icloudplay_sound" href="#service-icloudplay_sound"></a> Service icloud.play_sound</h3>
<p>This service will play the Lost iPhone sound on your iDevice. It will still ring if you are on “Mute” or “Do not disturb” mode.</p>
<h3>
<a class="title-link" name="service-iclouddisplay_message" href="#service-iclouddisplay_message"></a> Service icloud.display_message</h3>
<p>This service will display a message on your iDevice. It can also ring your device.</p>
<h3>
<a class="title-link" name="service-icloudlost_device" href="#service-icloudlost_device"></a> Service icloud.lost_device</h3>
<p>This service will put your iDevice on “lost” mode (compatible devices only). You have to provide a phone number with a suffixed <a href="https://en.wikipedia.org/wiki/List_of_country_calling_codes" rel="external nofollow">country code</a> and a message.</p>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/hakorea.github.io/tree/current/source/_integrations/icloud.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/icloud.png' /></div><div class="section">
    <kb-alert-link integration="icloud"></kb-alert-link>
  </div><div class='section'>
      IoT class<sup><a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'><i class="icon-info-sign"></i></a></sup>: Cloud Polling
    </div><div class='section'>
      Introduced in release: 0.10
    </div><div class='section'>
      This integration is configurable via UI
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/icloud/'>/components/icloud/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#presence-detection'>Presence Detection</a>
      </li><li>
        <a href='/integrations/#sensor'>Sensor</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img width="40" src="/images/favicon-192x192-full.png" alt="Home Assistant"> 홈어시스턴트
          </div>
          <div class="icons">
            <a rel="me" href='https://twitter.com/home_assistant' title="Twitter"><i class="icon-twitter"></i></a>
            <a rel="me" href='https://www.facebook.com/homeassistantio' title="Facebook"><i class="icon-facebook"></i></a>
            <a rel="me" href='https://github.com/home-assistant/home-assistant' title="GitHub"><i class="icon-github"></i></a>
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://developers.home-assistant.io'>Developers</a></li>
            <li><a href='https://data.home-assistant.io'>Data Science</a></li>
            <li><a href='mailto:hello@home-assistant.io'>Contact</a> (no support!)</li>
            <li><a href='/security/'>Security Vulnerabilities</a></li>
            <li><a href='/privacy/'>Privacy</a></li>
            <li><a href='https://status.home-assistant.io'>System Status</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>지킬</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
          Hosted by <a href='https://www.netlify.com/'>Netlify</a>.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
