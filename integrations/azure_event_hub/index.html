<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Azure Event Hub - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Setup for Azure Event Hub integration">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/azure_event_hub/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Azure Event Hub">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/azure_event_hub/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Setup for Azure Event Hub integration">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="Azure Event Hub">
    <meta name="twitter:description" content="Setup for Azure Event Hub integration">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.svg" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li><a href='#' class='show-search'><i class="icon-search"></i></a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/azure_event_hub.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      Azure Event Hub
    </h1>
  </header>
  <hr class="divider">
  

  <p>The <code>Azure Event Hub</code> integration allows you to hook into the Home Assistant event bus and send events to <a href="https://azure.microsoft.com/en-us/services/event-hubs/" rel="external nofollow">Azure Event Hub</a> or to a <a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-messages-read-builtin" rel="external nofollow">Azure IoT Hub</a>.</p>
<h2>
<a class="title-link" name="first-time-setup" href="#first-time-setup"></a> First time setup</h2>
<p>This assumes you already have a Azure account. Otherwise create a Free account <a href="https://azure.microsoft.com/en-us/free/" rel="external nofollow">here</a>.</p>
<p>You need to create a Event Hub namespace and a Event Hub in that namespace, you can follow <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-create" rel="external nofollow">this guide</a>. Alternatively you can directly deploy an ARM template with the namespace and the Event Hub <a href="https://github.com/Azure/azure-quickstart-templates/tree/master/201-event-hubs-create-event-hub-and-consumer-group/" rel="external nofollow">from here</a>.</p>
<p>You must then create a Shared Access Policy for the Event Hub with ‘Send’ claims or use the RootManageAccessKey from your namespace (this key has additional claims, including managing the event hub and listening, which are not needed for this purpose), for more details on the security of Event Hubs <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-authentication-and-security-model-overview" rel="external nofollow">go here</a>.</p>
<p>Once you have the name of your namespace, instance, Shared Access Policy and the key for that policy, you can setup the integration itself.</p>
<h2>
<a class="title-link" name="configuration" href="#configuration"></a> Configuration</h2>
<p>Add the following lines to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
azure_event_hub:
  event_hub_namespace: NAMESPACE_NAME
  event_hub_instance_name: EVENT_HUB_INSTANCE_NAME
  event_hub_sas_policy: SAS_POLICY_NAME
  event_hub_sas_key: SAS_KEY
  filter:
    include_domains:
    - homeassistant
    - light
    - media_player
</code></pre>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="event_hub_namespace" href="#event_hub_namespace"></a> event_hub_namespace</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The name of your Event Hub namespace.</p>
</span></p></dd>
<dt>
<a class="title-link" name="event_hub_instance_name" href="#event_hub_instance_name"></a> event_hub_instance_name</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The name of your Event Hub instance.</p>
</span></p></dd>
<dt>
<a class="title-link" name="event_hub_sas_policy" href="#event_hub_sas_policy"></a> event_hub_sas_policy</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The name of your Shared Access Policy.</p>
</span></p></dd>
<dt>
<a class="title-link" name="event_hub_sas_key" href="#event_hub_sas_key"></a> event_hub_sas_key</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The key for the Shared Access Policy.</p>
</span></p></dd>
<dt>
<a class="title-link" name="filter" href="#filter"></a> filter</dt>
<dd>
<p class="desc"><span class="type">(<span class="map">map</span>)</span><span class="required">(Required)</span><span class="description"><p>Filter domains and entities for Event Hub.</p>
</span></p>
<p class="default">
Default value: </p>
<p>Includes all entities from all domains</p>
</dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="include_domains" href="#include_domains"></a> include_domains</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>List of domains to include (e.g., <code>light</code>).</p>
</span></p></dd>
<dt>
<a class="title-link" name="exclude_domains" href="#exclude_domains"></a> exclude_domains</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>List of domains to exclude (e.g., <code>light</code>).</p>
</span></p></dd>
<dt>
<a class="title-link" name="include_entities" href="#include_entities"></a> include_entities</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>List of entities to include (e.g., <code>light.attic</code>).</p>
</span></p></dd>
<dt>
<a class="title-link" name="exclude_entities" href="#exclude_entities"></a> exclude_entities</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>List of entities to include (e.g., <code>light.attic</code>).</p>
</span></p></dd>
</dl></dd>
</dl>
</div>
<div class="note warning">
Not filtering domains or entities will send every event to Azure Event Hub, thus taking up a lot of space. 
</div>
<div class="note warning">
Event Hubs have a retention time of at most 7 days, if you do not capture or use the events they are deleted automatically from the Event Hub, the default retention is 1 day.
</div>
<h3>
<a class="title-link" name="using-the-data-in-azure" href="#using-the-data-in-azure"></a> Using the data in Azure</h3>
<p>There are a number of ways to stream the data that comes into the Event Hub into storages in Azure, the easiest way is to use the built-in Capture function and this allows you to capture the data in Azure Blob Storage or Azure Data Lake store, <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-capture-overview" rel="external nofollow">details here</a>.</p>
<p>Other storages in Azure (and outside) are possible with a <a href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-define-inputs#stream-data-from-event-hubs" rel="external nofollow">Azure Stream Analytics job</a>, for instance for <a href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-documentdb-output" rel="external nofollow">Cosmos DB</a>, <a href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-sql-output-perf" rel="external nofollow">Azure SQL DB</a>, <a href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-define-outputs#table-storage" rel="external nofollow">Azure Table Storage</a>, custom writing to <a href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-custom-path-patterns-blob-storage-output" rel="external nofollow">Azure Blob Storage</a> and <a href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-quick-create-portal#configure-job-output" rel="external nofollow">Topic and Queues</a>.</p>
<p>On the analytical side, Event Hub can be directly fed into <a href="https://docs.microsoft.com/en-us/azure/azure-databricks/databricks-stream-from-eventhubs?toc=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fazure%2Fevent-hubs%2FTOC.json&amp;bc=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fazure%2Fbread%2Ftoc.json" rel="external nofollow">Azure Databricks Spark</a>, <a href="https://docs.microsoft.com/en-us/azure/time-series-insights/time-series-insights-how-to-add-an-event-source-eventhub" rel="external nofollow">Azure Time Series Insights</a> and <a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-tutorial-visualize-anomalies" rel="external nofollow">Microsoft Power BI</a>.</p>
<p>The final way to use the data in Azure is to connect a Azure Function to the Event Hub using the <a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-event-hubs" rel="external nofollow">Event Hub trigger binding</a>.</p>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/azure_event_hub.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/azure_event_hub.svg' /></div><div class="section">
    <kb-alert-link integration="azure_event_hub"></kb-alert-link>
  </div><div class='section'>
      Introduced in release: 0.94
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/azure_event_hub/'>/components/azure_event_hub/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#history'>History</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img width="40" src="/images/favicon-192x192-full.png" alt="Home Assistant"> 홈어시스턴트
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://cafe.naver.com/koreassistant'>HA 네이버 카페</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>Jekyll</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
