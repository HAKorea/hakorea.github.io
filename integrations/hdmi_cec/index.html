<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>HDMI-CEC - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to interact with HDMI-CEC via Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/hdmi_cec/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="HDMI-CEC">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/hdmi_cec/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to interact with HDMI-CEC via Home Assistant.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="HDMI-CEC">
    <meta name="twitter:description" content="Instructions on how to interact with HDMI-CEC via Home Assistant.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li><a href='#' class='show-search'><i class="icon-search"></i></a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/hdmi_cec.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      HDMI-CEC
    </h1>
  </header>
  <hr class="divider">
  

  <p>The <code>hdmi_cec</code> integration provides services that allow selecting the active device, powering on all devices, setting all devices to standby and creates switch entities for HDMI devices. Devices are defined in the configuration file by associating HDMI port number and a device name. Connected devices that provide further HDMI ports, such as sound-bars and AVRs are also supported. Devices are listed from the perspective of the CEC-enabled Home Assistant device. Any connected device can be listed, regardless of whether it supports CEC. Ideally the HDMI port number on your device will map correctly the CEC physical address. If it does not, use <code>cec-client</code> (part of the <code>libcec</code> package) to listen to traffic on the CEC bus and discover the correct numbers.</p>
<h2>
<a class="title-link" name="cec-setup" href="#cec-setup"></a> CEC Setup</h2>
<h3>
<a class="title-link" name="adapter" href="#adapter"></a> Adapter</h3>
<p>The computer running Home Assistant must support CEC, and of course be connected via HDMI to a device also supporting CEC. You can purchase a <a href="https://www.pulse-eight.com/p/104/usb-hdmi-cec-adapter" rel="external nofollow">USB CEC adapter</a> to add support if necessary. Note that all Raspberry Pi models support CEC natively.</p>
<h3>
<a class="title-link" name="libcec" href="#libcec"></a> libcec</h3>
<p><a href="https://github.com/Pulse-Eight/libcec" rel="external nofollow">libcec</a> must be installed for this integration to work. Follow the installation instructions for your environment, provided at the link. <code>libcec</code> installs Python 3 bindings by default as a system Python module. If you are running Home Assistant in a <a href="/docs/installation/virtualenv/">Python virtual environment</a>, make sure it can access the system module, by either symlinking it or using the <code>--system-site-packages</code> flag.</p>
<div class="note">
<p>If you are using <a href="/hassio/">Hass.io</a> then just move forward to the configuration as all requirements are already fulfilled.</p>
</div>
<h4>
<a class="title-link" name="symlinking-into-virtual-environment" href="#symlinking-into-virtual-environment"></a> Symlinking into virtual environment</h4>
<p>Create a symlink to the <code>cec</code> installation including the _cec.so file. Keep in mind different installation methods will result in different locations of cec.</p>
<pre><code class="language-bash">ln -s /path/to/your/installation/of/cec.py /path/to/your/venv/lib/python*/site-packages
ln -s /path/to/your/installation/of/_cec.so /path/to/your/venv/lib/python*/site-packages

</code></pre>
<h5>
<a class="title-link" name="symlinking-examples" href="#symlinking-examples"></a> Symlinking examples:</h5>
<p>For the default virtual environment of a <a href="/docs/installation/raspberry-pi/">Manual install for Raspberry Pi</a> the command would be as follows.</p>
<pre><code class="language-bash">ln -s /usr/local/lib/python*/dist-packages/cec.py /srv/homeassistant/lib/python*/site-packages
ln -s /usr/local/lib/python*/dist-packages/_cec.so /srv/homeassistant/lib/python*/site-packages
</code></pre>
<div class="note">
<p>If after symlinking and adding <code>hdmi_cec:</code> to your configuration you are getting the following error in your logs,
<code>* failed to open vchiq instance</code> you will also need to add the user account Home Assistant runs under, to the <code>video</code> group. To add the Home Assistant user account to the <code>video</code> group, run the following command. <code>$ usermod -a -G video &lt;hass_user_account&gt;</code></p>
</div>
<h2>
<a class="title-link" name="testing-your-installation" href="#testing-your-installation"></a> Testing your installation</h2>
<ul>
<li>Login to Raspberry Pi</li>
</ul>
<pre><code class="language-bash">ssh pi@your_raspberry_pi_ip
</code></pre>
<ul>
<li>at the command line type:</li>
</ul>
<pre><code class="language-bash">echo scan | cec-client -s -d 1
</code></pre>
<p>Note: to use this command you have to install cec-utils package. In Debian based should be: <code>sudo apt install cec-utils</code></p>
<ul>
<li>This will give you the list of devices that are on the bus</li>
</ul>
<pre><code class="language-bash">opening a connection to the CEC adapter...
requesting CEC bus information ...
CEC bus information
===================
device #4: Playback 1
address:       3.0.0.0
active source: no
vendor:        Sony
osd string:    BD
CEC version:   1.4
power status:  on
language:      ???
</code></pre>
<div class="note">
<p><code>address:</code> entry above this will be used to configure Home Assistant, this address is represented below as 3: BlueRay player.</p>
</div>
<h2>
<a class="title-link" name="configuration-example" href="#configuration-example"></a> Configuration Example</h2>
<p>In the following example, a Pi Zero running Home Assistant is on a TV’s HDMI port 1. HDMI port 2 is attached to a AV receiver. Three devices are attached to the AV receiver on HDMI ports 1 through 3.</p>
<p>You can use either direct mapping name to physical address of device</p>
<pre><code class="language-yaml">hdmi_cec:
  devices:
    TV: 0.0.0.0
    Pi Zero: 1.0.0.0
    Fire TV Stick: 2.1.0.0
    Chromecast: 2.2.0.0
    Another Device: 2.3.0.0
    BlueRay player: 3.0.0.0
</code></pre>
<p>or port mapping tree:</p>
<pre><code class="language-yaml">hdmi_cec:
  devices:
    1: Pi Zero
    2:
      1: Fire TV Stick
      2: Chromecast
      3: Another Device
    3: BlueRay player
</code></pre>
<p>Choose just one schema. Mixing both approaches is not possible.</p>
<p>Another option you can use in config is <code>platform</code> which specifying of default platform of HDMI devices. “switch” and “media_player” are supported. Switch is default.</p>
<pre><code class="language-yaml">hdmi_cec:
  platform: media_player
</code></pre>
<p>Then you set individual platform for devices in customizations:</p>
<pre><code class="language-yaml">hdmi_cec:
  types:
    hdmi_cec.hdmi_5: media_player
</code></pre>
<p>And the last option is <code>host</code>. PyCEC supports bridging CEC commands over TCP. When you start pyCEC on machine with HDMI port (<code>python -m pycec</code>), you can then run homeassistant on another machine and connect to CEC over TCP. Specify TCP address of pyCEC server:</p>
<pre><code class="language-yaml">hdmi_cec:
  host: 192.168.1.3
</code></pre>
<h2>
<a class="title-link" name="services" href="#services"></a> Services</h2>
<h3>
<a class="title-link" name="select-device" href="#select-device"></a> Select Device</h3>
<p>Call the <code>hdmi_cec.select_device</code> service with the name of the device from config or entity_id or physical address”to select it, for example:</p>
<pre><code class="language-json">{"device": "Chromecast"}
</code></pre>
<pre><code class="language-json">{"device": "switch.hdmi_3"}
</code></pre>
<pre><code class="language-json">{"device": "1.1.0.0"}
</code></pre>
<p>So an Automation action using the example above would look something like this.</p>
<pre><code class="language-yaml">action:
  service: hdmi_cec.select_device
    data:
      device: Chromecast
</code></pre>
<h3>
<a class="title-link" name="power-on" href="#power-on"></a> Power On</h3>
<p>Call the <code>hdmi_cec.power_on</code> service (no arguments) to power on any devices that support this function.</p>
<p>An Automation action using the example above would look something like this.</p>
<pre><code class="language-yaml">action:
  service: hdmi_cec.power_on
</code></pre>
<h3>
<a class="title-link" name="standby" href="#standby"></a> Standby</h3>
<p>Call the <code>hdmi_cec.standby</code> service (no arguments) to place in standby any devices that support this function.</p>
<p>An Automation action using the example above would look something like this.</p>
<pre><code class="language-yaml">action:
  service: hdmi_cec.standby
</code></pre>
<h3>
<a class="title-link" name="change-volume-level" href="#change-volume-level"></a> Change volume level</h3>
<p>Call the <code>hdmi_cec.volume</code> service with one of following commands:</p>
<h4>
<a class="title-link" name="volume-up" href="#volume-up"></a> Volume up</h4>
<p>Increase volume three times:</p>
<pre><code class="language-json">{"up": 3}
</code></pre>
<p>Keep increasing volume until release is called:</p>
<pre><code class="language-json">{"up": "press"}
</code></pre>
<p>Stop increasing volume:</p>
<pre><code class="language-json">{"up": "release"}
</code></pre>
<h4>
<a class="title-link" name="volume-down" href="#volume-down"></a> Volume down</h4>
<p>Decrease volume three times:</p>
<pre><code class="language-json">{"down": 3}
</code></pre>
<p>Keep decreasing volume until release is called:</p>
<pre><code class="language-json">{"down": "press"}
</code></pre>
<p>Stop decreasing volume:</p>
<pre><code class="language-json">{"down": "release"}
</code></pre>
<h4>
<a class="title-link" name="volume-mute" href="#volume-mute"></a> Volume mute</h4>
<p>Toggle mute:</p>
<pre><code class="language-json">{"mute": ""}
</code></pre>
<p>value is ignored.</p>
<h2>
<a class="title-link" name="useful-references" href="#useful-references"></a> Useful References</h2>
<ul>
<li><a href="http://wiki.kwikwai.com/index.php?title=The_HDMI-CEC_bus" rel="external nofollow">CEC overview</a></li>
<li><a href="http://www.cec-o-matic.com/" rel="external nofollow">CEC-o-matic</a></li>
</ul>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/hdmi_cec.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/hdmi.png' /></div><div class="section">
    <kb-alert-link integration="hdmi_cec"></kb-alert-link>
  </div><div class='section'>
      IoT class<sup><a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'><i class="icon-info-sign"></i></a></sup>: Local Push
    </div><div class='section'>
      Introduced in release: 0.23
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/hdmi_cec/'>/components/hdmi_cec/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#automation'>Automation</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant"> 홈어시스턴트
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://cafe.naver.com/koreassistant'>HA 네이버 카페</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>Jekyll</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'c762b5632da4220f398f985614f3a1e3',
  indexName: 'hakorea',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
