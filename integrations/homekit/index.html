<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>HomeKit - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to set up the HomeKit integration in Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/homekit/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="HomeKit">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/homekit/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to set up the HomeKit integration in Home Assistant.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="HomeKit">
    <meta name="twitter:description" content="Instructions on how to set up the HomeKit integration in Home Assistant.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/homekit.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      HomeKit
    </h1>
  </header>
  <hr class="divider">
  

  <p>The <code>homekit</code> integration allows you to forward entities from Home Assistant to Apple HomeKit, so they can be controlled from Apple’s Home app and Siri. Please make sure that you have read the <a href="#considerations">considerations</a> listed below to save you some trouble later. However if you do encounter issues, check out the <a href="#troubleshooting">troubleshooting</a> section.</p>
<div class="note">
<p>If you want to control <code>HomeKit</code> only devices with Home Assistant, check out the <a href="/integrations/homekit_controller/">HomeKit controller</a> component.</p>
</div>
<div class="note warning">
<p>It might be necessary to install an additional package:
<code>sudo apt-get install libavahi-compat-libdnssd-dev</code></p>
</div>
<pre><code class="language-yaml"># Example configuration.yaml entry configuring HomeKit
homekit:
  filter:
    include_domains:
      - alarm_control_panel
      - light
      - media_player
    include_entities:
      - binary_sensor.living_room_motion
  entity_config:
    alarm_control_panel.home:
      code: 1234
    binary_sensor.living_room_motion:
      linked_battery_sensor: sensor.living_room_motion_battery
      low_battery_threshold: 31
    light.kitchen_table:
      name: Kitchen Table Light
    lock.front_door:
      code: 1234
    media_player.living_room:
      feature_list:
        - feature: on_off
        - feature: play_pause
        - feature: play_stop
        - feature: toggle_mute
    switch.bedroom_outlet:
      type: outlet
</code></pre>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="homekit" href="#homekit"></a> homekit</dt>
<dd><p class="desc"><span class="type">(<span class="map">map</span>)</span><span class="required">(Required)</span><span class="description"><p>HomeKit configuration.</p>
</span></p></dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="auto_start" href="#auto_start"></a> auto_start</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean">boolean</span>)</span><span class="required">(Optional)</span><span class="description"><p>Flag if the HomeKit Server should start automatically after the Home Assistant Core Setup is done. (<a href="#disable-auto-start">Disable Auto Start</a>)</p>
</span></p>
<p class="default">
Default value: </p>
<p>true</p>
</dd>
<dt>
<a class="title-link" name="port" href="#port"></a> port</dt>
<dd>
<p class="desc"><span class="type">(<span class="integer">integer</span>)</span><span class="required">(Optional)</span><span class="description"><p>Port for the HomeKit extension.</p>
</span></p>
<p class="default">
Default value: </p>
<p>51827</p>
</dd>
<dt>
<a class="title-link" name="name" href="#name"></a> name</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Need to be individual for each instance of Home Assistant using the integration on the same local network. Between <code>3</code> and <code>25</code> characters. Alphanumeric and spaces allowed.</p>
</span></p>
<p class="default">
Default value: </p>
<p><code>Home Assistant Bridge</code></p>
</dd>
<dt>
<a class="title-link" name="ip_address" href="#ip_address"></a> ip_address</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>The local network IP address. Only necessary if the default from Home Assistant does not work.</p>
</span></p></dd>
<dt>
<a class="title-link" name="safe_mode" href="#safe_mode"></a> safe_mode</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean">boolean</span>)</span><span class="required">(Optional)</span><span class="description"><p>Only set this parameter if you encounter issues during pairing. (<a href="#safe-mode">Safe Mode</a>)</p>
</span></p>
<p class="default">
Default value: </p>
<p>false</p>
</dd>
<dt>
<a class="title-link" name="advertise_ip" href="#advertise_ip"></a> advertise_ip</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>If you need to override the IP address used for mDNS advertisement. (For example, using network isolation in Docker and together with an mDNS forwarder like <code>avahi-daemon</code> in reflector mode)</p>
</span></p></dd>
<dt>
<a class="title-link" name="filter" href="#filter"></a> filter</dt>
<dd><p class="desc"><span class="type">(<span class="map">map</span>)</span><span class="required">(Optional)</span><span class="description"><p>Filters for entities to be included/excluded from HomeKit. (<a href="#configure-filter">Configure Filter</a>)</p>
</span></p></dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="include_domains" href="#include_domains"></a> include_domains</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>Domains to be included.</p>
</span></p></dd>
<dt>
<a class="title-link" name="include_entities" href="#include_entities"></a> include_entities</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>Entities to be included.</p>
</span></p></dd>
<dt>
<a class="title-link" name="exclude_domains" href="#exclude_domains"></a> exclude_domains</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>Domains to be excluded.</p>
</span></p></dd>
<dt>
<a class="title-link" name="exclude_entities" href="#exclude_entities"></a> exclude_entities</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>Entities to be excluded.</p>
</span></p></dd>
</dl></dd>
<dt>
<a class="title-link" name="entity_config" href="#entity_config"></a> entity_config</dt>
<dd><p class="desc"><span class="type">(<span class="map">map</span>)</span><span class="required">(Optional)</span><span class="description"><p>Configuration for specific entities. All subordinate keys are the corresponding entity ids to the domains, e.g., <code>alarm_control_panel.alarm</code>.</p>
</span></p></dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="entity_id" href="#entity_id"></a> `<entity_id>`</entity_id>
</dt>
<dd><p class="desc"><span class="type">(<span class="map">map</span>)</span><span class="required">(Optional)</span><span class="description"><p>Additional options for specific entities.</p>
</span></p></dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="name" href="#name"></a> name</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Name of the entity to show in HomeKit. HomeKit will cache the name on the first run so the accessory must be <a href="#resetting-accessories">reset</a> for any change to take effect.</p>
</span></p></dd>
<dt>
<a class="title-link" name="linked_battery_sensor" href="#linked_battery_sensor"></a> linked_battery_sensor</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>The <code>entity_id</code> of a <code>sensor</code> entity to use as the battery of the accessory. HomeKit will cache an accessory’s feature set on the first run so a device must be <a href="#resetting-accessories">reset</a> for any change to take effect.</p>
</span></p></dd>
<dt>
<a class="title-link" name="low_battery_threshold" href="#low_battery_threshold"></a> low_battery_threshold</dt>
<dd>
<p class="desc"><span class="type">(<span class="integer">integer</span>)</span><span class="required">(Optional)</span><span class="description"><p>Minimum battery level before the accessory starts reporting a low battery.</p>
</span></p>
<p class="default">
Default value: </p>
<p>20</p>
</dd>
<dt>
<a class="title-link" name="code" href="#code"></a> code</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Code to <code>arm / disarm</code> an alarm or <code>lock / unlock</code> a lock. Only applicable for <code>alarm_control_panel</code> or <code>lock</code> entities.</p>
</span></p>
<p class="default">
Default value: </p>
<p><code>&lt;No code&gt;</code></p>
</dd>
<dt>
<a class="title-link" name="feature_list" href="#feature_list"></a> feature_list</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>Only for <code>media_player</code> entities. List of feature dictionaries to add for a given entity. Comparable to the platform schema.</p>
</span></p></dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="feature" href="#feature"></a> feature</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>Name of the feature to add to the entity representation. Valid features are <code>on_off</code>, <code>play_pause</code>, <code>play_stop</code> and <code>toggle_mute</code>. The media_player entity must support the feature to be valid.</p>
</span></p></dd>
</dl></dd>
<dt>
<a class="title-link" name="type" href="#type"></a> type</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Only for <code>switch</code> entities. Type of accessory to be created within HomeKit. Valid types are <code>faucet</code>, <code>outlet</code>, <code>shower</code>, <code>sprinkler</code>, <code>switch</code> and <code>valve</code>. HomeKit will cache the type on the first run so a device must be <a href="#resetting-accessories">reset</a> for any change to take effect.</p>
</span></p>
<p class="default">
Default value: </p>
<p><code>switch</code></p>
</dd>
</dl></dd>
</dl></dd>
</dl></dd>
</dl>
</div>
<h2>
<a class="title-link" name="setup" href="#setup"></a> Setup</h2>
<p>To enable the HomeKit integration in Home Assistant, add the following to your configuration file:</p>
<pre><code class="language-yaml"># Example for HomeKit setup
homekit:
</code></pre>
<p>After Home Assistant has started, the entities specified by the filter are exposed to HomeKit if they are <a href="#supported-components">supported</a>. To add them:</p>
<ol>
<li>Open the Home Assistant frontend. A new card will display the <code>pin code</code>. Note: If pin code is not displayed, check “Notifications” (the bell icon) in the lower-left of the Home Assistant UI.</li>
<li>Open the <code>Home</code> app.</li>
<li>Click <code>Add Accessory</code>, then select <code>Don't Have a Code or Can't Scan?</code> and choose the <code>Home Assistant Bridge</code>.</li>
<li>Confirm that you are adding an <code>Uncertified Accessory</code> by clicking on <code>Add Anyway</code>.</li>
<li>Enter the <code>PIN</code> code.</li>
<li>Follow the setup by clicking on <code>Next</code> and lastly <code>Done</code> in the top right-hand corner.</li>
<li>The <code>Home Assistant</code> Bridge and the Accessories should now be listed in the <code>Home</code> app.</li>
</ol>
<p>After the setup is completed, you should be able to control your Home Assistant integrations through Apple’s Home and Siri.</p>
<h2>
<a class="title-link" name="move-home-assistant-install" href="#move-home-assistant-install"></a> Move Home Assistant install</h2>
<p>If you like to retain your HomeKit pairing through a move to a new Home Assistant device or installation, besides copying the configurations files you need to copy the <code>.homekit.state</code> file inside your configurations directory. Keep in mind though that the file is usually hidden by default, depending on your operating system.</p>
<p>Before you copy it, make sure to stop the old and new Home Assistant instances first entirely, otherwise it won’t work.</p>
<h2>
<a class="title-link" name="considerations" href="#considerations"></a> Considerations</h2>
<h3>
<a class="title-link" name="accessory-id" href="#accessory-id"></a> Accessory ID</h3>
<p>Currently, this integration uses the <code>entity_id</code> to generate a unique <code>accessory id (aid)</code> for <code>HomeKit</code>. The <code>aid</code> is used to identify a device and save all configurations made for it. This, however, means that if you decide to change an <code>entity_id</code> all configurations for this accessory made in the <code>Home</code> app will be lost.</p>
<h3>
<a class="title-link" name="device-limit" href="#device-limit"></a> Device Limit</h3>
<p>The HomeKit guidelines only allow a maximum of 100 unique accessories (<code>aid</code>) per bridge. Be mindful of this when configuring the filter(s).</p>
<h3>
<a class="title-link" name="persistence-storage" href="#persistence-storage"></a> Persistence Storage</h3>
<p>Unfortunately <code>HomeKit</code> doesn’t support any persistent storage - only the configuration for accessories that are added to the <code>Home Assistant Bridge</code> are kept. To avoid problems, it is recommended to use an automation to always start <code>HomeKit</code> with at least the same entities setup. If for some reason some entities are not set up, their config will be deleted. (State unknown or similar will not cause any issues.)</p>
<p>A common situation might be if you decide to disable parts of the configuration for testing. Please make sure to disable <code>auto start</code> and <code>turn off</code> the <code>Start HomeKit</code> automation (if you have one).</p>
<h2>
<a class="title-link" name="disable-auto-start" href="#disable-auto-start"></a> Disable Auto Start</h2>
<p>Depending on your setup, it might be necessary to disable <code>Auto Start</code> for all accessories to be available for <code>HomeKit</code>. Only those entities that are fully set up when the <code>HomeKit</code> integration is started, can be added. To start <code>HomeKit</code> when <code>auto_start: false</code>, you can call the service <code>homekit.start</code>.</p>
<p>If you have Z-Wave entities you want to be exposed to HomeKit, then you’ll need to disable auto start and then start it after the Z-Wave mesh is ready. This is because the Z-Wave entities won’t be fully set up until then. This can be automated using an automation.</p>
<div class="note">
<p>Please remember that you can only have a single <code>automation</code> entry. Add the automation to your existing automations.</p>
</div>
<pre><code class="language-yaml"># Example for Z-Wave
homekit:
  auto_start: false

automation:
  - alias: 'Start HomeKit'
    trigger:
      - platform: event
        event_type: zwave.network_ready
      - platform: event
        event_type: zwave.network_complete
      - platform: event
        event_type: zwave.network_complete_some_dead
    action:
      - service: homekit.start
</code></pre>
<p>For a general delay where your integration doesn’t generate an event, you can also do:</p>
<pre><code class="language-yaml"># Example using a delay after the start of Home Assistant
homekit:
  auto_start: false

automation:
  - alias: 'Start HomeKit'
    trigger:
      - platform: homeassistant
        event: start
    action:
      - delay: 00:05  # Waits 5 minutes
      - service: homekit.start
</code></pre>
<p>In some cases it might be desirable to check that all entities are available before starting <code>HomeKit</code>. This can be accomplished by adding an additional <code>binary_sensor</code> as follows:</p>
<pre><code class="language-yaml"># Example checking specific entities to be available before start
homekit:
  auto_start: false

automation:
  - alias: 'Start HomeKit'
    trigger:
      - platform: homeassistant
        event: start
    action:
      - wait_template: &gt;-
          {% if not states.light.kitchen_lights %}
            false
          {% elif not states.sensor.outside_temperature %}
            false
          # Repeat for every entity
          {% else %}
            true
          {% endif %}
        timeout: 00:15  # Waits 15 minutes
        continue_on_timeout: false
      - service: homekit.start
</code></pre>
<h2>
<a class="title-link" name="configure-filter" href="#configure-filter"></a> Configure Filter</h2>
<p>By default, no entity will be excluded. To limit which entities are being exposed to <code>HomeKit</code>, you can use the <code>filter</code> parameter. Keep in mind only <a href="#supported-components">supported components</a> can be added.</p>
<pre><code class="language-yaml"># Example filter to include specified domains and exclude specified entities
homekit:
  filter:
    include_domains:
      - alarm_control_panel
      - light
    exclude_entities:
      - light.kitchen_light
</code></pre>
<p>Filters are applied as follows:</p>
<ol>
<li>No includes or excludes - pass all entities</li>
<li>Includes, no excludes - only include specified entities</li>
<li>Excludes, no includes - only exclude specified entities</li>
<li>Both includes and excludes:
<ul>
<li>Include domain specified
<ul>
<li>if domain is included, and entity not excluded, pass</li>
<li>if domain is not included, and entity not included, fail</li>
</ul>
</li>
<li>Exclude domain specified
<ul>
<li>if domain is excluded, and entity not included, fail</li>
<li>if domain is not excluded, and entity not excluded, pass</li>
<li>if both include and exclude domains specified, the exclude domains are ignored</li>
</ul>
</li>
<li>Neither include or exclude domain specified
<ul>
<li>if entity is included, pass (as #2 above)</li>
<li>if entity include and exclude, the entity exclude is ignored</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2>
<a class="title-link" name="safe-mode" href="#safe-mode"></a> Safe Mode</h2>
<p>The <code>safe_mode</code> option should only be used (and only works) if you encounter issues during the pairing. (<a href="#pairing-hangs---zeroconf-error">Pairing hangs - zeroconf error</a>).</p>
<p>To use <code>safe_mode</code>, add the option to your <code>homekit</code> config:</p>
<pre><code class="language-yaml">homekit:
  safe_mode: true
</code></pre>
<p>Restart your Home Assistant instance. If you don’t see a <code>pincode</code>, follow the <a href="#deleting-the-homekitstate-file">guide</a> here. Now you should be able to pair normally.</p>
<div class="note warning">
<p>To avoid any errors, after you have successfully paired your Home Assistant Bridge, remove the <code>safe_mode</code> option from your config and restart Home Assistant.</p>
</div>
<h2>
<a class="title-link" name="docker-network-isolation" href="#docker-network-isolation"></a> Docker Network Isolation</h2>
<p>The <code>advertise_ip</code> option can be used to run this integration even inside an ephemeral Docker container with network isolation enabled, e.g., not using the host network.</p>
<p>To use <code>advertise_ip</code>, add the option to your <code>homekit</code> config:</p>
<pre><code class="language-yaml">homekit:
  advertise_ip: "STATIC_IP_OF_YOUR_DOCKER_HOST"
</code></pre>
<p>Restart your Home Assistant instance. This feature requires running an mDNS forwarder on your Docker host, e.g., <code>avahi-daemon</code> in reflector mode. This kind of setup most likely requires <code>safe_mode</code> during the bridge setup.</p>
<h2>
<a class="title-link" name="supported-components" href="#supported-components"></a> Supported Components</h2>
<p>The following integrations are currently supported:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Type Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>alarm_control_panel</td>
<td>SecuritySystem</td>
<td>All security systems.</td>
</tr>
<tr>
<td>automation / input_boolean / remote / scene / script</td>
<td>Switch</td>
<td>All represented as switches.</td>
</tr>
<tr>
<td>binary_sensor</td>
<td>Sensor</td>
<td>Support for <code>co2</code>, <code>door</code>, <code>garage_door</code>, <code>gas</code>, <code>moisture</code>, <code>motion</code>, <code>occupancy</code>, <code>opening</code>, <code>smoke</code> and <code>window</code> device classes. Defaults to the <code>occupancy</code> device class for everything else.</td>
</tr>
<tr>
<td>climate</td>
<td>Thermostat</td>
<td>All climate devices.</td>
</tr>
<tr>
<td>cover</td>
<td>GarageDoorOpener</td>
<td>All covers that support <code>open</code> and <code>close</code> and have <code>garage</code> as their <code>device_class</code>.</td>
</tr>
<tr>
<td>cover</td>
<td>WindowCovering</td>
<td>All covers that support <code>set_cover_position</code>.</td>
</tr>
<tr>
<td>cover</td>
<td>WindowCovering</td>
<td>All covers that support <code>open_cover</code> and <code>close_cover</code> through value mapping. (<code>open</code> -&gt; <code>&gt;=50</code>; <code>close</code> -&gt; <code>&lt;50</code>)</td>
</tr>
<tr>
<td>cover</td>
<td>WindowCovering</td>
<td>All covers that support <code>open_cover</code>, <code>stop_cover</code> and <code>close_cover</code> through value mapping. (<code>open</code> -&gt; <code>&gt;70</code>; <code>close</code> -&gt; <code>&lt;30</code>; <code>stop</code> -&gt; every value in between)</td>
</tr>
<tr>
<td>device_tracker / person</td>
<td>Sensor</td>
<td>Support for <code>occupancy</code> device class.</td>
</tr>
<tr>
<td>fan</td>
<td>Fan</td>
<td>Support for <code>on / off</code>, <code>direction</code> and <code>oscillating</code>.</td>
</tr>
<tr>
<td>fan</td>
<td>Fan</td>
<td>All fans that support <code>speed</code> and <code>speed_list</code> through value mapping: <code>speed_list</code> is assumed to contain values in ascending order. The numeric ranges of HomeKit map to a corresponding entry of <code>speed_list</code>. The first entry of <code>speed_list</code> should be equivalent to <code>off</code> to match HomeKit’s concept of fan speeds. (Example: <code>speed_list</code> = [<code>off</code>, <code>low</code>, <code>high</code>]; <code>off</code> -&gt; <code>&lt;= 33</code>; <code>low</code> -&gt; between <code>33</code> and <code>66</code>; <code>high</code> -&gt; <code>&gt; 66</code>)</td>
</tr>
<tr>
<td>light</td>
<td>Light</td>
<td>Support for <code>on / off</code>, <code>brightness</code> and <code>rgb_color</code>.</td>
</tr>
<tr>
<td>lock</td>
<td>DoorLock</td>
<td>Support for <code>lock / unlock</code>.</td>
</tr>
<tr>
<td>media_player</td>
<td>MediaPlayer</td>
<td>Represented as a series of switches which control <code>on / off</code>, <code>play / pause</code>, <code>play / stop</code>, or <code>mute</code> depending on <code>supported_features</code> of entity and the <code>mode</code> list specified in <code>entity_config</code>.</td>
</tr>
<tr>
<td>media_player</td>
<td>TelevisionMediaPlayer</td>
<td>All media players that have <code>tv</code> as their <code>device_class</code>.  Represented as Television and Remote accessories in HomeKit to control <code>on / off</code>, <code>play / pause</code>, <code>select source</code>, or <code>volume increase / decrease</code>, depending on <code>supported_features</code> of entity. Requires iOS 12.2/macOS 10.14.4 or later.</td>
</tr>
<tr>
<td>sensor</td>
<td>TemperatureSensor</td>
<td>All sensors that have <code>Celsius</code> or <code>Fahrenheit</code> as their <code>unit_of_measurement</code> or <code>temperature</code> as their <code>device_class</code>.</td>
</tr>
<tr>
<td>sensor</td>
<td>HumiditySensor</td>
<td>All sensors that have <code>%</code> as their <code>unit_of_measurement</code> and <code>humidity</code> as their <code>device_class</code>.</td>
</tr>
<tr>
<td>sensor</td>
<td>AirQualitySensor</td>
<td>All sensors that have <code>pm25</code> as part of their <code>entity_id</code> or <code>pm25</code> as their <code>device_class</code>
</td>
</tr>
<tr>
<td>sensor</td>
<td>CarbonMonoxideSensor</td>
<td>All sensors that have <code>co</code> as their <code>device_class</code>
</td>
</tr>
<tr>
<td>sensor</td>
<td>CarbonDioxideSensor</td>
<td>All sensors that have <code>co2</code> as part of their <code>entity_id</code> or <code>co2</code> as their <code>device_class</code>
</td>
</tr>
<tr>
<td>sensor</td>
<td>LightSensor</td>
<td>All sensors that have <code>lm</code> or <code>lx</code> as their <code>unit_of_measurement</code> or <code>illuminance</code> as their <code>device_class</code>
</td>
</tr>
<tr>
<td>switch</td>
<td>Switch</td>
<td>Represented as a switch by default but can be changed by using <code>type</code> within <code>entity_config</code>.</td>
</tr>
<tr>
<td>water_heater</td>
<td>WaterHeater</td>
<td>All <code>water_heater</code> devices.</td>
</tr>
</tbody>
</table>
<h2>
<a class="title-link" name="troubleshooting" href="#troubleshooting"></a> Troubleshooting</h2>
<h3>
<a class="title-link" name="deleting-the-homekitstate-file" href="#deleting-the-homekitstate-file"></a> Deleting the .homekit.state file</h3>
<p>The <code>.homekit.state</code> file can be found in the configurations directory. You might need to enable <code>view hidden files</code> to see it.</p>
<ol>
<li>
<strong>Stop</strong> Home Assistant</li>
<li>Delete the <code>.homekit.state</code> file</li>
<li>
<strong>Start</strong> Home Assistant</li>
</ol>
<h3>
<a class="title-link" name="errors-during-pairing" href="#errors-during-pairing"></a> Errors during pairing</h3>
<p>If you encounter any issues during pairing, make sure to:</p>
<ol>
<li>
<strong>Stop</strong> Home Assistant</li>
<li>Delete the <code>.homekit.state</code> file</li>
<li>Edit your configuration (see below)</li>
<li>
<strong>Start</strong> Home Assistant</li>
</ol>
<pre><code class="language-yaml">logger:
  default: warning
  logs:
    homeassistant.components.homekit: debug
    pyhap: debug

homekit:
  filter:
    include_entities:
      - demo.demo
</code></pre>
<h4>
<a class="title-link" name="pin-doesnt-appear-as-persistent-status" href="#pin-doesnt-appear-as-persistent-status"></a> PIN doesn’t appear as persistent status</h4>
<p>You might have paired the <code>Home Assistant Bridge</code> already. If not, delete the <code>.homekit.state</code> file (<a href="#deleting-the-homekitstate-file">guide</a>).</p>
<h4>
<a class="title-link" name="home-assistant-bridge-doesnt-appear-in-the-home-app-for-pairing" href="#home-assistant-bridge-doesnt-appear-in-the-home-app-for-pairing"></a> Home Assistant Bridge doesn’t appear in the Home App (for pairing)</h4>
<p>This is often setup and network related. Make sure to check the other issues below as well, but things that might work include:</p>
<ul>
<li>Check your router configuration</li>
<li>Try with WIFI <strong>and</strong> LAN</li>
<li>Change the default <a href="#port">port</a>
</li>
</ul>
<p>Remember that the iOS device needs to be in the same local network as the Home Assistant device for pairing.</p>
<h4>
<a class="title-link" name="home-assistant-bridge-doesnt-appear-in-the-home-app-for-pairing---docker" href="#home-assistant-bridge-doesnt-appear-in-the-home-app-for-pairing---docker"></a> Home Assistant Bridge doesn’t appear in the Home App (for pairing) - Docker</h4>
<p>Set <code>network_mode: host</code>. If you have further problems this <a href="https://github.com/home-assistant/home-assistant/issues/15692" rel="external nofollow">issue</a> might help.</p>
<p>You can also try to use <code>avahi-daemon</code> in reflector mode together with the option <code>advertise_ip</code>, see above.</p>
<h4>
<a class="title-link" name="home-assistant-bridge-doesnt-appear-in-the-home-app-for-pairing---virtualbox" href="#home-assistant-bridge-doesnt-appear-in-the-home-app-for-pairing---virtualbox"></a> Home Assistant Bridge doesn’t appear in the Home App (for pairing) - VirtualBox</h4>
<p>Configure the network mode as <code>networkbridge</code>. Otherwise the Home Assistant Bridge won’t be exposed to the network.</p>
<h4>
<a class="title-link" name="pairing-hangs---zeroconf-error" href="#pairing-hangs---zeroconf-error"></a> Pairing hangs - zeroconf error</h4>
<p>Pairing eventually fails, you might see and an error message <code>NonUniqueNameException</code>. Add the <code>safe_mode</code> option to your config, see <a href="#safe-mode">safe_mode</a>.</p>
<h4>
<a class="title-link" name="pairing-hangs---only-works-with-debug-config" href="#pairing-hangs---only-works-with-debug-config"></a> Pairing hangs - only works with debug config</h4>
<p>Pairing works fine when the filter is set to only include <code>demo.demo</code>, but fails with normal config. See <a href="#specific-entity-doesnt-work">specific entity doesn’t work</a></p>
<h4>
<a class="title-link" name="pairing-hangs---no-error" href="#pairing-hangs---no-error"></a> Pairing hangs - no error</h4>
<ol>
<li>Make sure that you don’t try to add more than 100 accessories, see <a href="#device-limit">device limit</a>. In rare cases, one of your entities doesn’t work with the HomeKit component. Use the <a href="#configure-filter">filter</a> to find out which one. Feel free to open a new issue in the <code>home-assistant</code> repo, so we can resolve it.</li>
<li>Check logs, and search for <code>Starting accessory Home Assistant Bridge on address</code>. Make sure Home Assistant Bridge hook ups to a correct interface. If it did not, explicitly set <code>homekit.ip_address</code> configuration variable.</li>
</ol>
<h4>
<a class="title-link" name="duplicate-aid-found-when-attempting-to-add-accessory" href="#duplicate-aid-found-when-attempting-to-add-accessory"></a> Duplicate AID found when attempting to add accessory</h4>
<p>Two of your entities share the same <code>entity_id</code>. Either resolve this or configure the <a href="#configure-filter">filter</a> to exclude them.</p>
<h3>
<a class="title-link" name="issues-during-normal-use" href="#issues-during-normal-use"></a> Issues during normal use</h3>
<h4>
<a class="title-link" name="some-of-my-devices-dont-show-up---z-wave--discovery" href="#some-of-my-devices-dont-show-up---z-wave--discovery"></a> Some of my devices don’t show up - Z-Wave / Discovery</h4>
<p>See <a href="#disable-auto-start">disable auto start</a></p>
<h4>
<a class="title-link" name="my-entity-doesnt-show-up" href="#my-entity-doesnt-show-up"></a> My entity doesn’t show up</h4>
<p>Check if the domain of your entity is <a href="#supported-components">supported</a>. If it is, check your <a href="#configure-filter">filter</a> settings. Make sure the spelling is correct, especially if you use <code>include_entities</code>.</p>
<h4>
<a class="title-link" name="homekit-doesnt-work-on-second-home-assistant-instance" href="#homekit-doesnt-work-on-second-home-assistant-instance"></a> HomeKit doesn’t work on second Home Assistant instance</h4>
<p>To use the HomeKit integration with to different Home Assistant instances on the same local network, you need to set a custom name for at least one of them. <a href="#name">config/name</a></p>
<h4>
<a class="title-link" name="specific-entity-doesnt-work" href="#specific-entity-doesnt-work"></a> Specific entity doesn’t work</h4>
<p>Although we try our best, some entities don’t work with the HomeKit integration yet. The result will be that either pairing fails completely or all Home Assistant accessories will stop working. Use the filter to identify which entity is causing the issue. It’s best to try pairing and step by step including more entities. If it works unpair and repeat until you find the one that is causing the issues. To help others and the developers, please open a new issue here: <a href="https://github.com/home-assistant/home-assistant/issues/new?labels=component:%20homekit" rel="external nofollow">home-assistant/issues/new</a></p>
<h4>
<a class="title-link" name="accessories-are-all-listed-as-not-responding" href="#accessories-are-all-listed-as-not-responding"></a> Accessories are all listed as not responding</h4>
<p>See <a href="#specific-entity-doesnt-work">specific entity doesn’t work</a></p>
<h4>
<a class="title-link" name="accessory-not-responding---after-restart-or-update" href="#accessory-not-responding---after-restart-or-update"></a> Accessory not responding - after restart or update</h4>
<p>See <a href="#device-limit">device limit</a></p>
<h4>
<a class="title-link" name="accessory-not-responding---randomly" href="#accessory-not-responding---randomly"></a> Accessory not responding - randomly</h4>
<p>Unfortunately, that sometimes happens at the moment. It might help to close the <code>Home</code> App and delete it from the cache. Usually, the accessory should get back to responding after a few minutes at most.</p>
<h4>
<a class="title-link" name="accessories-not-responding--behaving-unusual---upgrade-from-065x" href="#accessories-not-responding--behaving-unusual---upgrade-from-065x"></a> Accessories not responding / behaving unusual - Upgrade from 0.65.x</h4>
<p>To fix this, you need to unpair the <code>Home Assistant Bridge</code>, delete the <code>.homekit.state</code> file (<a href="#deleting-the-homekitstate-file">guide</a>) and pair it again. This should only be an issue if you’re upgrading from <code>0.65.x</code> or below.</p>
<h4>
<a class="title-link" name="the-linked-battery-sensor-isnt-recognized" href="#the-linked-battery-sensor-isnt-recognized"></a> The linked battery sensor isn’t recognized</h4>
<p>Try removing the entity from HomeKit and then adding it again. If you are adding this config option to an existing entity in HomeKit, any changes you make to this entity’s config options won’t appear until the accessory is removed from HomeKit and then re-added. See <a href="#resetting-accessories">resetting accessories</a>.</p>
<h4>
<a class="title-link" name="my-media-player-is-not-showing-up-as-a-television-accessory" href="#my-media-player-is-not-showing-up-as-a-television-accessory"></a> My media player is not showing up as a television accessory</h4>
<p>Media Player entities with <code>device_class: tv</code> will show up as Television accessories on  devices running iOS 12.2/macOS 10.14.4 or later. If needed, try removing the entity from HomeKit and then adding it again, especially if the <code>media_player</code> was previously exposed as a series of switches. Any changes, including changed supported features, made to an existing accessory won’t appear until the accessory is removed from HomeKit and then re-added. See <a href="#resetting-accessories">resetting accessories</a>.</p>
<h4>
<a class="title-link" name="cant-control-volume-of-your-tv-media-player" href="#cant-control-volume-of-your-tv-media-player"></a> Can’t control volume of your TV media player?</h4>
<p>The volume and play/pause controls will show up on the Remote app or Control Center. If your TV supports volume control through Home Assistant, you will be able to control the volume using the side volume buttons on the device while having the remote selected on screen.</p>
<h4>
<a class="title-link" name="resetting-accessories" href="#resetting-accessories"></a> Resetting accessories</h4>
<p>On Home Assistant <code>0.97.x</code> or later, you may use the service <code>homekit.reset_accessory</code> with one or more entity_ids to reset accessories whose configuration may have changed. This can be useful when changing a media_player’s device class to <code>tv</code>, linking a battery, or whenever Home Assistant adds support for new HomeKit features to existing entities.</p>
<p>On earlier versions of Home Assistant, you can reset accessories by removing the entity from HomeKit (via <a href="#configure-filter">filter</a>) and then re-adding the accessory.</p>
<p>With either strategy, the accessory will behave as if it’s the first time the accessory has been set up, so you will need to restore the name, group, room, scene, and/or automation settings.</p>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/homekit.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/apple-homekit.png' /></div><div class="section">
    <kb-alert-link integration="homekit"></kb-alert-link>
  </div><div class='section'>
      Introduced in release: 0.64
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/homekit/'>/components/homekit/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#voice'>Voice</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant"> 홈어시스턴트
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://cafe.naver.com/koreassistant'>HA 네이버 카페</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>Jekyll</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
