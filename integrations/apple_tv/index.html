<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Apple TV - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to integrate Apple TV devices into Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/apple_tv/">

    <meta property="fb:app_id" content="338291289691179">
    <meta property="og:title" content="Apple TV">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/apple_tv/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to integrate Apple TV devices into Home Assistant.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@home_assistant">
    
    <meta name="twitter:title" content="Apple TV">
    <meta name="twitter:description" content="Instructions on how to integrate Apple TV devices into Home Assistant.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.svg" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/apple_tv.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      Apple TV
    </h1>
  </header>
  <hr class="divider">
  

  <p>The <code>apple_tv</code> platform allows you to control an Apple TV (3rd and 4th generation). See the <a href="/integrations/apple_tv#remote">remote platform</a> if you want to send remote control buttons, e.g., arrow keys.</p>
<p>There is currently support for the following device types within Home Assistant:</p>
<ul>
<li>Media Player</li>
<li><a href="#remote">Remote</a></li>
</ul>
<div class="note">
Currently, you must have Home Sharing enabled for this to work. Support for pairing Home Assistant with your device will be supported in a later release.
</div>
<h2>
<a class="title-link" name="configuration" href="#configuration"></a> Configuration</h2>
<p>To use this component, you must first install some system libraries and a compiler. For Debian or a similar system, this should be enough:</p>
<pre><code class="language-shell">$ sudo apt-get install build-essential libssl-dev libffi-dev python-dev
</code></pre>
<p>If you want to discover new devices automatically, just make sure you have <code>discovery:</code> in your <code>configuration.yaml</code> file. To manually add one or more Apple TVs to your installation, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
apple_tv:
  - host: IP_1
    login_id: LOGIN_ID_1
    name: NAME_1
    start_off: START_OFF_1
    credentials: CREDENTIALS_1
  - host: IP_2
    login_id: LOGIN_ID_2
    name: NAME_2
    start_off: START_OFF_2
    credentials: CREDENTIALS_2
</code></pre>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="host" href="#host"></a> host</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The IP-address of the device.</p>
</span></p></dd>
<dt>
<a class="title-link" name="login_id" href="#login_id"></a> login_id</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>An identifier used to login to the device, see below.</p>
</span></p></dd>
<dt>
<a class="title-link" name="name" href="#name"></a> name</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>The name of the device used in the frontend.</p>
</span></p></dd>
<dt>
<a class="title-link" name="start_off" href="#start_off"></a> start_off</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean">boolean</span>)</span><span class="required">(Optional)</span><span class="description"><p>Set to true if the device should start in fake standby.</p>
</span></p>
<p class="default">
Default value: </p>
<p>false</p>
</dd>
<dt>
<a class="title-link" name="credentials" href="#credentials"></a> credentials</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Credentials used for AirPlay playback.</p>
</span></p></dd>
</dl>
</div>
<p>In order to connect to the device, you need a <em>login id</em>. The easiest way to obtain this identifier is to use the <code>apple_tv_scan</code> service (described below). Additional information about <code>start_off</code> and <code>credentials</code> can also be found under the guides section.</p>
<h2>
<a class="title-link" name="guides" href="#guides"></a> Guides</h2>
<h3>
<a class="title-link" name="scanning-for-devices" href="#scanning-for-devices"></a> Scanning for devices</h3>
<p>Make sure Home Sharing is enabled on the Apple TV.</p>
<p>To scan for devices and determine the <code>login_id</code>, open the developer tools by selecting the hammer icon in the sidebar. Once in the developer tools select <strong>services</strong>.</p>
<img src="/images/screenshots/developer-tools.png">
<p>Select <code>apple_tv</code> as domain and <code>apple_tv_scan</code> as service then press the button:</p>
<img src="/images/integrations/apple_tv/scan_start.jpg">
<p>Scanning will be done for three seconds and notification will be shown in the state view with all found devices:</p>
<img src="/images/integrations/apple_tv/scan_result.jpg">
<p>Alternatively, you may use the application <code>atvremote</code>. Install it with <code>pip3 install --upgrade pyatv</code> in your Home Assistant environment (note: do <em>not</em> use sudo). Then run <code>atvremote scan</code> to scan for all devices (try again if a device is missing):</p>
<pre><code class="language-bash">$ atvremote scan
Found Apple TVs:
 - Apple TV at 10.0.10.22 (login id: 00000000-1234-5678-9012-345678901234)

Note: You must use 'pair' with devices that have home sharing disabled
</code></pre>
<p>Just copy and paste the <code>login_id</code> from the device you want to add. For more details about <code>atvremote</code>, see: <a href="https://pyatv.readthedocs.io/en/master/atvremote.html" rel="external nofollow">this page</a>.</p>
<h3>
<a class="title-link" name="setting-up-device-authentication" href="#setting-up-device-authentication"></a> Setting up device authentication</h3>
<p>If you, when playing media with <code>play_url</code>, get the following error message:</p>
<p><em>“This AirPlay connection requires iOS 7.1 or later, OS X 10.10 or later, or iTunes 11.2 or later.”</em></p>
<p>then device authentication is required, open the developer tools by selecting the hammer icon in the sidebar. Once in the developer tools select <strong>services</strong>.</p>
<img src="/images/screenshots/developer-tools.png">
<p>Select <code>apple_tv</code> as domain, <code>apple_tv_authenticate</code> as service and enter <code>{"entity_id": "XXX"}</code> into “Service Data”, but replace XXX with the entity id of your device (e.g., <code>media_player.apple_tv</code>). Press the button and hopefully you are presented with an input dialog asking for a pin code:</p>
<img src="/images/integrations/apple_tv/auth_start.jpg">
<p>If no dialog appears, go back to the states view and display it from there (press <code>CONFIGURE</code> as displayed in the image):</p>
<img src="/images/integrations/apple_tv/auth_pin.jpg">
<p>A PIN code should now be visible on your TV, just enter it into the dialog and press “Confirm”. You should see if it succeeded in the state view. Copy the credentials and insert it into your configuration (make sure you copy everything, it should be 81 characters) after <code>credentials:</code> with no line-break:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
apple_tv:
  - host: 10.0.0.20
    login_id: 00000000-1234-5678-9012-345678901234
    credentials: 1B8C387DDB59BDF6:CF5ABB6A2C070688F5926ADB7C010F6DF847252C15F9BDB6DA3E09D6591E90E5
</code></pre>
<p>Restart Home Assistant, and you should now be able to use <code>play_url</code> as before.</p>
<h3>
<a class="title-link" name="my-apple-tv-turns-on-when-i-restart-home-assistant" href="#my-apple-tv-turns-on-when-i-restart-home-assistant"></a> My Apple TV turns on when I restart Home Assistant</h3>
<p>The Apple TV will automatically turn on if a request is sent to it, e.g., if a button is pressed, something is streamed to it via AirPlay or if current state (currently playing) is accessed. This is how Apple has designed it, and it will cause problems if you are using HDMI-CEC. Every time Home Assistant is started, a new request is sent to the device to figure out what is currently playing. When using CEC, this will wake up your TV and other devices you have configured.</p>
<p>So, if your TV is randomly turning on, this is probably the reason. As stated, this is by design, and there is no real fix for it. There’s also no known way to turn off the Apple TV via the protocol used for communication. You have the following options:</p>
<ul>
<li>Do not use this platform</li>
<li>Disable HDMI-CEC on your Apple TV</li>
<li>Use “fake standby”</li>
</ul>
<p>The first two points are quite obvious. Fake standby is a concept implemented in this platform that disables all requests to the device and makes it appear as being “off” in the web interface. This will make sure that the device is not woken up, but it will of course not show any information or allow you to control it. It is however easy to turn it on (or off) in the web interface or to use an automation with <code>turn_on</code>. To make it more useful, you can write automations that turn it on or off depending on some other device, like the input source on your receiver.</p>
<p>To put a device into fake standby when starting Home Assistant, add <code>start_off: true</code> to your configuration.</p>
<div class="note warning">
Turning the device on/off in the user interface will *not* turn the physical device on/off according to the description above.
</div>
<h2>
<a class="title-link" name="services" href="#services"></a> Services</h2>
<h3>
<a class="title-link" name="service-apple_tv_authenticate" href="#service-apple_tv_authenticate"></a> Service apple_tv_authenticate</h3>
<p>To play media on an Apple TV with device authentication enabled (e.g., ATV4 with tvOS 10.2+), Home Assistant must be properly authenticated. This method starts the process and presents the credentials needed for playback as a persistent notification. Please see guide above for usage.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>yes</td>
<td>String or list of strings that point at <code>entity_id</code>s of Apple TVs.</td>
</tr>
</tbody>
</table>
<h3>
<a class="title-link" name="service-apple_tv_scan" href="#service-apple_tv_scan"></a> Service apple_tv_scan</h3>
<p>Scans the local network for Apple TVs. All found devices are presented as a persistent notification.</p>
<h2>
<a class="title-link" name="remote" href="#remote"></a> Remote</h2>
<p>The <code>apple_tv</code> remote platform allows you to send remote control buttons to an Apple TV. It is automatically setup when an Apple TV is configured.</p>
<p>At the moment, the following buttons are supported:</p>
<ul>
<li>up</li>
<li>down</li>
<li>left</li>
<li>right</li>
<li>menu</li>
<li>top_menu</li>
<li>select</li>
</ul>
<p>A typical service call for press several buttons looks like this.</p>
<pre><code class="language-yaml">service: remote.send_command
data:
  entity_id: remote.apple_tv
  command:
    - left
    - left
    - menu
    - select
</code></pre>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/apple_tv.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/apple.png' /></div><div class="section">
    <kb-alert-link integration="apple_tv"></kb-alert-link>
  </div><div class='section'>
      IoT class<sup><a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'><i class="icon-info-sign"></i></a></sup>: Local Push
    </div><div class='section'>
      Introduced in release: 0.49
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/apple_tv/'>/components/apple_tv/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#multimedia'>Multimedia</a>
      </li><li>
        <a href='/integrations/#media-player'>Media Player</a>
      </li><li>
        <a href='/integrations/#remote'>Remote</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img width="40" src="/images/favicon-192x192-full.png" alt="Home Assistant"> 홈어시스턴트
          </div>
          <div class="icons">
            <a rel="me" href='https://twitter.com/home_assistant' title="Twitter"><i class="icon-twitter"></i></a>
            <a rel="me" href='https://www.facebook.com/homeassistantio' title="Facebook"><i class="icon-facebook"></i></a>
            <a rel="me" href='https://github.com/home-assistant/home-assistant' title="GitHub"><i class="icon-github"></i></a>
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://developers.home-assistant.io'>Developers</a></li>
            <li><a href='https://data.home-assistant.io'>Data Science</a></li>
            <li><a href='mailto:hello@home-assistant.io'>Contact</a> (no support!)</li>
            <li><a href='/security/'>Security Vulnerabilities</a></li>
            <li><a href='/privacy/'>Privacy</a></li>
            <li><a href='https://status.home-assistant.io'>System Status</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>지킬</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount','UA-57927901-1'],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
