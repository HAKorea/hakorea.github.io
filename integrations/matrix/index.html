<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Matrix - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Matrix chatbot support">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/matrix/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Matrix">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/matrix/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Matrix chatbot support">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="Matrix">
    <meta name="twitter:description" content="Matrix chatbot support">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li><a href='#' class='show-search'><i class="icon-search"></i></a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/matrix.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      Matrix
    </h1>
  </header>
  <hr class="divider">
  

  <p>This integration allows you to send messages to matrix rooms, as well as to react to messages in matrix rooms. Reacting to commands is accomplished by firing an event when one of the configured commands is triggered.</p>
<p>There is currently support for the following device types within Home Assistant:</p>
<ul>
<li><a href="#notifications">Notifications</a></li>
</ul>
<h2>
<a class="title-link" name="configuration" href="#configuration"></a> Configuration</h2>
<pre><code class="language-yaml"># Example configuration.yaml entry
matrix:
  homeserver: https://matrix.org
  username: "@my_matrix_user:matrix.org"
  password: supersecurepassword
  rooms:
    - "#hasstest:matrix.org"
  commands:
    - word: my_command
      name: my_command
</code></pre>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="username" href="#username"></a> username</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The matrix username that Home Assistant should use to log in. <em>Note</em>: You must specify a full matrix ID here, including the homeserver domain, e.g., ‘@my_matrix_bot:matrix.org’. Please note also that the ‘@’ character has a special meaning in YAML, so this must always be given in quotes.</p>
</span></p></dd>
<dt>
<a class="title-link" name="password" href="#password"></a> password</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The password for your Matrix account.</p>
</span></p></dd>
<dt>
<a class="title-link" name="homeserver" href="#homeserver"></a> homeserver</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The full URL for your homeserver. If you use the default matrix.org homeserver, this is ‘<a href="https://matrix.org" rel="external nofollow">https://matrix.org</a>’.</p>
</span></p></dd>
<dt>
<a class="title-link" name="verify_ssl" href="#verify_ssl"></a> verify_ssl</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Verify the homeservers certificate.</p>
</span></p>
<p class="default">
Default value: </p>
<p>true</p>
</dd>
<dt>
<a class="title-link" name="rooms" href="#rooms"></a> rooms</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>The list of rooms that the bot should join and listen for commands (see below) in. While you can limit the list of rooms that a certain command applies to on a per-command basis (see below), you must still list all rooms here that commands should be received in. Rooms can be given either by their internal ID (e.g., ‘!cURbafjkfsMDVwdRDQ:matrix.org’) or any of their aliases (e.g., ‘#matrix:matrix.org’).</p>
</span></p>
<p class="default">
Default value: </p>
<p>empty</p>
</dd>
<dt>
<a class="title-link" name="commands" href="#commands"></a> commands</dt>
<dd>
<p class="desc"><span class="type">(<span class="map">map</span>)</span><span class="required">(Optional)</span><span class="description"><p>A list of commands that the bot should listen for. If a command is triggered (via its <em>word</em> or <em>expression</em>, see below), an event is fired that you can handle using automations. Every command consists of these possible configuration options:</p>
</span></p>
<p class="default">
Default value: </p>
<p>empty</p>
</dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="word" href="#word"></a> word</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Specifies a word that the bot should listen for. If you specify ‘my_command’ here, the bot will react to any message starting with ‘!my_command’.</p>
</span></p></dd>
<dt>
<a class="title-link" name="expression" href="#expression"></a> expression</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Specifies a regular expression (in python regexp syntax) that the bot should listen to. The bot will react to any message that matches the regular expression.</p>
</span></p></dd>
<dt>
<a class="title-link" name="name" href="#name"></a> name</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The name of the command. This will be an attribute of the event that is fired when this command triggers.</p>
</span></p></dd>
<dt>
<a class="title-link" name="rooms" href="#rooms"></a> rooms</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>A list of rooms that the bot should listen for this command in. If this is not given, the <em>rooms</em> list from the main config is used. Please note that every room in this list must also be in the main <em>room</em> config.</p>
</span></p>
<p class="default">
Default value: </p>
<p>empty</p>
</dd>
</dl></dd>
</dl>
</div>
<h3>
<a class="title-link" name="event-data" href="#event-data"></a> Event Data</h3>
<p>If a command is triggered, a <code>matrix_command</code> event is fired. The event contains the name of the command in the <code>name</code> field.</p>
<p>If the command is a word command, the <code>data</code> field contains a list of the command’s arguments, i.e., everything that stood behind the word, split at spaces. If the command is an expression command, the <code>data</code> field contains the <a href="https://docs.python.org/3.6/library/re.html?highlight=re#re.match.groupdict" rel="external nofollow">group dictionary</a> of the regular expression that matched the message.</p>
<h3>
<a class="title-link" name="comprehensive-configuration-example" href="#comprehensive-configuration-example"></a> Comprehensive Configuration Example</h3>
<p>This example also uses the <a href="#notifications">matrix <code>notify</code> platform</a>.</p>
<pre><code class="language-yaml"># The Matrix component
matrix:
  homeserver: https://matrix.org
  username: "@my_matrix_user:matrix.org"
  password: supersecurepassword
  rooms:
    - "#hasstest:matrix.org"
    - "#someothertest:matrix.org"
  commands:
    - word: testword
      name: testword
      rooms:
        - "#someothertest:matrix.org"
    - expression: "My name is (?P&lt;name&gt;.*)"
      name: introduction

notify:
  - name: matrix_notify
    platform: matrix
    default_room: "#hasstest:matrix.org"

automation:
  - alias: 'React to !testword'
    trigger:
      platform: event
      event_type: matrix_command
      event_data:
        command: testword
    action:
      service: notify.matrix_notify
      data:
        message: 'It looks like you wrote !testword'
  - alias: 'React to an introduction'
    trigger:
      platform: event
      event_type: matrix_command
      event_data:
        command: introduction
    action:
      service: notify.matrix_notify
      data_template:
        message: "Hello {{trigger.event.data.args['name']}}"
</code></pre>
<p>This configuration will:</p>
<ul>
<li>Listen for “!testword” in the room “#someothertest:matrix.org” (and <em>only</em>) there. If such a message is encountered, it will answer with “It looks like you wrote !testword” into the “#hasstest:matrix.org” channel.</li>
<li>Listen in both rooms for any message matching “My name is <any string>” and answer with “Hello <the string>” into “#hasstest:matrix.org”.</the></any>
</li>
</ul>
<h2>
<a class="title-link" name="notifications" href="#notifications"></a> Notifications</h2>
<p>The <code>matrix</code> platform allows you to deliver notifications from Home Assistant to a <a href="https://matrix.org/" rel="external nofollow">Matrix</a> room. Rooms can be both direct as well as group chats.</p>
<p>To enable Matrix notifications in your installation, you first need to configure the <a href="#configuration">Matrix component</a>. Then, add the following to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
notify:
  - name: NOTIFIER_NAME
    platform: matrix
    default_room: ROOM_ID_OR_ALIAS
</code></pre>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="name" href="#name"></a> name</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>Setting the optional parameter <code>name</code> allows multiple notifiers to be created. The notifier will bind to the service <code>notify.NOTIFIER_NAME</code>.</p>
</span></p>
<p class="default">
Default value: </p>
<p>notify</p>
</dd>
<dt>
<a class="title-link" name="default_room" href="#default_room"></a> default_room</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>The room all messages will be sent to, when no other target is given.</p>
</span></p></dd>
</dl>
</div>
<p>The target room has to be precreated, the room id can be obtained from the rooms settings dialog. Rooms by default have a canonical id of the form <code>"!&lt;randomid&gt;:homeserver.tld"</code>, but can also be allocated aliases like <code>"#roomname:homeserver.tld"</code>. Make sure to use quotes around the room id or alias to escape special characters (<code>!</code>, and <code>#</code>) in YAML. The notifying account may need to be invited to the room, depending on the individual rooms policies.</p>
<p>To use notifications, please see the <a href="/getting-started/automation/">getting started with automation page</a>.</p>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/matrix.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/matrix.png' /></div><div class="section">
    <kb-alert-link integration="matrix"></kb-alert-link>
  </div><div class='section'>
      Introduced in release: 0.69
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/matrix/'>/components/matrix/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#hub'>Hub</a>
      </li><li>
        <a href='/integrations/#notifications'>Notifications</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant"> 홈어시스턴트
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://cafe.naver.com/koreassistant'>HA 네이버 카페</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>Jekyll</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
