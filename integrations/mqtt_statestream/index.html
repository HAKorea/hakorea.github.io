<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>MQTT Statestream - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to setup MQTT Statestream within Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/mqtt_statestream/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="MQTT Statestream">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/mqtt_statestream/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to setup MQTT Statestream within Home Assistant.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="MQTT Statestream">
    <meta name="twitter:description" content="Instructions on how to setup MQTT Statestream within Home Assistant.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/mqtt_statestream.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      MQTT Statestream
    </h1>
  </header>
  <hr class="divider">
  

  <p>The <code>mqtt_statestream</code> integration publishes state changes in Home Assistant to individual MQTT topics.</p>
<h2>
<a class="title-link" name="configuration" href="#configuration"></a> Configuration</h2>
<p>To enable MQTT Statestream in Home Assistant, add the following section to your <code>configuration.yaml</code> file:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
mqtt_statestream:
  base_topic: homeassistant
  publish_attributes: true
  publish_timestamps: true
</code></pre>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="base_topic" href="#base_topic"></a> base_topic</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>Base topic used to generate the actual topic used to publish.</p>
</span></p></dd>
<dt>
<a class="title-link" name="publish_attributes" href="#publish_attributes"></a> publish_attributes</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean">boolean</span>)</span><span class="required">(Optional)</span><span class="description"><p>Publish attributes of the entity as well as the state.</p>
</span></p>
<p class="default">
Default value: </p>
<p>false</p>
</dd>
<dt>
<a class="title-link" name="publish_timestamps" href="#publish_timestamps"></a> publish_timestamps</dt>
<dd>
<p class="desc"><span class="type">(<span class="boolean">boolean</span>)</span><span class="required">(Optional)</span><span class="description"><p>Publish the last_changed and last_updated timestamps for the entity.</p>
</span></p>
<p class="default">
Default value: </p>
<p>false</p>
</dd>
<dt>
<a class="title-link" name="exclude" href="#exclude"></a> exclude</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>Configure which integrations should be excluded from recordings. See <em>Include/Exclude</em> section below for details.</p>
</span></p></dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="entities" href="#entities"></a> entities</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>The list of entity ids to be excluded from recordings.</p>
</span></p></dd>
<dt>
<a class="title-link" name="domains" href="#domains"></a> domains</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>The list of domains to be excluded from recordings.</p>
</span></p></dd>
</dl></dd>
<dt>
<a class="title-link" name="include" href="#include"></a> include</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>Configure which integrations should be included in recordings. If set, all other entities will not be recorded.</p>
</span></p></dd>
<dd><dl class="nested">
<dt>
<a class="title-link" name="entities" href="#entities"></a> entities</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>The list of entity ids to be included from recordings.</p>
</span></p></dd>
<dt>
<a class="title-link" name="domains" href="#domains"></a> domains</dt>
<dd><p class="desc"><span class="type">(<span class="list">list</span>)</span><span class="required">(Optional)</span><span class="description"><p>The list of domains to be included from recordings.</p>
</span></p></dd>
</dl></dd>
</dl>
</div>
<h2>
<a class="title-link" name="operation" href="#operation"></a> Operation</h2>
<p>When any Home Assistant entity changes, this integration will publish that change to MQTT.</p>
<p>The topic for each entity is different, so you can easily subscribe other systems to just the entities you are interested in.
The topic will be in the form <code>base_topic/domain/entity/state</code>.</p>
<p>For example, with the example configuration above, if an entity called ‘light.master_bedroom_dimmer’ is turned on, this integration will publish <code>on</code> to <code>homeassistant/light/master_bedroom_dimmer/state</code>.</p>
<p>If that entity also has an attribute called <code>brightness</code>, the integration will also publish the value of that attribute to <code>homeassistant/light/master_bedroom_dimmer/brightness</code>.</p>
<p>All states and attributes are passed through JSON serialization before publishing. <strong>Please note</strong> that this causes strings to be quoted (e.g., the string ‘on’ will be published as ‘“on”’). You can access the JSON deserialized values (as well as unquoted strings) at many places by using <code>value_json</code> instead of <code>value</code>.</p>
<p>The last_updated and last_changed values for the entity will be published to <code>homeassistant/light/master_bedroom_dimmer/last_updated</code> and <code>homeassistant/light/master_bedroom_dimmer/last_changed</code>, respectively. The timestamps are in ISO 8601 format - for example, <code>2017-10-01T23:20:30.920969+00:00</code>.</p>
<h2>
<a class="title-link" name="includeexclude" href="#includeexclude"></a> Include/exclude</h2>
<p>The <strong>exclude</strong> and <strong>include</strong> configuration variables can be used to filter the items that are published to MQTT.</p>
<p>1. If neither <strong>exclude</strong> or <strong>include</strong> are specified, all entities are published.</p>
<p>2. If only <strong>exclude</strong> is specified, then all entities except the ones listed are published.</p>
<pre><code class="language-yaml"># Example of excluding entities
mqtt_statestream:
  base_topic: homeassistant
  exclude:
    domains:
      - switch
    entities:
      - sensor.nopublish
</code></pre>
<p>In the above example, all entities except for <em>switch.x</em> and <em>sensor.nopublish</em> will be published to MQTT.</p>
<p>3. If only <strong>include</strong> is specified, then only the specified entries are published.</p>
<pre><code class="language-yaml"># Example of excluding entities
mqtt_statestream:
  base_topic: homeassistant
  include:
    domains:
      - sensor
    entities:
      - lock.important
</code></pre>
<p>In this example, only <em>sensor.x</em> and <em>lock.important</em> will be published.</p>
<p>4. If both <strong>include</strong> and <strong>exclude</strong> are specified then all entities specified by <strong>include</strong> are published except for the ones
specified by <strong>exclude</strong>.</p>
<pre><code class="language-yaml"># Example of excluding entities
mqtt_statestream:
  base_topic: homeassistant
  include:
    domains:
      - sensor
  exclude:
    entities:
      - sensor.noshow
</code></pre>
<p>In this example, all sensors except for <em>sensor.noshow</em> will be published.</p>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/mqtt_statestream.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/mqtt.png' /></div><div class="section">
    <kb-alert-link integration="mqtt_statestream"></kb-alert-link>
  </div><div class='section'>
      IoT class<sup><a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'><i class="icon-info-sign"></i></a></sup>: Configurable
    </div><div class='section'>
      Introduced in release: 0.54
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/mqtt_statestream/'>/components/mqtt_statestream/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#other'>Other</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant"> 홈어시스턴트
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://cafe.naver.com/koreassistant'>HA 네이버 카페</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>Jekyll</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
