<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Dialogflow - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how integrate Dialogflow with Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/dialogflow/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="Dialogflow">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/dialogflow/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how integrate Dialogflow with Home Assistant.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="Dialogflow">
    <meta name="twitter:description" content="Instructions on how integrate Dialogflow with Home Assistant.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/dialogflow.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      Dialogflow
    </h1>
  </header>
  <hr class="divider">
  

  <p>The <code>dialogflow</code> integration is designed to be used with the <a href="https://dialogflow.com/docs/fulfillment#webhook" rel="external nofollow">webhook</a> integration of <a href="https://dialogflow.com/" rel="external nofollow">Dialogflow</a>. When a conversation ends with a user, Dialogflow sends an action and parameters to the webhook.</p>
<p>To be able to receive messages from DialogFlow, your Home Assistant instance needs to be accessible from the web (<a href="/addons/duckdns/">Hass.io instructions</a>) and you need to have the <code>base_url</code> configured for the HTTP integration (<a href="/integrations/http/#base_url">docs</a>). Dialogflow will return fallback answers if your server does not answer or takes too long (more than 5 seconds).</p>
<p>Dialogflow could be <a href="https://dialogflow.com/docs/integrations/" rel="external nofollow">integrated</a> with many popular messaging, virtual assistant and IoT platforms.</p>
<p>Using Dialogflow will be easy to create conversations like:</p>
<p><em>User: What is the temperature at home?</em></p>
<p><em>Bot: The temperature is 34 degrees</em></p>
<p><em>User: Turn on the light</em></p>
<p><em>Bot: In which room?</em></p>
<p><em>User: In the kitchen</em></p>
<p><em>Bot: Turning on kitchen light</em></p>
<p>To use this integration, you should define a conversation (intent) in Dialogflow, configure Home Assistant with the speech to return and, optionally, the action to execute.</p>
<h3>
<a class="title-link" name="configuring-your-dialogflow-account" href="#configuring-your-dialogflow-account"></a> Configuring your Dialogflow account</h3>
<p>To get the webhook URL, go to the integrations page in the configuration screen and find “Dialogflow”. Click on “configure”. Follow the instructions on the screen.</p>
<ul>
<li>
<a href="https://console.dialogflow.com/" rel="external nofollow">Login</a> with your Google account</li>
<li>Click on “Create Agent”</li>
<li>Select name, language (if you are planning to use Google Actions check their <a href="https://support.google.com/assistant/answer/7108196?hl=en" rel="external nofollow">supported languages</a>) and time zone</li>
<li>Click “Save”</li>
<li>Now go to “Fulfillment” (in the left menu)</li>
<li>Enable Webhook and set your Dialogflow webhook url as the endpoint, e.g., <code>https://myhome.duckdns.org/api/webhook/800b4cb4d27d078a8871656a90854a292651b20635685f8ea23ddb7a09e8b417</code>
</li>
<li>Click “Save”</li>
<li>Create a new intent</li>
<li>Below “User says” write one phrase that you, the user, will tell Dialogflow, e.g., <code>What is the temperature at home?</code>
</li>
<li>In “Action” set some key (this will be the bind with Home Assistant configuration), e.g.,: GetTemperature</li>
<li>In “Response” set “Cannot connect to Home Assistant or it is taking to long” (fall back response)</li>
<li>At the end of the page, click on “Fulfillment” and check “Use webhook”</li>
<li>Click “Save”</li>
<li>On the top right, where is written “Try it now…”, write, or say, the phrase you have previously defined and hit enter</li>
<li>Dialogflow has send a request to your Home Assistant server</li>
</ul>
<div class="note warning">
<p>The V1 api will be deprecated on October 23, 2019. If you are still using the V1 API, it is recommended to change your settings in Dialogflow to use the V2 API. No changes to your intents yaml configuration need to take place after upgrading to the V2 API. Change to the V2 API by clicking on the cog button <a href="https://console.dialogflow.com/" rel="external nofollow">here</a> and then select the V2 API.</p>
</div>
<p>Take a look to “Integrations”, in the left menu, to configure third parties.</p>
<h3>
<a class="title-link" name="configuring-home-assistant" href="#configuring-home-assistant"></a> Configuring Home Assistant</h3>
<p>When activated, the <a href="/integrations/alexa/"><code>alexa</code> integration</a> will have Home Assistant’s native intent support handle the incoming intents. If you want to run actions based on intents, use the <a href="/integrations/intent_script"><code>intent_script</code></a> integration.</p>
<h2>
<a class="title-link" name="examples" href="#examples"></a> Examples</h2>
<p>Download <a href="https://github.com/home-assistant/home-assistant.io/blob/next/source/assets/HomeAssistant_APIAI.zip" rel="external nofollow">this zip</a> and load it in your Dialogflow agent (<strong>Settings</strong> -&gt; <strong>Export and Import</strong>) for examples intents to use with this configuration:</p>
<pre><code class="language-yaml"># Example configuration.yaml entry
dialogflow:

intent_script:
  Temperature:
    speech:
      text: The temperature at home is {{ states('sensor.home_temp') }} degrees
  LocateIntent:
    speech:
      text: &gt;
        {%- for state in states.device_tracker -%}
          {%- if state.name.lower() == User.lower() -%}
            {{ state.name }} is at {{ state.state }}
          {%- elif loop.last -%}
            I am sorry, I do not know where {{ User }} is.
          {%- endif -%}
        {%- else -%}
          Sorry, I don't have any trackers registered.
        {%- endfor -%}
  WhereAreWeIntent:
    speech:
      text: &gt;
        {%- if is_state('device_tracker.adri', 'home') and
               is_state('device_tracker.bea', 'home') -%}
          You are both home, you silly
        {%- else -%}
          Bea is at {{ states("device_tracker.bea") }}
          and Adri is at {{ states("device_tracker.adri") }}
        {% endif %}
  TurnLights:
    speech:
      text: Turning {{ Room }} lights {{ OnOff }}
    action:
      - service: notify.pushbullet
        data_template:
          message: Someone asked via apiai to turn {{ Room }} lights {{ OnOff }}
      - service_template: &gt;
          {%- if OnOff == "on" -%}
            switch.turn_on
          {%- else -%}
            switch.turn_off
          {%- endif -%}
        data_template:
          entity_id: "switch.light_{{ Room | replace(' ', '_') }}"
</code></pre>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/dialogflow.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/dialogflow.png' /></div><div class="section">
    <kb-alert-link integration="dialogflow"></kb-alert-link>
  </div><div class='section'>
      Introduced in release: 0.56
    </div><div class='section'>
      This integration is configurable via UI
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/dialogflow/'>/components/dialogflow/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#voice'>Voice</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant"> 홈어시스턴트
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://cafe.naver.com/koreassistant'>HA 네이버 카페</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>Jekyll</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'ae96d94b201c5444c8a443093edf3efb',
  indexName: 'home-assistant',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
