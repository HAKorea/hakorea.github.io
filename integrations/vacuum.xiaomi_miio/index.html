<!doctype html>
  <!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>샤오미 Mi Robot Vacuum - 홈어시스턴트</title>
    <meta name="author" content="Home Assistant">
    <meta name="description" content="Instructions on how to integrate your Xiaomi Mi Robot Vacuum within Home Assistant.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://hakorea.github.io/integrations/vacuum.xiaomi_miio/">

    <meta property="fb:app_id" content="">
    <meta property="og:title" content="샤오미 Mi Robot Vacuum">
    <meta property="og:site_name" content="홈어시스턴트">
    <meta property="og:url" content="https://hakorea.github.io/integrations/vacuum.xiaomi_miio/">
    <meta property="og:type" content="article">
    <meta property="og:description" content="Instructions on how to integrate your Xiaomi Mi Robot Vacuum within Home Assistant.">
    <meta property="og:image" content="https://hakorea.github.io/images/default-social.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    
    <meta name="twitter:title" content="샤오미 Mi Robot Vacuum">
    <meta name="twitter:description" content="Instructions on how to integrate your Xiaomi Mi Robot Vacuum within Home Assistant.">
    <meta name="twitter:image" content="https://hakorea.github.io/images/default-social.png">

    <link href="/stylesheets/prism.css?8acb84bc0387c9548a63998fcfea0139" rel="stylesheet">
    <link href="/stylesheets/screen.css?0a23d70030bf362ca935e76ccc50922c" media="screen, projection, print" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="홈어시스턴트" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />
  </head>

  <body >

    <header class='site-header'>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item three-tenths lap-two-sixths palm-one-whole ha-title">
      <a href="/" class="site-title">
        <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant">
        <span>홈어시스턴트</span>
      </a>
    </div>

    <div class="grid__item seven-tenths lap-four-sixths palm-one-whole">
      <nav>
        <input type="checkbox" id="toggle">
        <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
        <ul class="menu pull-right">
            
            <li><a href="/getting-started/">시작하기</a></li>
            <li><a href="/integrations/">통합구성요소</a></li>
            <li><a href="/docs/">문서</a></li>
            <li><a href="/cookbook/">예제</a></li>
            <li><a href='#' class='show-search'><i class="icon-search"></i></a></li>
            <li>KOREAN(not official)</li>
        </ul>
      </nav>

      <div class='search-container' style='display: none'>
        <div class='search'>
          <i class="icon-search"></i>
          <input id='search' placeholder='Search the docs…'>
          <a href='#' class='close'><i class="icon-remove-sign"></i></a>
        </div>
      </div>
    </div>
  </div>
</div>

    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          
            <article class="page">
  
  
    

<div class="edit-github"><a href="https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/vacuum.xiaomi_miio.markdown" rel="external nofollow">깃허브 편집</a></div>


  

  
  <header>
    <h1 class="title indent">
      샤오미 Mi Robot Vacuum
    </h1>
  </header>
  <hr class="divider">
  

  <p><code>xiaomi_miio</code> 진공청소기 플랫폼을 사용하면 <a href="https://www.mi.com/roomrobot/" rel="external nofollow">Xiaomi Mi Robot Vacuum</a>의 상태를 제어 할 수 있습니다</p>
<p>현재 지원되는 서비스 :</p>
<ul>
<li><code>start</code></li>
<li><code>pause</code></li>
<li><code>stop</code></li>
<li><code>return_to_base</code></li>
<li><code>clean_spot</code></li>
<li>
<code>set_fan_speed</code>
팬속도 : <code>Silent</code>, <code>Standard</code>, <code>Medium</code>, <code>Turbo</code>, <code>Gentle</code> (걸레 전용).</li>
<li>
<code>remote_control_*</code> (로봇용)</li>
<li><code>xiaomi_clean_zone</code></li>
</ul>
<h2>
<a class="title-link" name="" href="#"></a> 설정</h2>
<p><code>configuration.yaml</code> 에서 사용할 API 토큰을 검색 하려면 <a href="/integrations/vacuum.xiaomi_miio/#retrieving-the-access-token">Retrieving the Access Token</a> 을 따르십시오.</p>
<p>설비에 진공을 추가하려면 <code>configuration.yaml</code>에 다음을 추가하십시오 :</p>
<pre><code class="language-yaml">vacuum:
  - platform: xiaomi_miio
    host: 192.168.1.2
    token: YOUR_TOKEN
</code></pre>
<div class="config-vars">
  <h3>
<a class="title-link" name="configuration-variables" href="#configuration-variables"></a> Configuration Variables</h3>
  <dl class="">
<dt>
<a class="title-link" name="host" href="#host"></a> host</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>로봇의 IP 주소.</p>
</span></p></dd>
<dt>
<a class="title-link" name="token" href="#token"></a> token</dt>
<dd><p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Required)</span><span class="description"><p>로봇의 API 토큰.</p>
</span></p></dd>
<dt>
<a class="title-link" name="name" href="#name"></a> name</dt>
<dd>
<p class="desc"><span class="type">(<span class="string">string</span>)</span><span class="required">(Optional)</span><span class="description"><p>로봇의 이름.</p>
</span></p>
<p class="default">
Default value: </p>
<p>Xiaomi Vacuum cleaner</p>
</dd>
</dl>
</div>
<h2>
<a class="title-link" name="-" href="#-"></a> 플랫폼 서비스</h2>
<ul>
<li><code>xiaomi_miio.vacuum_remote_control_start</code></li>
<li><code>xiaomi_miio.vacuum_remote_control_stop</code></li>
<li><code>xiaomi_miio.vacuum_remote_control_move</code></li>
<li><code>xiaomi_miio.vacuum_remote_control_move_step</code></li>
<li><code>xiaomi_miio.vacuum_clean_zone</code></li>
</ul>
<h3>
<a class="title-link" name="xiaomi_miiovacuum_remote_control_start-" href="#xiaomi_miiovacuum_remote_control_start-"></a> xiaomi_miio.vacuum_remote_control_start 서비스</h3>
<p>로봇의 원격 제어 모드를 시작하십시오. 그런 다음 <code>remote_control_move</code>로 이동할 수 있습니다; 완료되면 <code>remote_control_stop</code>을 호출하십시오.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>no</td>
<td>특정 로봇에서만 작동</td>
</tr>
</tbody>
</table>
<h3>
<a class="title-link" name="xiaomi_miiovacuum_remote_control_stop-" href="#xiaomi_miiovacuum_remote_control_stop-"></a> xiaomi_miio.vacuum_remote_control_stop 서비스</h3>
<p>로봇의 원격 제어 모드를 종료하십시오.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>no</td>
<td>특정 로봇에서만 작동</td>
</tr>
</tbody>
</table>
<h3>
<a class="title-link" name="xiaomi_miiovacuum_remote_control_move-" href="#xiaomi_miiovacuum_remote_control_move-"></a> xiaomi_miio.vacuum_remote_control_move 서비스</h3>
<p>로봇을 원격 제어하십시오. <code>remote_control_start</code> 로 리모컨 모드에서 먼저 설정하십시오.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>no</td>
<td>특정 로봇에서만 작동</td>
</tr>
<tr>
<td><code>velocity</code></td>
<td>no</td>
<td>속도 : -0.29와 0.29 사이</td>
</tr>
<tr>
<td><code>rotation</code></td>
<td>no</td>
<td>회전 : -179도에서 179도 사이</td>
</tr>
<tr>
<td><code>duration</code></td>
<td>no</td>
<td>로봇이 움직일 수 있는 시간 (밀리 초)</td>
</tr>
</tbody>
</table>
<h3>
<a class="title-link" name="xiaomi_miiovacuum_remote_control_move_step-" href="#xiaomi_miiovacuum_remote_control_move_step-"></a> xiaomi_miio.vacuum_remote_control_move_step 서비스</h3>
<p>원격 제어 모드로 들어가서, 한 번 움직이고 멈춘뒤, 원격 모드를 종료하십시오.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>no</td>
<td>특정 로봇에서만 작동</td>
</tr>
<tr>
<td><code>velocity</code></td>
<td>no</td>
<td>속도 : -0.29와 0.29 사이</td>
</tr>
<tr>
<td><code>rotation</code></td>
<td>no</td>
<td>회전 : -179도에서 179도 사이</td>
</tr>
<tr>
<td><code>duration</code></td>
<td>no</td>
<td>로봇이 움직일 수 있는 시간 (밀리 초)</td>
</tr>
</tbody>
</table>
<h3>
<a class="title-link" name="xiaomi_miiovacuum_clean_zone-" href="#xiaomi_miiovacuum_clean_zone-"></a> xiaomi_miio.vacuum_clean_zone 서비스</h3>
<p>표시된 반복 횟수로 선택한 영역에서 청소 작업을 시작하십시오.</p>
<table>
<thead>
<tr>
<th>Service data attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entity_id</code></td>
<td>no</td>
<td>특정 로봇에서만 작동</td>
</tr>
<tr>
<td><code>zone</code></td>
<td>no</td>
<td>구역 목록. 각 구역은 4 개의 정수 값으로 구성된 배열입니다. 예시: [[23510,25311,25110,26361]]</td>
</tr>
<tr>
<td><code>repeats</code></td>
<td>no</td>
<td>1에서 3 사이의 각 영역에 대한 청소 반복 횟수.</td>
</tr>
</tbody>
</table>
<p><code>xiaomi_miio.vacuum_clean_zone</code> 사용예 :</p>
<p>인라인 배열 (inline array) :</p>
<pre><code class="language-yaml">automation:
  - alias: Test vacuum zone3
    trigger:
    - event: start
      platform: homeassistant
    condition: []
    action:
    - service: xiaomi_miio.vacuum_clean_zone
      data_template:
        entity_id: vacuum.xiaomi_vacuum
        repeats: '{{states('input_number.vacuum_passes')|int}}'
        zone: [[30914,26007,35514,28807], [20232,22496,26032,26496]]
</code></pre>
<p>인라인 영역이 있는 배열 :</p>
<pre><code class="language-yaml">automation:
  - alias: Test vacuum zone3
    trigger:
    - event: start
      platform: homeassistant
    condition: []
    action:
    - service: xiaomi_miio.vacuum_clean_zone
      data_template:
        entity_id: vacuum.xiaomi_vacuum
        repeats: '{{states('input_number.vacuum_passes')|int}}'
        zone:
        - [30914,26007,35514,28807]
        - [20232,22496,26032,26496]
</code></pre>
<p>배열 모드 :</p>
<pre><code class="language-yaml">automation:
  - alias: Test vacuum zone3
    trigger:
    - event: start
      platform: homeassistant
    condition: []
    action:
    - service: xiaomi_miio.vacuum_clean_zone
      data:
        entity_id: vacuum.xiaomi_vacuum
        repeats: 1
        zone:
        - - 30914
          - 26007
          - 35514
          - 28807
        - - 20232
          - 22496
          - 26032
          - 26496
</code></pre>
<h2>
<a class="title-link" name="" href="#"></a> 속성</h2>
<p><a href="/integrations/vacuum/#attributes">all of the attributes provided by the <code>vacuum</code> component</a>에 추가로, (<code>battery_icon</code>, <code>cleaned_area</code>, <code>fan_speed</code>, <code>fan_speed_list</code>, <code>params</code>) 사용가능합니다
<code>xiaomi</code> 플랫폼의 특정 속성을 다음 내용에 소개합니다.</p>
<ul>
<li><code>cleaning_time</code></li>
<li><code>do_not_disturb</code></li>
<li><code>main_brush_left</code></li>
<li><code>side_brush_left</code></li>
<li><code>filter_left</code></li>
<li><code>sensor_dirty_left</code></li>
<li><code>cleaning_count</code></li>
<li><code>total_cleaned_area</code></li>
<li><code>total_cleaning_time</code></li>
<li><code>clean_start</code></li>
<li><code>clean_end</code></li>
</ul>
<p>다음 표는 각 속성의 측정 단위를 보여줍니다. :</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Unit of measurement</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>do_not_disturb</code></td>
<td></td>
<td>DND 모드 켜기 / 끄기</td>
</tr>
<tr>
<td><code>cleaning_time</code></td>
<td>minutes</td>
<td>마지막/실제 청소 시간 (분) minutes</td>
</tr>
<tr>
<td><code>cleaned_area</code></td>
<td>square meter</td>
<td>평방 미터 단위의 마지막/실제 청소 영역 meters</td>
</tr>
<tr>
<td><code>main_brush_left</code></td>
<td>hours</td>
<td>메인 브러시를 교체해야 할 때까지 남은 시간</td>
</tr>
<tr>
<td><code>side_brush_left</code></td>
<td>hours</td>
<td>사이드 브러시 교체가 필요할 때까지 남은 시간</td>
</tr>
<tr>
<td><code>filter_left</code></td>
<td>hours</td>
<td>필터 교환이 필요할 때까지 남은 시간</td>
</tr>
<tr>
<td><code>sensor_dirty_left</code></td>
<td>hours</td>
<td>벽면 및 클리프 센서를 청소해야 할 때까지 남은 시간</td>
</tr>
<tr>
<td><code>cleaning_count</code></td>
<td></td>
<td>총 청소 횟수</td>
</tr>
<tr>
<td><code>total_cleaned_area</code></td>
<td>square meter</td>
<td>평방 미터 단위의 총 청소 면적</td>
</tr>
<tr>
<td><code>total_cleaning_time</code></td>
<td>minutes</td>
<td>총 청소 시간 (분)</td>
</tr>
<tr>
<td><code>clean_start</code></td>
<td>datetime</td>
<td>진공 청소기가 청소를 시작한 마지막 날짜/시간 (offset naive)</td>
</tr>
<tr>
<td><code>clean_end</code></td>
<td>datetime</td>
<td>진공 청소기의 마지막 날짜/시간 (offset naive)</td>
</tr>
</tbody>
</table>
<h2>
<a class="title-link" name="--" href="#--"></a> 액세스 토큰 검색</h2>
<div class="note">
<p>안드로이드 장치를 사용하여 Mi Home <code>v5.4.49</code>로 액세스 토큰을 검색하는 경우 작동합니다 (2019 년 12 월).  Mi Home <code>v5.4.49</code>을 사용하여 Smarthome/logs를 찾아 32글자 토큰이 저장된 폴더에서 텍스트 파일을 찾습니다 . 이 디렉토리에는 여러 개의 텍스트 파일이 있을 수 있습니다. 모든 파일에서 ‘Token’이라는 단어를 검색하면 찾을 수 있습니다. Mi Home의 최신 버전은 일반 텍스트로 토큰을 저장하지 않습니다.
<br> <br>
iPhone 앱은 여전히 <code>v4.23.4</code> 2019년 11월 17일부터 SQLite DB에 토큰을 저장합니다.
<br> <br>
Xiaomi 로봇 진공청소기의 WiFi 설정을 재설정 한 후 새로운 액세스 토큰이 생성되므로 이 지침을 다시 따라야합니다.
<br> <br>
이 지침은 새로운 RoboRock 앱이 아닌 Mi Home 앱용으로 작성되었습니다.
<br> <br>
이 토큰(16진수 32자)은 Xiaomi Mi Robot Vacuum, Mi Robot 2 (Roborock) Vacuum, Xiaomi Philips Lights 및 Xiaomi IR Remote에 필요합니다. Xiaomi Gateway는 다른 보안 방법을 사용하며 <code>key</code>(16자의 영숫자 문자)가 필요합니다 이는 Mi-Home 앱의 숨겨진 메뉴 항목 또는 <code>miio</code> command line 도구를 사용하여 쉽게 얻을 수 있습니다.</p>
</div>
<h3>
<a class="title-link" name="-" href="#-"></a> 안드로이드 (루팅안된)</h3>
<blockquote>
<p>안드로이드 장치를 사용하여 <code>v5.4.49</code> Mi Home 의 액세스 토큰을 검색하는 경우 작동합니다 (2019 년 12 월).</p>
</blockquote>
<ol>
<li>시작하려면 기본 Android 기기에서 평소와 같이 최신 버전의 Mi Home으로 Robovac을 설정하십시오.</li>
<li>이 디렉토리에 여러 개의 텍스트 파일이 있을 수 있습니다. 모든 파일에서 ‘Token’이라는 단어를 검색하면 찾을 수 있습니다. Mi Home의 최신 버전은 일반 텍스트로 토큰을 저장하지 않습니다.</li>
</ol>
<h3>
<a class="title-link" name="---" href="#---"></a> 리눅스 및 루팅된 안드로이드</h3>
<ol>
<li>시작하려면 기본 Android 기기에서 평소와 같이 최신 버전의 Mi Home으로 Robovac을 설정하십시오.</li>
<li>최신 Mi Home 앱을 사용하여 성공적으로 작동하고 라우터에서 진공청소기에 고정 IP를 제공하거나 LAN에서 수행하십시오.</li>
<li>루팅 된 Android 기기에 Mi Home의 <code>v5.4.54</code> 버전을 설치하고 로그인합니다 (두 개의 Mi Home 버전을 동시에 설치할 수 없음)</li>
<li>매번 같은 서버를 사용하고 있는지 확인하십시오</li>
<li>5.4.54를 사용하여 성공적인 작동을 보장하십시오 (locate는 좋은 간단한 테스트입니다)</li>
<li>adb를 사용하여 루팅 된 전화에서 토큰을 추출합니다.</li>
<li>adb 쉘을 사용하여 장치에 연결하고 루트권한을 가집니다 (Magsck 루트를 사용하는 경우 루트 액세스를 위해 <code>adb shell-&gt; su-&gt; whoami</code>를 수행하십시오).</li>
<li>그런 다음 grep -R ‘“token”’ /data/data/com.xiaomi.smarthome 을 실행하고 토큰을 가져옵니다</li>
</ol>
<h3>
<a class="title-link" name="ios" href="#ios"></a> iOS</h3>
<ol>
<li>
<p>Mi Home 앱으로 로봇을 설정하십시오. Xiaomi는 지역마다 다른 제품 이름을 사용하므로 올바른 지역을 선택하십시오. 새로운 RoboRock 앱은 현재 이 방법을 지원하지 않습니다.</p>
</li>
<li>
<p>iTunes를 사용하여 암호화되지 않은 iPhone 백업을 생성하십시오.</p>
</li>
<li>
<p><a href="https://www.imactools.com/iphonebackupviewer/" rel="external nofollow">iBackup Viewer</a>를 설치 하고 연 다음 백업을 여십시오.</p>
</li>
<li>
<p>“Raw Data” 모듈을 Open 합니다.</p>
</li>
<li>
<p><code>com.xiaomi.mihome</code>로 이동하십시오</p>
</li>
<li>
<p>다음과 같은 파일을 검색하십시오. : <code>123456789_mihome.sqlite</code> (참고 :<code>_mihome.sqlite</code>는 올바른 파일이 <em>아닙니다</em>. 보통 이 파일은 <code>Documents</code> 폴더에 있습니다.)</p>
</li>
<li>
<p>이 파일을 파일 시스템에 저장하십시오.</p>
</li>
<li>
<p><a href="https://sqlitebrowser.org/" rel="external nofollow">DB Browser for SQLite</a> 설치하십시오.</p>
</li>
<li>
<p>DB 브라우저를 열고 <code>.sqlite</code> 백업에서 저장 한 파일을 로드하십시오.</p>
</li>
<li>
<p><code>Execute SQL</code>탭을 클릭 하십시오.</p>
</li>
<li>
<p>이 쿼리를 입력하고 실행하십시오. :</p>
<pre><code class="language-sql">SELECT ZTOKEN FROM ZDEVICE WHERE ZMODEL LIKE "%vacuum%"
</code></pre>
</li>
<li>
<p>반환된 96자리 16진수 문자열을 클립 보드에 복사하십시오.</p>
</li>
<li>
<p><code>Terminal</code>을 열고 명령을 실행하십시오. :</p>
<pre><code class="language-bash">echo '0: &lt;YOUR HEXADECIMAL STRING&gt;' | xxd -r -p | openssl enc -d -aes-128-ecb -nopad -nosalt -K 00000000000000000000000000000000
</code></pre>
</li>
<li>
<p>결과값으로 나온 32자리 문자열을 토큰으로 사용하십시오. (맥의 터미널 세션에서)</p>
</li>
</ol>
<h3>
<a class="title-link" name="-bluestacks" href="#-bluestacks"></a> 블루스택 (Bluestacks)</h3>
<ol>
<li>Mi-Home 앱으로 로봇을 구성하십시오. Xiaomi는 지역마다 다른 제품 이름을 사용하므로 올바른 지역을 선택하십시오. 새로운 RoboRock 앱은 현재이 방법을 지원하지 않습니다.</li>
<li>
<a href="https://www.bluestacks.com" rel="external nofollow">BlueStacks</a>를 설치하십시오 .</li>
<li>BlueStacks에서 <a href="https://www.apkmirror.com/apk/xiaomi-inc/mihome/mihome-5-0-30-release/" rel="external nofollow">Mi Home version 5.0.30</a>을 셋업하고 로그인하여 장치를 동기화하십시오.</li>
<li>
<a href="https://forum.xda-developers.com/general/general/bluestacks-tweaker-2-tool-modifing-t3622681" rel="external nofollow">BlueStacks Tweaker</a>를 사용하여 파일 시스템에 액세스하고 토큰을 검색하십시오.</li>
<li>Bluestacks Tweakers 파일 시스템 도구를 사용하여 <code>/data/data/com.xiaomi.smarthome/databases/miio2.db</code> 파일을 컴퓨터에 복사하십시오.</li>
<li>
<a href="https://sqlitebrowser.org/" rel="external nofollow">DB Browser for SQLite</a>를 설치하십시오.</li>
<li>DB 브라우저를 열고 컴퓨터에서 <code>miio2.db</code>를 로드하십시오</li>
<li>DB 브라우저에서 <code>Browse Data</code> 탭을 선택하고 <code>devicerecord</code>라는 테이블로 전환하십시오</li>
<li>연결된 모든 장치 정보가 토큰과 함께 표시됩니다.</li>
</ol>
<h3>
<a class="title-link" name="miio----miio-command-line-tool" href="#miio----miio-command-line-tool"></a> Miio 컴맨드 라인 도구 (Miio command line tool)</h3>
<p>진공 청소기가 Mi Home에 연결되기 전에 Miio를 사용해야합니다. 이미 앱에 연결 한 경우 앱을 삭제 한 다음 Vacuum이 생성하는 Ad-hoc Wi-Fi 네트워크에 가입해야합니다. 진공 상태가 이미 페어링 된 경우이 방법은 <code>???</code> 토큰으로만 반환될 수 있습니다.</p>
<p>다음 명령을 사용하여 command line 도구를 설치할 수 있습니다. :</p>
<pre><code class="language-bash">npm install -g miio
</code></pre>
<p>현재 네트워크에서 장치 검색 :</p>
<pre><code class="language-bash">miio discover
</code></pre>
<p>컴퓨터와 동일한 네트워크에 연결된 장치가 표시됩니다. 모든 장치가 응답하는데 1 ~ 2 분이 걸릴 수 있으므로 잠시 동안 실행하여 모든 장치에 도달 할 수 있도록 하십시오.</p>
<p>이 명령은 각 장치를 다음 형식으로 출력합니다. :</p>
<pre><code class="language-text">Device ID: 48765421
Model info: zhimi.airpurifier.m1
Address: 192.168.100.9
Token: token-as-hex-here via auto-token
Support: At least basic
</code></pre>
<p>정보 출력은 다음과 같습니다. :</p>
<ul>
<li>
<code>Device ID</code> - 장치의 고유 식별자는 장치를 재설정해도 변경되지 않습니다..</li>
<li>
<code>Model ID</code>- 모델 ID가 결정될 수 있는 경우 모델 유형을 나타냅니다.</li>
<li>
<code>Address</code> - 장치의 IP 주소</li>
<li>
<code>Token</code> - 장치의 토큰 또는 자동으로 확인할 수 없는 경우 <code>???</code>.</li>
</ul>
<h2>
<a class="title-link" name="-----" href="#-----"></a> 특정 방을 청소하는 방법에 대한 예</h2>
<p>특정 방을 청소하는 데 사용하는 <a href="/integrations/vacuum/"><code>vacuum.send_command</code></a> 스크립트 예 :</p>
<pre><code class="language-yaml">vacuum_kitchen:
  alias: "Clean the kitchen"
  sequence:
    - service: vacuum.send_command
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        command: app_segment_clean
        params: [18]
</code></pre>
<p>params가 룸번호를 지정하는 경우 여러 룸에 대해 params는 <code>[17,18]</code>처럼 지정할 수 있습니다</p>
<p>miio command-line 도구를 사용하여 유효한 회의실 번호를 검색 할 수 있습니다. 방 번호만 제공하고 방 이름은 제공하지 않습니다. 방 이름을 얻으려면 app_segment_clean 명령을 테스트하고 어떤 방을 청소하는지 확인할 수 있습니다.</p>
<pre><code class="language-bash">miio protocol call &lt;ip of the vacuum&gt; get_room_mapping
</code></pre>
<h2>
<a class="title-link" name="-------brushes-filter-sensors" href="#-------brushes-filter-sensors"></a> 유지 보수 시간을 재설정하는 방법에 대한 예 (brushes, filter, sensors)</h2>
<p>진공청소기 엔티티는 브러시, 필터 및 센서를 청소하거나 교체해야 할 때의 속성값을 저장합니다 (<code>main_brush_left</code>,<code>side_brush_left</code>,<code>filter_left</code> 및<code>sensor_dirty_left</code>). 값은 시간 단위로 측정됩니다. 부품을 청소하거나 교체하면 해당 값을 진공으로 재설정 할 수 있습니다. 다음은 <a href="/integrations/vacuum/"><code>vacuum.send_command</code></a>를 사용하여 기본 브러시의 시간을 재설정하는 스크립트 예입니다. :</p>
<pre><code class="language-yaml">reset_main_brush_left:
  alias: "Reset hours for main brush replacement"
  sequence:
    - service: vacuum.send_Command
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        command: reset_consumable
        params: ['main_brush_work_time']
</code></pre>
<p>허용 가능한 <code>params</code>’ <code>reset_consumable</code> 명령 :</p>
<ul>
<li><code>['main_brush_work_time']</code></li>
<li><code>['side_brush_work_time']</code></li>
<li><code>['filter_work_time']</code></li>
<li><code>['sensor_dirty_time']</code></li>
</ul>
<h2>
<a class="title-link" name="---" href="#---"></a> 구역 청소 좌표 검색</h2>
<h3>
<a class="title-link" name="flolevac-" href="#flolevac-"></a> FloleVac(안드로이드) 사용</h3>
<ol>
<li>
<a href="https://play.google.com/store/apps/details?id=de.flole.xiaomi" rel="external nofollow">FloleVac</a> 다운로드</li>
<li>Xiaomi 자격 증명으로 로그인</li>
<li>지도 열기 (진공 청소기와 동일한 네트워크에 있는지 확인)</li>
<li>“Zone cleanup”를 선택하고 청소하려는 구역 주위에 상자를 그립니다.</li>
<li>“Cleanup”을 길게 누르면 영역 좌표가 클립 보드에 복사됩니다.</li>
</ol>
<h3>
<a class="title-link" name="roborock----valtudo--" href="#roborock----valtudo--"></a> ROBOROCK 제어 센터 사용 (VALTUDO 펌웨어 필요)</h3>
<p><a href="https://github.com/LazyT/rrcc" rel="external nofollow">RRCC</a>는 루팅된 진공청소기 및 루팅되지 않은 진공청소기 모두 지원하며 클라우드없이 로컬로 작동하는 Mi Home을 대체 할 수있는 모든 기능을 갖춘 대체품입니다. 루팅 된 펌웨어 <a href="https://github.com/Hypfer/Valetudo" rel="external nofollow">Valetudo</a> 를 설치 한 경우 진공청소기로 SSH를 설정하고 MQTT를 활성화하고 클라우드 요구 사항없이 맵 기능을 사용할 수 있습니다.</p>
<p>맵 편집기를 사용하면 영역 정리에 필요한 좌표를 얻을 수 있습니다. 다음은 영역 정리를위한 예제 스크립트입니다. :</p>
<pre><code class="language-yaml">vacuum_kitchen:
  alias: "vacuum kitchen"
  sequence:
    - service: vacuum.send_command
      data:
        entity_id: 'vacuum.xiaomi_vacuum_cleaner'
        command: app_zoned_clean
        params: [[23084,26282,27628,29727,1]]
</code></pre>


</article>

          
        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">
  
  
    <section class="aside-module grid__item one-whole lap-one-half">

<div class='edit-github'><a href='https://github.com/hakorea/gitpages_source/blob/master/source/_integrations/vacuum.xiaomi_miio.markdown'>깃허브 편집</a></div>

<div class='brand-logo-container section'><img src='/images/supported_brands/xiaomi.png' /></div><div class="section">
    <kb-alert-link integration="xiaomi_miio"></kb-alert-link>
  </div><div class='section'>
      IoT class<sup><a href='/blog/2016/02/12/classifying-the-internet-of-things/#classifiers'><i class="icon-info-sign"></i></a></sup>: Local Polling
    </div><div class='section'>
      Introduced in release: 0.51
    </div><div class='section'>
    Source: <a href='https://github.com/home-assistant/home-assistant/blob/dev/homeassistant/components/xiaomi_miio/'>/components/xiaomi_miio/</a>
  </div><div class='section'>
    <h1 class="title delta">카테고리</h1>
    <ul class='divided'><li>
        <a href='/integrations/#vacuum'>Vacuum</a>
      </li></ul>
    </div></section>

<script src="https://alerts.home-assistant.io/ce-alert-link.js"></script>

  
</div>

        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <div class="copyright grid">
        <div class='company grid__item one-third lap-one-half palm-one-whole'>
          <div class="title">
            <img src="/images/home-assistant-logo.png" width="36" height="36" alt="Home Assistant"> 홈어시스턴트
          </div>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          <ul>
            <li><a href='https://alerts.home-assistant.io'>Home Assistant Alerts</a></li>
            <li><a href='https://cafe.naver.com/koreassistant'>HA 네이버 카페</a></li>
          </ul>
        </div>

        <div class='grid__item one-third lap-one-half palm-one-whole'>
          이 웹사이트는 <a href='https://jekyllrb.com/'>Jekyll</a>과
          <a href='https://github.com/coogie/oscailte'>Oscalite 테마</a>를 사용합니다.
        </div>
      </div>
    </div>
  </div>
</div>

    </footer>

    <script>
var _gaq=[['_setAccount',''],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script src="/javascripts/prism.js?5d6619066a1fc5cd819a93c132b539ac" type="text/javascript"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  apiKey: 'c762b5632da4220f398f985614f3a1e3',
  indexName: 'hakorea',
  inputSelector: '#search',
  debug: false // Set debug to true if you want to inspect the dropdown
});
document.querySelector('.search .close').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'none';
});
document.querySelector('.show-search').addEventListener('click', function(ev) {
  ev.preventDefault();
  document.querySelector('.search-container').style.display = 'block';
  document.getElementById('toggle').checked = false;
  document.querySelector('.search-container input').focus();
});
</script>

  </body>
</html>
